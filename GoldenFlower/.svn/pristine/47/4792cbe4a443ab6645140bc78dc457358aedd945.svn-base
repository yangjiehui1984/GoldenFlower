require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"ButtonScale":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5a421EEBHBHVa9GjAAkNYhq', 'ButtonScale');
// Script/Tools/ButtonScale.js

'use strict';

//按钮标识
var EbuttonTag = cc.Enum({

    eChip20: 0,
    eChip50: 1,
    eChip100: 2,
    eChip500: 3,
    eChip1000: 4,
    eClear: 5,
    eHistoryList: 6

});

cc.Class({
    extends: cc.Component,

    properties: {
        scaleFlag: true,
        buttonTag: 0,
        parentNode: cc.Node },

    // use this for initialization
    onLoad: function onLoad() {

        // var timeCallback = function (dt)
        {
            if (this.parentNode) {
                this.parentNode.on(cc.Node.EventType.TOUCH_START, function (event) {
                    if (this.scaleFlag) {
                        this.node.scale = 0.8;
                    }
                }, this);
            }

            if (this.parentNode) {
                this.parentNode.on(cc.Node.EventType.TOUCH_END, function (event) {
                    if (this.scaleFlag) {
                        this.node.scale = 1;
                    }
                    var onFunction = cc.find('Canvas').getComponent('game');
                    onFunction.btnActionCallBack(this.buttonTag);
                }, this);
            }

            if (this.parentNode) {
                this.parentNode.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {
                    if (this.scaleFlag) {
                        this.node.scale = 1;
                    }
                }, this);
            }
        }
    }

});

module.exports = {
    EbuttonTag: EbuttonTag
};

cc._RFpop();
},{}],"DataOper":[function(require,module,exports){
"use strict";
cc._RFpush(module, '370d7GWnVZOL5PlfbPKEsjx', 'DataOper');
// Script/network/DataOper.js

"use strict";

var CryptoJS = require("core");
require("aes");
var NetData = require("NetData");

var KeyValue = cc.Class({
    properties: {
        key: "",
        value: ""
    }
});

var CusMap = cc.Class({
    properties: {
        maps: {
            default: [],
            type: [KeyValue],
            serializable: false
        }
    },

    set: function set(key, value) {
        var s_key = key.toString();
        var flag = false;

        for (var i = 0; i < this.maps.length; ++i) {
            if (this.maps[i].key === s_key) {
                flag = true;
                this.maps[i].value = value;
                break;
            }
        }

        if (flag === false) {
            var keyValue = new KeyValue();
            keyValue.key = s_key;
            keyValue.value = value;
            this.maps.push(keyValue);
        }
    },

    get: function get(key) {
        var s_key = key.toString();

        for (var i = 0; i < this.maps.length; ++i) {
            if (this.maps[i].key === s_key) {
                return this.maps[i].value;
            }
        }

        return null;
    },

    clear: function clear(key) {
        for (var i = 0; i < this.maps.length; ++i) {
            if (this.maps[i].key == key) {
                this.maps.splice(i, 1);
                break;
            }
        }
    }
});

var NetWork = cc.Class({
    send: function send(requestId, requestHeaders, requestData, callfunc) {
        var xhr = cc.loader.getXMLHttpRequest();

        if (!CC_JSB) {
            if (window.aliLotteryCasinoSDK) {
                xhr = window.aliLotteryCasinoSDK.getHttpRequestObject();
            }
        }

        xhr.open("POST", "http://10.0.20.172:8080/gateway/process");
        //xhr.open("POST", "http://172.16.20.161:7080/gateway/process");//"http://172.16.20.175:8080/gateway/process"); //"http://10.0.1.232:7080/new_gateway/process"); 
        xhr.timeout = 15000; //15s超时

        //设置请求头
        for (var i = 0; i < requestHeaders.length; ++i) {
            xhr.setRequestHeader(requestHeaders[i].key, requestHeaders[i].value);
        }

        xhr.send(requestData);

        xhr.onload = function () {
            callfunc(requestId, xhr);
        };

        xhr.onerror = function () {
            callfunc(requestId, xhr);
        };

        xhr.ontimeout = function () {
            callfunc(requestId, xhr);
        };
    }
});

var DataOper = cc.Class({

    statics: {
        g_DataOperInst: null,
        s_index: 0,

        getInst: function getInst() {

            if (DataOper.g_DataOperInst === null) {
                DataOper.g_DataOperInst = new DataOper();
                DataOper.g_DataOperInst.init();
            }
            return DataOper.g_DataOperInst;
        },

        destoryInst: function destoryInst() {

            if (DataOper.g_DataOperInst !== null) {
                DataOper.g_DataOperInst = null;
            }
        }
    },

    properties: {
        //请求data
        requestData: "",
        //请求id
        requestId: 0,
        //aes Key
        aesKey: "817fed95f9e16bed", //秘钥，写死

        //****************请求头信息**********
        //请求头数组
        requestHeaders: {
            default: [],
            type: [KeyValue],
            serializable: false
        },
        //命令号
        headerCmd: 0, //初始化-100  投注-101  结算-103
        //sig
        headerSig: "",
        //版本号
        headerVer: "1.0",
        //会话标识
        headerToken: "3706201779", //"3706201779",
        //游戏渠道实例标识
        gameToken: "ad80db994dabb90b42db00214b8d301d-9-901-1202" },

    init: function init() {
        this.callfuncs = new CusMap();
        this.callnode = new CusMap();
        this.callcmd = new CusMap();
        cc.log("jb=" + CC_JSB);

        if (!CC_JSB) {
            this.gameToken = this.GetQueryString("accessToken");

            if (this.gameToken == null) {
                this.gameToken = "ad80db994dabb90b42db00214b8d301d-9-901-1202"; //"ddd76cd6e9b62dc2259aa772a4501b22-9-951-926";
                var tok = this.GetQueryString("tok");

                if (tok) {
                    this.headerToken = tok;
                    console.log("tok=" + this.headerToken);
                } else {
                    this.headerToken = "";
                }
                //test
                /*var myDate = new Date();
                this.headerToken = myDate.getTime();*/
            }
        } else {}

        console.log("this.gameToken = " + this.gameToken);
    },

    GetQueryString: function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r !== null) return unescape(r[2]);return null;
    },

    setRequestHeader: function setRequestHeader() {
        this.requestHeaders = [];

        var keyValue = new KeyValue();
        keyValue.key = "cmd";
        keyValue.value = this.headerCmd.toString();
        this.requestHeaders.push(keyValue);

        keyValue = new KeyValue();
        keyValue.key = "Content-Type";
        keyValue.value = "text/plain";
        this.requestHeaders.push(keyValue);

        /*keyValue = new KeyValue();
        keyValue.key = "cid";
        keyValue.value = this.headerCid.toString();
        this.requestHeaders.push(keyValue);*/

        keyValue = new KeyValue();
        keyValue.key = "sig";
        keyValue.value = this.headerSig.toString();
        this.requestHeaders.push(keyValue);

        keyValue = new KeyValue();
        keyValue.key = "ver";
        keyValue.value = this.headerVer.toString();
        this.requestHeaders.push(keyValue);

        keyValue = new KeyValue();
        keyValue.key = "tok";
        keyValue.value = this.headerToken.toString();
        this.requestHeaders.push(keyValue);

        keyValue = new KeyValue();
        keyValue.key = "gameToken";
        keyValue.value = this.gameToken.toString();
        this.requestHeaders.push(keyValue);

        /*keyValue = new KeyValue();
        keyValue.key = "gid";
        keyValue.value = this.headerGid.toString();
        this.requestHeaders.push(keyValue);*/
    },

    request: function request(callFunc, self) {
        if (this.headerCmd != 105) {
            console.log("request-----------data = " + this.requestData + ";cmd:" + this.headerCmd);
        }

        this.callfuncs.set(DataOper.s_index, callFunc);
        this.callnode.set(DataOper.s_index, self);
        this.callcmd.set(DataOper.s_index, this.headerCmd);
        //aes加密
        this.requestData = this.AESEncryption(this.requestData, this.aesKey);
        //Base64
        //this.requestData = Base64.encode(this.requestData);
        //gzip
        //this.requestData = this.requestData;
        //md5
        this.headerSig = CryptoJS.MD5(this.requestData);
        //请求头
        this.setRequestHeader();
        //send
        var netWork = new NetWork();
        netWork.send(DataOper.s_index, this.requestHeaders, this.requestData, this.onHttpRequestCompleted);
        DataOper.s_index++;
    },

    /**
     * 联网回调
     * @Param requestId 请求id
     * @param status   联网状态
     * @param responeData 响应data
     */
    onHttpRequestCompleted: function onHttpRequestCompleted(requestId, xhr) {
        console.log("onHttpRequestCompleted.xhr.status=" + xhr.status);
        var callFunc = DataOper.getInst().callfuncs.get(requestId);
        var callNode = DataOper.getInst().callnode.get(requestId);
        var callCmd = DataOper.getInst().callcmd.get(requestId);
        cc.log("callCmd=" + callCmd + "/ln=" + DataOper.getInst().callcmd.maps.length + "'" + DataOper.getInst().callfuncs.maps.length + "'" + DataOper.getInst().callnode.maps.length);
        DataOper.getInst().callfuncs.clear(requestId);
        DataOper.getInst().callnode.clear(requestId);
        DataOper.getInst().callcmd.clear(requestId);

        if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {
            //取http头
            //命令号
            var cmd = xhr.getResponseHeader("cmd");
            cmd = parseInt(cmd);
            //res
            var res = xhr.getResponseHeader("res");
            //msg
            var msg = xhr.getResponseHeader("msg");
            msg = decodeURIComponent(msg);
            //sig
            var sig = xhr.getResponseHeader("sig");
            cc.log("xhr.status=" + xhr.status + "|re=" + res);

            if (res == 0) {
                //取body
                var body = xhr.responseText;
                //md5验证
                var t_sig = CryptoJS.MD5(body);
                var t_sig_str = new String(t_sig);
                var sig_str = new String(sig);
                t_sig_str = t_sig_str.trim();
                sig_str = sig_str.trim();

                if (t_sig_str == sig_str) {
                    console.log("valify right");
                    DataOper.getInst().parserServerData(body, cmd);
                    callFunc(cmd, res, msg, callNode);

                    //更新账户余额
                    //初始化调过了，不调了。
                    if (!CC_JSB) {
                        if (window.aliLotteryCasinoSDK) {
                            switch (cmd) {
                                case 101: //bet
                                case 102: //clear
                                case 103:
                                    //reward
                                    {
                                        window.aliLotteryCasinoSDK.updateUserInfo();
                                    }
                                    break;
                                default:
                                    break;
                            }
                        }
                    }
                } else {
                    callFunc(cmd, -1, "加密验证错误", callNode);
                }
            } else {
                console.log("报错---res:" + res + "----msg:" + msg);

                //纯业务logic
                if (cmd == 100 && res == 999999) {
                    NetData.NetData.getInst().initFlag = 2;
                    NetData.NetData.getInst().stopSellingDesc = msg;
                }
                //end 业务
                callFunc(cmd, res, msg, callNode);
            }
        } else {
            //联网失败
            console.log("http status:" + xhr.status + "|callCmd=" + callCmd);
            callFunc(callCmd, -1, "网络可能不好哦，请重试", callNode);
        }
    },

    /**
     *解析服务器返回数据
     * @param data
     * @param cmd
     */
    parserServerData: function parserServerData(data, cmd) {
        //gzip解压
        //data = data;
        //Base64
        //data = Base64.decode(data);
        //aes解密
        data = this.AESDecrypt(data, this.aesKey);
        var iNum1 = parseInt(cmd);

        if (iNum1 != 105) {
            console.log("data = " + data + ", cmd = " + cmd);
        }

        switch (iNum1) {
            case 100:
                {
                    this.parserInit(data);
                }
                break;
            case 101:
                {
                    this.parserBet(data);
                }
                break;
            case 102:
                {
                    this.parseClear(data);
                }
                break;
            case 103:
                {
                    this.parserReward(data);
                }
                break;
            case 104:
                {
                    this.parseSecondData(data);
                }
                break;
            case 105:
                {
                    this.parseTable(data);
                }
                break;
            case 106:
                {
                    this.parseOrderList(data);
                }
                break;
            case 107:
                {
                    this.parserHistory(data);
                }
                break;
            default:
                break;
        }
    },

    //AES加密
    AESEncryption: function AESEncryption(data, aesKey) {
        var key = CryptoJS.enc.Utf8.parse(aesKey);
        var iv = CryptoJS.enc.Utf8.parse(aesKey);
        var srcs = CryptoJS.enc.Utf8.parse(data);
        var encrypted = CryptoJS.AES.encrypt(srcs, key, { iv: iv, mode: CryptoJS.mode.ECB });
        return encrypted.toString();
    },

    //AES解密
    AESDecrypt: function AESDecrypt(data, aesKey) {
        var key = CryptoJS.enc.Utf8.parse(aesKey);
        var iv = CryptoJS.enc.Utf8.parse(aesKey);
        var decrypt = CryptoJS.AES.decrypt(data, key, { iv: iv, mode: CryptoJS.mode.ECB });
        return CryptoJS.enc.Utf8.stringify(decrypt).toString();
    },

    /**
     * 解析初始化
     * @param data
     */
    parserInit: function parserInit(data) {
        var netData = NetData.NetData.getInst();
        netData.initData = JSON.parse(data);
        cc.log("netData.initData.oddsList ", netData.initData.oddsList);
        netData.session = netData.initData.session;
        netData.periodId = netData.initData.periodId;
        netData.ticketNo = netData.initData.ticketNo;
        netData.betLimit = netData.initData.betLimit;
        netData.totalBetLimit = netData.initData.totalBetLimit;

        var periodEndTime = null;
        if (netData.initData.status == 1) {
            netData.timeFlag = 1;
            periodEndTime = netData.initData.periodEndTime1;
        } else if (netData.initData.status == 3 || netData.initData.status == 2 || netData.initData.status == 4) {
            netData.timeFlag = 2;
            periodEndTime = netData.initData.periodEndTime2;
        }

        if (periodEndTime != null) {
            netData.lotteryId = netData.initData.lotteryId;
            netData.lotteryIndex = netData.initData.lotteryIndex;

            var te = new Date();
            var localTime = te.getTime();
            var severTime = netData.initData.serverTime;
            netData.receiveTime = localTime - severTime;
            netData.secs = Math.floor((periodEndTime - severTime) / 1000 - netData.betThreshold - 3);
            cc.log("receiveTime=" + netData.receiveTime + "|" + netData.secs);
        }
        //
        netData.initFlag = 1;
    },

    /**
     * 解析投注
     */
    parserBet: function parserBet(data) {
        var netData = NetData.NetData.getInst();
        var objRoot = JSON.parse(data);
        netData.betLimit = objRoot.betLimit;
        netData.totalBetLimit = objRoot.totalBetLimit;
        netData.ticketNo = objRoot.ticketNo;

        var te = new Date();
        var localTime = te.getTime();
        var severTime = objRoot.serverTime;
        var tmp = localTime - severTime;

        if (tmp < netData.receiveTime) {
            netData.receiveTime = tmp;
            netData.secs = Math.floor((netData.betData.periodEndTime - severTime) / 1000 - netData.betThreshold - 3);
            cc.log("receiveTime=" + netData.receiveTime + "|" + netData.secs);
        }
    },

    parseClear: function parseClear(data) {
        var netData = NetData.NetData.getInst();
        var objRoot = JSON.parse(data);
        netData.ticketNo = "";
        netData.betLimit = netData.initData.betLimit;
        netData.totalBetLimit = netData.initData.totalBetLimit;
        var te = new Date();
        var localTime = te.getTime();
        var severTime = objRoot.serverTime;
        var tmp = localTime - severTime;

        if (tmp < netData.receiveTime) {
            netData.receiveTime = tmp;
            netData.secs = Math.floor((objRoot.periodEndTime - severTime) / 1000 - netData.betThreshold - 3);
            cc.log("receiveTime=" + netData.receiveTime + "|" + netData.secs);
        }
    },

    /**
     * 结算
     */
    parserReward: function parserReward(data) {
        var netData = NetData.NetData.getInst();
        var objRoot = JSON.parse(data);
        netData.rewardData = objRoot;
        // netData.rewardData = JSON.parse(data);      

        netData.periodId = netData.rewardData.nextPeriodId;
        netData.timeFlag = netData.rewardData.nextTimeFlag;
        netData.initData.periodEndTime2 = objRoot.periodEndTime2;

        if (objRoot.periodEndTime != undefined) {
            var te = new Date();
            var localTime = te.getTime();
            var severTime = objRoot.serverTime;
            netData.receiveTime = localTime - severTime;
            netData.secs = Math.floor((objRoot.periodEndTime1 - severTime) / 1000 - netData.betThreshold - 3);
            cc.log("receiveTime=" + netData.receiveTime + "|" + netData.secs);
        }
    },

    parseTable: function parseTable(data) {
        var netData = NetData.NetData.getInst();
        var objRoot = JSON.parse(data);
        var te = new Date();
        var localTime = te.getTime();
        var severTime = objRoot.serverTime;
        var tmp = localTime - severTime;

        if (tmp < netData.receiveTime) {
            netData.receiveTime = tmp;
            netData.secs = Math.floor((objRoot.periodEndTime - severTime) / 1000 - netData.betThreshold - 3);
            cc.log("receiveTime=" + netData.receiveTime + "|" + netData.secs);
        }

        //解析list
        netData.tableArray = [];
        netData.tableArray = objRoot.list;
    },

    parseSecondData: function parseSecondData(data) {
        var netData = NetData.NetData.getInst();
        var objRoot = JSON.parse(data);
        netData.secondData = objRoot;
        netData.timeFlag = 2;
        var severTime = objRoot.serverTime;
        netData.secs = Math.floor((netData.initData.periodEndTime2 - severTime) / 1000 - netData.betThreshold - 3);
        cc.log("明投剩余时间********" + netData.initData.periodEndTime2 + " - " + severTime + " = " + netData.secs);
        /*
              var te = new Date();
              let localTime = te.getTime();
              let severTime = objRoot.serverTime;
              let tmp = localTime - severTime;
               if(tmp < netData.receiveTime){
                  netData.receiveTime = tmp; 
                  netData.secs = Math.floor((netData.initData.periodEndTime2 - severTime) / 1000 - netData.betThreshold - 3);
                  cc.log("receiveTime=" + netData.receiveTime + "|" + netData.secs);
              }
              */
    },

    parseOrderList: function parseOrderList(data) {
        var netData = NetData.NetData.getInst();
        var objRoot = JSON.parse(data);
        netData.orderList = [];
        netData.orderList = objRoot.data;
    },

    parserHistory: function parserHistory(data) {
        var netData = NetData.NetData.getInst();
        var objRoot = JSON.parse(data);
        netData.historyList = [];
        netData.historyList = objRoot.historyList;
    },

    /**
     * 初始化
     * @param
     * 
     */
    getInit: function getInit(session, callFunc, self) {
        if (session == null) {
            this.requestData = "{}";
        } else {
            var obj = new Object();
            obj.session = session;
            this.requestData = JSON.stringify(obj);
        }

        //提前初始化
        NetData.NetData.getInst().initFlag = 0;
        //设置命令号，每个请求都不一样
        this.headerCmd = 100;
        //请求网络
        this.request(callFunc, self);
    },

    /**
     * 投注
     * @param ticket_no 订单号，首次投注为空
     * @param step 步数
     * @Parma trans_data 数据交互
     */
    getBet: function getBet(callFunc, self) {
        var netData = NetData.NetData.getInst();
        this.requestData = "";
        //拼成json串，每个请求都不一样
        var obj = new Object();
        var te = new Date();
        obj.tid = te.getTime().toString();
        te = null;
        obj.betList = netData.reqBetList;
        obj.periodId = netData.periodId;
        obj.timeFlag = netData.timeFlag;
        obj.session = netData.session;
        this.requestData = JSON.stringify(obj);
        obj = null;
        //设置命令号，每个请求都不一样
        this.headerCmd = 101;
        //请求网络
        this.request(callFunc, self);
    },

    getClear: function getClear(callFunc, self) {
        var netData = NetData.NetData.getInst();
        this.requestData = "";
        //拼成json串，每个请求都不一样
        var obj = new Object();
        obj.periodId = netData.periodId;
        obj.session = netData.session;
        obj.timeFlag = netData.timeFlag;
        this.requestData = JSON.stringify(obj);
        obj = null;
        //设置命令号，每个请求都不一样
        this.headerCmd = 102;
        //请求网络
        this.request(callFunc, self);
    },

    /**
     * 结算
     * @param ticket_no 订单号
     */
    getReward: function getReward(callFunc, self) {
        this.requestData = "";
        //拼成json串，每个请求都不一样
        var obj = new Object();
        obj.periodId = NetData.NetData.getInst().periodId;
        obj.session = NetData.NetData.getInst().session;
        obj.ticketNo = NetData.NetData.getInst().ticketNo;

        // obj.uids = new Array();
        obj.uids = [12, 123];
        // for(let i = 0; i < NetData.NetData.getInst().tableArray.length(); ++i){
        //     obj.uids.push(NetData.NetData.getInst().tableArray[i].uid);
        // }

        this.requestData = JSON.stringify(obj);
        obj = null;
        //设置命令号，每个请求都不一样
        this.headerCmd = 103;
        //请求网络
        this.request(callFunc, self);
    },

    getTable: function getTable(callFunc, self) {
        this.requestData = "";
        //拼成json串，每个请求都不一样
        var obj = new Object();
        obj.list = NetData.NetData.getInst().tableArray;
        obj.periodId = NetData.NetData.getInst().periodId;
        obj.session = NetData.NetData.getInst().session;
        obj.timeFlag = NetData.NetData.getInst().timeFlag;
        this.requestData = JSON.stringify(obj);
        obj = null;
        this.headerCmd = 105;
        //请求网络
        this.request(callFunc, self);
    },

    /**
     * 获取二阶段数据
     */
    getSecondData: function getSecondData(callFunc, self) {
        this.requestData = "";
        //拼成json串，每个请求都不一样
        var obj = new Object();
        obj.periodId = NetData.NetData.getInst().periodId;
        obj.session = NetData.NetData.getInst().session;
        this.requestData = JSON.stringify(obj);
        obj = null;
        this.headerCmd = 104;
        //请求网络
        this.request(callFunc, self);
    },

    getOrderList: function getOrderList(callFunc, self) {
        this.requestData = "";
        this.headerCmd = 106;
        //请求网络
        this.request(callFunc, self);
    },

    getHistory: function getHistory(callFunc, self) {
        this.requestData = "";
        //拼成json串，每个请求都不一样
        var obj = new Object();
        obj.session = NetData.NetData.getInst().session;
        this.requestData = JSON.stringify(obj);
        obj = null;
        this.headerCmd = 107;
        //请求网络
        this.request(callFunc, self);
    }
});

module.exports = {
    DataOper: DataOper
};

cc._RFpop();
},{"NetData":"NetData","aes":"aes","core":"core"}],"HelloWorld":[function(require,module,exports){
"use strict";
cc._RFpush(module, '280c3rsZJJKnZ9RqbALVwtK', 'HelloWorld');
// Script/HelloWorld.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        label: {
            default: null,
            type: cc.Label
        },
        // defaults, set visually when attaching this script to the Canvas
        text: 'Hello, World!'
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.label.string = this.text;
    },

    // called every frame
    update: function update(dt) {}
});

cc._RFpop();
},{}],"Help":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'cdd59b7NnNFr59YCYK5OLHf', 'Help');
// Script/Help.js

"use strict";

var NetData = require("NetData");
var Game = require("game");

cc.Class({
    extends: cc.Component,

    properties: {
        //游戏帮助
        uiBlack: cc.Node,
        testNode: cc.Node,
        scrollView: cc.Node,
        content: cc.Node,
        view: cc.Node,
        lock: false,
        gameNode: cc.Node,
        imgArray: [cc.Sprite]
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.netData = NetData.NetData.getInst();
        this.lock = true;
        var oriP1 = this.testNode.convertToWorldSpaceAR(cc.v2(0, 0));
        this.oriY = this.testNode.y - oriP1.y;
        //console.log("oriY=" + this.node.y + "|" + oriP1.y);        

        var callFunc_1 = cc.callFunc(function () {
            this.lock = false;
            var se = cc.director.getWinSize();
            this.scrollView.height = se.height * 0.8;
            this.scrollView.getChildByName("view").height = this.scrollView.height;
            this.node.height = this.scrollView.height;
            this.node.y = this.oriY - this.scrollView.height;
            //console.log("ny=" + this.node.y);
        }, this);

        this.node.runAction(cc.sequence(cc.delayTime(0.1), callFunc_1));

        this.uiBlack.on(cc.Node.EventType.TOUCH_START, function (event) {
            event.stopPropagation();
            this.close();
        }, this);
    },

    close: function close() {
        if (!this.lock) {
            this.uiBlack.active = false;

            var call3 = cc.callFunc(function () {
                this.netData.helpShowFlag = false;
            }, this);

            this.node.runAction(cc.sequence(cc.moveTo(0.3, cc.v2(0, this.oriY - this.scrollView.height)), call3));
        }
    },

    downHelp: function downHelp() {
        var self = this;
        var spt = this.gameNode.getComponent(Game);
        spt.showWaitLayer();
        var rh = 0;

        cc.loader.load(this.netData.rulePics, null, function (errors, results) {
            if (errors) {
                for (var i = 0; i < errors.length; i++) {
                    console.log('Error url [' + errors[i] + ']: ' + results.getError(errors[i]));
                }
            }
            // cc.log("results is %% ", results.getContent.length);
            var len = self.netData.rulePics.length;

            for (var _i = 0; _i < len; _i++) {

                var aTex = results.getContent(self.netData.rulePics[_i]);
                console.log(self.netData.rulePics[_i] + "|" + aTex);
                var sf = new cc.SpriteFrame();
                sf.setTexture(aTex);
                self.imgArray[_i].spriteFrame = sf;
                rh += self.imgArray[_i].node.height;
                cc.log("height is $$$ ", self.imgArray[_i].node.height);
                //支持多张图排版（2017-03-27 pm：520）
                if (_i > 0) {

                    var index = _i - 1;
                    var ht = self.imgArray[index].node.height;
                    self.imgArray[_i].node.y = self.imgArray[index].node.y - ht + 1;
                    // cc.log("height is $$$ ", ht);
                }
            }

            // if(len == 2){
            //     let ht = self.imgArray[0].node.height;
            //     self.imgArray[1].node.y = -ht;
            // }

            self.content.height = rh;
            spt.hideWaitLayer();
            self.initHelp();
        });
    },

    initHelp: function initHelp() {
        if (!this.lock) {
            console.log("initHelp");
            this.netData.helpShowFlag = true;
            this.lock = true;
            this.scrollView.getComponent(cc.ScrollView).scrollToOffset(cc.p(0, 0), 0.1);
            var callback = cc.callFunc(this.selectShowCallBack, this);
            this.node.runAction(cc.sequence(cc.moveTo(0.3, cc.p(0, this.oriY)), callback));
        }
    },

    selectShowCallBack: function selectShowCallBack() {
        this.uiBlack.active = true;
        this.lock = false;
    }
});

cc._RFpop();
},{"NetData":"NetData","game":"game"}],"Init":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9e257NxGEhC4Z+E/o15ic/D', 'Init');
// Script/Init.js

"use strict";

var DataOper = require("DataOper");
var NetData = require("NetData");

cc.Class({
    extends: cc.Component,

    /*ctor: function() {
        
    },*/

    init: function init() {
        var self = this;
        if (!CC_JSB && window.aliLotteryCasinoSDK) {
            document.addEventListener('casino:init', function (e) {

                /************************20170509在1.4.2修改获取gameToken****************************/

                var dataOper = DataOper.DataOper.getInst();
                dataOper.gameToken = e.data.accessToken;

                if (dataOper.gameToken === null) {
                    dataOper.gameToken = "26a09ca052d4c7dcde13449ba1b735df-11-1151-1051";
                    var tok = dataOper.GetQueryString("tok");

                    if (tok) {
                        dataOper.headerToken = tok;
                        console.log("tok=" + dataOper.headerToken);
                    } else {
                        dataOper.headerToken = "0";
                    }
                    //testsssssss
                    /*var myDate = new Date();
                    this.headerToken = myDate.getTime();*/
                }

                console.log("this.gameToken = " + dataOper.gameToken);
                console.log("this.headerToken = " + dataOper.headerToken);

                /************************20170509在1.4.2修改获取gameToken ****************************/

                self.fetch(function (isError) {
                    console.log(isError);
                    if (!isError) {
                        // 合并资源
                        window.aliLotteryCasinoSDK.mergeResources();
                        // 显示 loading
                        window.aliLotteryCasinoSDK.initLoading();
                        // 运行游戏
                        window.aliLotteryCasinoSDK.runGame();
                    } else {
                        window.aliLotteryCasinoSDK.showError();
                    }
                });
            }, false);
        } else {
            self.fetch();
        }
    },

    fetch: function fetch(callback) {
        console.log("VersionN:201705251200");
        cc.log("fetch");
        this.initData = {};
        var self = this;
        var dataOper = DataOper.DataOper.getInst();
        dataOper.getInit(null, function (cmd, res, msg, self) {
            // 判断是否成功并存储初始化
            var isError = false;

            //每日****游戏暂停运营（客户端处理）
            if (res == 100007) {
                isError = false;
            } else if (res != 0) {
                isError = true;
            } else {
                // if(NetData.NetData.getInst().status == 1){
                //     var te = new Date();
                //     self.timeStamp = te.getTime();
                //     cc.log("timeStamp is ", self.timeStamp);
                // } 

                var te = new Date();
                self.timeStamp = te.getTime();
                cc.log("timeStamp is ", self.timeStamp);
            }

            cc.log('fetch init data');
            cc.log(cmd, res, msg);
            self.initData.cmd = cmd;
            self.initData.res = res;
            self.initData.msg = msg;
            callback && callback(isError);
        }, this);
    }
});

cc._RFpop();
},{"DataOper":"DataOper","NetData":"NetData"}],"NetData":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2c0127/qANHkKFLguhv7AkS', 'NetData');
// Script/network/NetData.js

"use strict";

var NetData = cc.Class({
    statics: {
        g_Inst: null,
        s_index: 0,

        getInst: function getInst() {

            if (NetData.g_Inst === null) {
                NetData.g_Inst = new NetData();
                NetData.g_Inst.init();
            }
            return NetData.g_Inst;
        },

        destoryInst: function destoryInst() {

            if (NetData.g_Inst !== null) {
                NetData.g_Inst = null;
            }
        }
    },

    properties: {
        //请求参数
        reqBetList: [], //投注数据


        //响应
        timeFlag: 1, //投注阶段 1-第一阶段  2-第二阶段
        session: null,
        periodId: 1, //期次
        receiveTime: 0, //接收时间差
        secs: 0, //彩期剩余秒数
        betThreshold: 3,
        ticketNo: "", //订单号
        betLimit: 0, //投注限额
        totalBetLimit: 0, //总投注限额

        tableArray: [], //同桌人
        initData: null, //初始化data
        rewardData: null, //结算data
        secondData: null, //第二阶段数据data
        historyList: [], //历史走势
        orderList: [], //订单data

        //sdk        
        initFlag: 0 //提前初始化 0:没好  1:好了 2.停售
    },

    init: function init() {},

    clear: function clear() {}
});

module.exports = {
    NetData: NetData
};

cc._RFpop();
},{}],"Notouch":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b71281epI1FgLCfftSwge5e', 'Notouch');
// Script/Tools/Notouch.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {
            //不再派发事件
            event.stopPropagation();

            if (this.obj != undefined) {
                this.fun(this.obj);
                this.obj = undefined;
                this.fun = undefined;
            }
        }, this);
    },

    init: function init(obj, fun) {
        this.obj = obj;
        this.fun = fun;
    }

});

cc._RFpop();
},{}],"Power":[function(require,module,exports){
"use strict";
cc._RFpush(module, '21c82a03dJILKwxwhzMrsbH', 'Power');
// Script/Power.js

"use strict";

var NetData = require("NetData");

cc.Class({
    extends: cc.Component,

    properties: {

        pukeHighLightNodeArray: {
            default: [],
            type: [cc.Node]
        },

        betHighLightLayer: cc.Node,

        selfChipNode: {
            default: [],
            type: [cc.Node]
        },

        othersPositionNode: cc.Node,

        pokersNode: {
            default: [],
            type: [cc.Node]
        },

        noPokersNode: {
            default: [],
            type: [cc.Node]
        },

        historysListNode: {
            default: [],
            type: [cc.Node]
        },

        oddsLabel: cc.Node,

        pokerNameNode: cc.Node,

        pokerNoTouchLayer: cc.Node,

        options: "", //选项说明
        //势力
        powerFlag: true, //是否势力
        powerId: 0, //势力id
        pockers: [], //牌型
        historys: [], //胜负走势

        //投注项
        betFlag: true, //是否投注项
        betId: 0, //投注项id
        odds1: 1, //一阶段赔率
        odds2: 1, //二阶段赔率
        oddType: 0, //赔率变化类型  0-降低  1-上升  2-不变
        betStatus: 1, //是否可投注, 1-可投 0-不可投
        betNumTotal1: 0, //第一阶段总投注额
        betNumTotal2: 0, //第二阶段投注总额
        betNum: 0, //单次投注额，用于记录投注批次，失败的要退回来
        betList: [], //最后一次投注列表，用于投注，把所有投注项的这个数组收集起来就是真正的投注列表
        chipColor: 0, //筹码颜色  0-  1-  2-  3-
        ligthFlag: false, //投注项是否高亮

        //结算状态
        win: -1, //-1: 未开奖 1:胜利，0:负，2:平
        type: -1, //-1: 未开奖 0:散牌，1:散牌，2:对子，3：顺子，4:同花，5:同花顺，6:豹子
        pokerLight: [], //扑克高亮 空为全不亮， [0, 1, 2]全亮， [0, 2]亮两个

        //飞筹码
        chipPositions: [], //楼下5个筹码的相对位置
        playerPositions: [], //玩家头像相对位置，包括自己的（自己的筹码飞回）
        currentChipIndex: 0 },

    // use this for initialization
    onLoad: function onLoad() {
        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {}, this);

        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            cc.log("TOUCH_END!!!");
            if (this.betFlag && this.betStatus) {
                //投注操作，回调到game去判断登录状态、余额等
                var onFunction = cc.find('Canvas').getComponent('game');
                onFunction.powerBet(this.addselfChip, this);
            }
        }, this);
    },

    /**
     * 重置info，下一期开始时调用
     */
    resetInfo: function resetInfo() {
        this.pockers = [];
        this.oddType = 2;
        this.betStatus = 1;
        this.betNumTotal1 = 0;
        this.betNumTotal2 = 0;
        this.betNum = 0;
        this.betList = [];
        this.win = -1;
        this.types = -1;
        this.pokerLight = [];
        this.ligthFlag = false;
    },

    /**
     * 更新选项info
     * @param status 100-初始化   101-投注  102-清空投注  103-结算  104-获取二阶段数据
     */
    updataInfo: function updataInfo(status) {
        var netData = NetData.NetData.getInst();

        if (status == 100) {
            var initData = netData.initData;
            if (this.powerFlag) {
                if (initData.pockerList) {
                    for (var i = 0; i < initData.pockerList.length; ++i) {
                        if (this.powerId == initData.pockerList[i].powerId) {
                            cc.log("this.powerId ", this.powerId);
                            if (initData.pockerList[i].pockers) {
                                this.pockers = initData.pockerList[i].pockers;
                                cc.log("this.pockers", this.pockers);
                            }

                            this.historys = initData.pockerList[i].historys;
                            break;
                        }
                    }
                }
            }

            if (this.betFlag) {
                for (var _i = 0; _i < initData.oddsList.length; ++_i) {
                    if (this.betId == initData.oddsList[_i].id) {
                        cc.log("odds2 ", initData.oddsList[_i].odds2);
                        this.options = initData.oddsList[_i].option;
                        this.odds1 = initData.oddsList[_i].odds1;
                        this.odds2 = initData.oddsList[_i].odds2;
                        this.betStatus = initData.oddsList[_i].status;
                        break;
                    }
                }

                //投注额,用于恢复
                if (initData.bets) {
                    for (var _i2 = 0; _i2 < initData.bets.length; ++_i2) {
                        if (initData.bets[_i2].id == this.betId) {
                            if (initData.bets[_i2].timeFlag == 1) {
                                this.betNumTotal1 = initData.bets[_i2].totalBet;
                            } else {
                                this.betNumTotal2 = initData.bets[_i2].totalBet;
                            }
                        }
                    }
                }
            }
        } else if (status == 101) {} else if (status == 102) {
            if (netData.timeFlag == 1) {
                this.betNumTotal1 = 0;
            } else {
                this.betNumTotal2 = 0;
            }

            // betList = [];
        } else if (status == 103) {
            var rewardData = netData.rewardData;
            if (this.powerFlag) {
                var lottery = rewardData.lottery;
                //var idstring = "power"+ this.powerId;

                // var pockers = lottery.cache.idstring.pockers;
                //this.win = lottery.cache.idstring.win;
                //this.types = lottery.cache.idstring.types;
                //this.historys.pop();
                // this.historys.unshift(this.win);
                //this.pockers.push(pockers);


                for (var _i3 = 0; _i3 < lottery.cache.length; ++_i3) {
                    if (lottery.cache[_i3].powerId == this.powerId) {
                        this.win = lottery.cache[_i3].win;
                        this.historys.pop();
                        this.historys.unshift(this.win);

                        this.type = lottery.cache[_i3].type;
                        this.pockers.push(lottery.cache[_i3].pocker);
                        cc.log("103 pockers length is ", this.pockers.length);
                        //牌型高亮
                        this.pokerLight = [];
                        if (this.types === 0 || this.types == 1) {
                            //散牌，都不亮
                        } else if (this.types == 2) {
                            //对子
                            if (this.pockers[0].val == this.pockers[1].val) {
                                this.pokerLight = [0, 1];
                            } else if (this.pockers[0].val == this.pockers[2].val) {
                                this.pokerLight = [0, 2];
                            } else if (this.pockers[1].val == this.pockers[2].val) {
                                this.pokerLight = [1, 2];
                            }

                            /*
                            //对子投注项高亮
                            if(this.betId == 5){
                                this.ligthFlag = true;
                            }
                            */
                        } else if (this.types == 6) {
                            this.pokerLight = [0, 1, 2];
                            /*
                            //三同号投注项高亮
                            if(this.betId == 6){
                                this.ligthFlag = true;
                            }
                            */
                        } else {
                            this.pokerLight = [0, 1, 2];
                            /*
                            //其他牌型投注项高亮
                            if(this.betId == 7){
                                this.ligthFlag = true;
                            }
                            */
                        }
                        break;
                    }
                }
            }

            if (this.betFlag) {
                // cc.log("odds2 ", rewardData.oddsList[0].odds2);

                for (var _i4 = 0; _i4 < rewardData.oddsList.length; ++_i4) {

                    if (this.betId == rewardData.oddsList[_i4].id) {
                        cc.log("odds2 ", rewardData.oddsList[_i4].odds2);
                        this.options = rewardData.oddsList[_i4].option;
                        this.odds1 = rewardData.oddsList[_i4].odds1;
                        this.odds2 = rewardData.oddsList[_i4].odds2;
                        this.betStatus = rewardData.oddsList[_i4].status;
                        break;
                    }
                }
            }
        } else if (status == 104) {
            var secondData = netData.secondData;
            if (this.powerFlag) {
                for (var _i5 = 0; _i5 < secondData.pockerList.length; ++_i5) {
                    if (this.powerId == secondData.pockerList[_i5].powerId) {
                        this.pockers = secondData.pockerList[_i5].pockers;
                        break;
                    }
                }
            }

            if (this.betFlag) {
                for (var _i6 = 0; _i6 < secondData.oddsList.length; ++_i6) {
                    if (this.betId == secondData.oddsList[_i6].id) {
                        this.options = secondData.oddsList[_i6].option;
                        //这里判断一下赔率是变大变小
                        this.odds1 = secondData.oddsList[_i6].odds1;
                        this.odds2 = secondData.oddsList[_i6].odds2;
                        if (this.odds2 > this.odds1) {
                            this.oddType = 1;
                        } else if (this.odds2 < this.odds1) {
                            this.oddType = 0;
                        } else {
                            this.oddType = 2;
                        }

                        this.betStatus = secondData.oddsList[_i6].status;
                        break;
                    }
                }
            }
        }
    },

    //更新UI
    updataUI: function updataUI(status) {
        if (this.powerFlag) {
            for (var j = 0; j < this.noPokersNode.length; j++) {
                this.noPokersNode[j].active = true;
            }

            var netData = NetData.NetData.getInst();

            for (var i = 0; i < this.pockers.length; i++) {
                this.noPokersNode[i].active = false;
                var pokerNum = this.pokersNode[i].getChildByName("num").getComponent(cc.Label);
                var num = "";
                if (this.pockers[i].val == 1) {
                    num = "A";
                } else if (this.pockers[i].val == 11) {
                    num = "J";
                } else if (this.pockers[i].val == 12) {
                    num = "Q";
                } else if (this.pockers[i].val == 13) {
                    num = "K";
                } else {
                    num = this.pockers[i].val;
                }
                cc.log("pocker num is ", num);
                pokerNum.string = num;

                var pokerType = this.pokersNode[i].getChildByName("type").getComponent(cc.Label);
                var color = "";
                switch (this.pockers[i].color) {
                    case 1:
                        {
                            color = "心形";
                        }
                        break;
                    case 2:
                        {
                            color = "菱形";
                        }
                        break;
                    case 3:
                        {
                            color = "桃形";
                        }
                        break;
                    case 4:
                        {
                            color = "梅花形";
                        }
                        break;
                }
                pokerType.string = color;
                cc.log("pocker color is ", color);
            }
        }

        for (var i = 0; i < this.pokerLight.length; i++) {
            var index = this.pokerLight[i];
            this.pukeHighLightNodeArray[index].active = true;
        }

        if (this.betFlag) {
            var netData = NetData.NetData.getInst();
            if (netData.timeFlag == 1) {
                this.oddsLabel.getComponent(cc.Label).string = this.odds1 + "倍";
                this.oddsLabel.color = new cc.Color(255, 255, 255);
            } else {
                this.oddsLabel.getComponent(cc.Label).string = this.odds2 + "倍";
                if (this.oddType == 0) {
                    this.oddsLabel.color = new cc.Color(255, 0, 0);
                } else if (this.oddType == 1) {
                    this.oddsLabel.color = new cc.Color(45, 67, 100);
                } else {
                    this.oddsLabel.color = new cc.Color(255, 255, 255);
                }
            }
        }

        if (this.powerFlag && this.powerId != 1) {
            for (var i = 0; i < this.historysListNode.length; i++) {
                var historyIconNode = this.historysListNode[i];
                if (this.historys[i] == 1) //胜
                    {
                        historyIconNode.color = new cc.Color(255, 0, 0);
                    } else if (this.historys[i] == 0) //负
                    {
                        historyIconNode.Color = new cc.Color(45, 67, 100);
                    } else //平
                    {
                        historyIconNode.Color = new cc.Color(255, 255, 255);
                    }
            }
        }

        if (this.betFlag && !this.powerFlag) {

            if (this.betStatus == 1) {
                this.pokerNoTouchLayer.active = false;
            } else {
                this.pokerNoTouchLayer.active = true;
            }

            if (this.ligthFlag == true) //中奖结果高亮
                {
                    this.betHighLightLayer.active = true;
                } else {
                this.betHighLightLayer.active = false;
            }
        }
    },

    //飞结果，盖戳
    putStampOnAction: function putStampOnAction() {
        cc.log("flyStamp!!!");
        var netData = NetData.NetData.getInst();
        var rewardData = netData.rewardData;
        var convertNode = cc.find("Canvas/convertNode");
        var convertNodeJS = convertNode.getComponent("convertNode");
        convertNodeJS.flyRewardNode(rewardData.lottery.win, this.powerId);

        //10s收回
        this.scheduleOnce(this.getback, 1.3);
    },

    getback: function getback() {
        var gameJS = cc.find("Canvas").getComponent("game");
        gameJS.rewardFlyFinishedCallback();
    },

    /**
     * 自己投注飞筹码
     * @param chipIndex 楼下筹码的index
     */
    addselfChip: function addselfChip(chipIndex, self) {
        self.currentChipIndex = chipIndex;
        var netData = NetData.NetData.getInst();
        var bet = netData.initData.betList[chipIndex];

        //投注总额变化
        if (netData.timeFlag == 1) {
            self.betNumTotal1 += bet;
        } else {
            self.betNumTotal2 += bet;
        }

        //检查是否已经存在该类型筹码
        var exitFlag = false;
        for (var i = 0; i < self.betList.length; ++i) {
            if (self.betList[i].bet == bet) {
                self.betList[i].num++;
                exitFlag = true;
                break;
            }
        }

        if (!exitFlag) {
            var obj = new Object();
            obj.id = self.betId;
            obj.bet = bet;
            obj.num = 1;
            if (netData.timeFlag == 1) {
                obj.odds = self.odds1;
            } else {
                obj.odds = self.odds2;
            }

            self.betList.push(obj);
        }

        //跑动画，目标位置是个固定值，一阶段和二阶段分别固定一个筹码位置
        //跑完动画后，更新投注额的label
        if (self.betFlag) {
            var convertNode = cc.find("Canvas/convertNode");
            var convertNodeJS = convertNode.getComponent("convertNode");
            convertNodeJS.chipFlyAction(bet, chipIndex, self.betId - 1, true, self);
        }
    },

    flyChipNodeFinished: function flyChipNodeFinished(sender, flag) {
        var flag = flag;
        var self = sender;
        var netData = NetData.NetData.getInst();
        if (flag) {
            if (netData.timeFlag == 1) {
                self.selfChipNode[0].active = flag;
                self.selfChipNode[0].zIndex = 500;
                var label = self.selfChipNode[0].getChildByName("Label").getComponent(cc.Label);
                label.string = self.betNumTotal1;
            } else {
                self.selfChipNode[1].active = flag;
                self.selfChipNode[1].zIndex = 500;
                var label = self.selfChipNode[1].getChildByName("Label").getComponent(cc.Label);
                label.string = self.betNumTotal2;
            }
        }
    },

    /**
     * 自己筹码飞回
     * @param chipNum  飞回的筹码数额
     */
    reduceSelfChip: function reduceSelfChip() {
        var netData = NetData.NetData.getInst();
        if (netData.timeFlag == 1) {
            this.betNumTotal1 -= this.betNum;
        } else {
            this.betNumTotal2 -= this.betNum;
        }

        var ser = null;
        var totalMoney = "";
        if (netData.timeFlag == 1) {
            ser = this.selfChipNode[0];
            totalMoney = this.betNumTotal1;
        } else {
            ser = this.selfChipNode[1];
            totalMoney = this.betNumTotal2;
        }
        if (ser.active) {
            var flag = false;
            if (totalMoney > 0) {
                flag = true;
            }
            //先隐藏
            ser.active = flag;
            ser.zIndex = 500;
            var label = ser.getChildByName("Label").getComponent(cc.Label);
            label.string = totalMoney;

            //再找筹码飞
            var convertNode = cc.find("Canvas/convertNode");
            var convertNodeJS = convertNode.getComponent("convertNode");
            var flag = false;
            if (totalMoney > 0) {
                flag = true;
            }
            convertNodeJS.chipFlyAction(this.betNum, this.currentChipIndex, this.betId - 1, false, this);
        }
    },

    /**
     *  动作飞回来
     */
    flyBack: function flyBack() {
        this.clearSelfChip();
    },

    /**
     * 清空筹码
     */
    clearSelfChip: function clearSelfChip() {
        var netData = NetData.NetData.getInst();
        if (netData.timeFlag == 1) {
            this.betNum = this.betNumTotal1;
        } else {
            this.betNum = this.betNumTotal2;
        }
        this.reduceSelfChip();
    },

    /**
     * 其他玩家飞筹码
     * @param seatIndex 其他玩家座位号
     */
    addOtherChip: function addOtherChip(seatIndex) {}

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{"NetData":"NetData"}],"WaitScript":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f819ds8PopLZZ+dyHaJMjdF', 'WaitScript');
// Script/Tools/WaitScript.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this.angle = 0;
    },

    // called every frame, uncomment this function to activate update callback
    update: function update(dt) {
        this.angle += dt * 360;

        if (this.angle > 360) {
            this.angle -= 360;
        }

        this.node.rotation = this.angle;
    }
});

cc._RFpop();
},{}],"aes":[function(require,module,exports){
"use strict";
cc._RFpush(module, '02d8bZs2vRKGJgbl2iiyPN7', 'aes');
// Script/network/aes/aes.js

"use strict";

var CryptoJS = require("./core");require("../aes/md5");require("../aes/enc-base64");require("../aes/evpkdf");require("../aes/cipher-core");require("../aes/mode-ecb");(function () {
  var C = CryptoJS;var C_lib = C.lib;var BlockCipher = C_lib.BlockCipher;var C_algo = C.algo;var SBOX = [];var INV_SBOX = [];var SUB_MIX_0 = [];var SUB_MIX_1 = [];var SUB_MIX_2 = [];var SUB_MIX_3 = [];var INV_SUB_MIX_0 = [];var INV_SUB_MIX_1 = [];var INV_SUB_MIX_2 = [];var INV_SUB_MIX_3 = [];(function () {
    var d = [];for (var i = 0; i < 256; i++) {
      if (i < 128) {
        d[i] = i << 1;
      } else {
        d[i] = i << 1 ^ 283;
      }
    }var x = 0;var xi = 0;for (var i = 0; i < 256; i++) {
      var sx = xi ^ xi << 1 ^ xi << 2 ^ xi << 3 ^ xi << 4;sx = sx >>> 8 ^ sx & 255 ^ 99;SBOX[x] = sx;INV_SBOX[sx] = x;var x2 = d[x];var x4 = d[x2];var x8 = d[x4];var t = d[sx] * 257 ^ sx * 16843008;SUB_MIX_0[x] = t << 24 | t >>> 8;SUB_MIX_1[x] = t << 16 | t >>> 16;SUB_MIX_2[x] = t << 8 | t >>> 24;SUB_MIX_3[x] = t;var t = x8 * 16843009 ^ x4 * 65537 ^ x2 * 257 ^ x * 16843008;INV_SUB_MIX_0[sx] = t << 24 | t >>> 8;INV_SUB_MIX_1[sx] = t << 16 | t >>> 16;INV_SUB_MIX_2[sx] = t << 8 | t >>> 24;INV_SUB_MIX_3[sx] = t;if (!x) {
        x = xi = 1;
      } else {
        x = x2 ^ d[d[d[x8 ^ x2]]];xi ^= d[d[xi]];
      }
    }
  })();var RCON = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];var AES = C_algo.AES = BlockCipher.extend({ _doReset: function _doReset() {
      var key = this._key;var keyWords = key.words;var keySize = key.sigBytes / 4;var nRounds = this._nRounds = keySize + 6;var ksRows = (nRounds + 1) * 4;var keySchedule = this._keySchedule = [];for (var ksRow = 0; ksRow < ksRows; ksRow++) {
        if (ksRow < keySize) {
          keySchedule[ksRow] = keyWords[ksRow];
        } else {
          var t = keySchedule[ksRow - 1];if (!(ksRow % keySize)) {
            t = t << 8 | t >>> 24;t = SBOX[t >>> 24] << 24 | SBOX[t >>> 16 & 255] << 16 | SBOX[t >>> 8 & 255] << 8 | SBOX[t & 255];t ^= RCON[ksRow / keySize | 0] << 24;
          } else {
            if (keySize > 6 && ksRow % keySize == 4) {
              t = SBOX[t >>> 24] << 24 | SBOX[t >>> 16 & 255] << 16 | SBOX[t >>> 8 & 255] << 8 | SBOX[t & 255];
            }
          }keySchedule[ksRow] = keySchedule[ksRow - keySize] ^ t;
        }
      }var invKeySchedule = this._invKeySchedule = [];for (var invKsRow = 0; invKsRow < ksRows; invKsRow++) {
        var ksRow = ksRows - invKsRow;if (invKsRow % 4) {
          var t = keySchedule[ksRow];
        } else {
          var t = keySchedule[ksRow - 4];
        }if (invKsRow < 4 || ksRow <= 4) {
          invKeySchedule[invKsRow] = t;
        } else {
          invKeySchedule[invKsRow] = INV_SUB_MIX_0[SBOX[t >>> 24]] ^ INV_SUB_MIX_1[SBOX[t >>> 16 & 255]] ^ INV_SUB_MIX_2[SBOX[t >>> 8 & 255]] ^ INV_SUB_MIX_3[SBOX[t & 255]];
        }
      }
    }, encryptBlock: function encryptBlock(M, offset) {
      this._doCryptBlock(M, offset, this._keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX);
    }, decryptBlock: function decryptBlock(M, offset) {
      var t = M[offset + 1];M[offset + 1] = M[offset + 3];M[offset + 3] = t;this._doCryptBlock(M, offset, this._invKeySchedule, INV_SUB_MIX_0, INV_SUB_MIX_1, INV_SUB_MIX_2, INV_SUB_MIX_3, INV_SBOX);var t = M[offset + 1];M[offset + 1] = M[offset + 3];M[offset + 3] = t;
    }, _doCryptBlock: function _doCryptBlock(M, offset, keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX) {
      var nRounds = this._nRounds;var s0 = M[offset] ^ keySchedule[0];var s1 = M[offset + 1] ^ keySchedule[1];var s2 = M[offset + 2] ^ keySchedule[2];var s3 = M[offset + 3] ^ keySchedule[3];var ksRow = 4;for (var round = 1; round < nRounds; round++) {
        var t0 = SUB_MIX_0[s0 >>> 24] ^ SUB_MIX_1[s1 >>> 16 & 255] ^ SUB_MIX_2[s2 >>> 8 & 255] ^ SUB_MIX_3[s3 & 255] ^ keySchedule[ksRow++];var t1 = SUB_MIX_0[s1 >>> 24] ^ SUB_MIX_1[s2 >>> 16 & 255] ^ SUB_MIX_2[s3 >>> 8 & 255] ^ SUB_MIX_3[s0 & 255] ^ keySchedule[ksRow++];var t2 = SUB_MIX_0[s2 >>> 24] ^ SUB_MIX_1[s3 >>> 16 & 255] ^ SUB_MIX_2[s0 >>> 8 & 255] ^ SUB_MIX_3[s1 & 255] ^ keySchedule[ksRow++];var t3 = SUB_MIX_0[s3 >>> 24] ^ SUB_MIX_1[s0 >>> 16 & 255] ^ SUB_MIX_2[s1 >>> 8 & 255] ^ SUB_MIX_3[s2 & 255] ^ keySchedule[ksRow++];s0 = t0;s1 = t1;s2 = t2;s3 = t3;
      }var t0 = (SBOX[s0 >>> 24] << 24 | SBOX[s1 >>> 16 & 255] << 16 | SBOX[s2 >>> 8 & 255] << 8 | SBOX[s3 & 255]) ^ keySchedule[ksRow++];var t1 = (SBOX[s1 >>> 24] << 24 | SBOX[s2 >>> 16 & 255] << 16 | SBOX[s3 >>> 8 & 255] << 8 | SBOX[s0 & 255]) ^ keySchedule[ksRow++];var t2 = (SBOX[s2 >>> 24] << 24 | SBOX[s3 >>> 16 & 255] << 16 | SBOX[s0 >>> 8 & 255] << 8 | SBOX[s1 & 255]) ^ keySchedule[ksRow++];var t3 = (SBOX[s3 >>> 24] << 24 | SBOX[s0 >>> 16 & 255] << 16 | SBOX[s1 >>> 8 & 255] << 8 | SBOX[s2 & 255]) ^ keySchedule[ksRow++];M[offset] = t0;M[offset + 1] = t1;M[offset + 2] = t2;M[offset + 3] = t3;
    }, keySize: 256 / 32 });C.AES = BlockCipher._createHelper(AES);
})();

cc._RFpop();
},{"../aes/cipher-core":"cipher-core","../aes/enc-base64":"enc-base64","../aes/evpkdf":"evpkdf","../aes/md5":"md5","../aes/mode-ecb":"mode-ecb","./core":"core"}],"cipher-core":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f7009oc2wJMlbzy3sUEYXQR', 'cipher-core');
// Script/network/aes/cipher-core.js

"use strict";

var CryptoJS = require("./core");CryptoJS.lib.Cipher || function (undefined) {
    var C = CryptoJS;var C_lib = C.lib;var Base = C_lib.Base;var WordArray = C_lib.WordArray;var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm;var C_enc = C.enc;var Utf8 = C_enc.Utf8;var Base64 = C_enc.Base64;var C_algo = C.algo;var EvpKDF = C_algo.EvpKDF;var Cipher = C_lib.Cipher = BufferedBlockAlgorithm.extend({ cfg: Base.extend(), createEncryptor: function createEncryptor(key, cfg) {
            return this.create(this._ENC_XFORM_MODE, key, cfg);
        }, createDecryptor: function createDecryptor(key, cfg) {
            return this.create(this._DEC_XFORM_MODE, key, cfg);
        }, init: function init(xformMode, key, cfg) {
            this.cfg = this.cfg.extend(cfg);this._xformMode = xformMode;this._key = key;this.reset();
        }, reset: function reset() {
            BufferedBlockAlgorithm.reset.call(this);this._doReset();
        }, process: function process(dataUpdate) {
            this._append(dataUpdate);return this._process();
        }, finalize: function finalize(dataUpdate) {
            if (dataUpdate) {
                this._append(dataUpdate);
            }var finalProcessedData = this._doFinalize();return finalProcessedData;
        }, keySize: 128 / 32, ivSize: 128 / 32, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function () {
            function selectCipherStrategy(key) {
                if (typeof key == "string") {
                    return PasswordBasedCipher;
                } else {
                    return SerializableCipher;
                }
            }return function (cipher) {
                return { encrypt: function encrypt(message, key, cfg) {
                        return selectCipherStrategy(key).encrypt(cipher, message, key, cfg);
                    }, decrypt: function decrypt(ciphertext, key, cfg) {
                        return selectCipherStrategy(key).decrypt(cipher, ciphertext, key, cfg);
                    } };
            };
        }() });var StreamCipher = C_lib.StreamCipher = Cipher.extend({ _doFinalize: function _doFinalize() {
            var finalProcessedBlocks = this._process(!!"flush");return finalProcessedBlocks;
        }, blockSize: 1 });var C_mode = C.mode = {};var BlockCipherMode = C_lib.BlockCipherMode = Base.extend({ createEncryptor: function createEncryptor(cipher, iv) {
            return this.Encryptor.create(cipher, iv);
        }, createDecryptor: function createDecryptor(cipher, iv) {
            return this.Decryptor.create(cipher, iv);
        }, init: function init(cipher, iv) {
            this._cipher = cipher;this._iv = iv;
        } });var CBC = C_mode.CBC = function () {
        var CBC = BlockCipherMode.extend();CBC.Encryptor = CBC.extend({ processBlock: function processBlock(words, offset) {
                var cipher = this._cipher;var blockSize = cipher.blockSize;xorBlock.call(this, words, offset, blockSize);cipher.encryptBlock(words, offset);this._prevBlock = words.slice(offset, offset + blockSize);
            } });CBC.Decryptor = CBC.extend({ processBlock: function processBlock(words, offset) {
                var cipher = this._cipher;var blockSize = cipher.blockSize;var thisBlock = words.slice(offset, offset + blockSize);cipher.decryptBlock(words, offset);xorBlock.call(this, words, offset, blockSize);this._prevBlock = thisBlock;
            } });function xorBlock(words, offset, blockSize) {
            var iv = this._iv;if (iv) {
                var block = iv;this._iv = undefined;
            } else {
                var block = this._prevBlock;
            }for (var i = 0; i < blockSize; i++) {
                words[offset + i] ^= block[i];
            }
        }return CBC;
    }();var C_pad = C.pad = {};var Pkcs7 = C_pad.Pkcs7 = { pad: function pad(data, blockSize) {
            var blockSizeBytes = blockSize * 4;var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;var paddingWord = nPaddingBytes << 24 | nPaddingBytes << 16 | nPaddingBytes << 8 | nPaddingBytes;var paddingWords = [];for (var i = 0; i < nPaddingBytes; i += 4) {
                paddingWords.push(paddingWord);
            }var padding = WordArray.create(paddingWords, nPaddingBytes);data.concat(padding);
        }, unpad: function unpad(data) {
            var nPaddingBytes = data.words[data.sigBytes - 1 >>> 2] & 255;data.sigBytes -= nPaddingBytes;
        } };var BlockCipher = C_lib.BlockCipher = Cipher.extend({ cfg: Cipher.cfg.extend({ mode: CBC, padding: Pkcs7 }), reset: function reset() {
            Cipher.reset.call(this);var cfg = this.cfg;var iv = cfg.iv;var mode = cfg.mode;if (this._xformMode == this._ENC_XFORM_MODE) {
                var modeCreator = mode.createEncryptor;
            } else {
                var modeCreator = mode.createDecryptor;this._minBufferSize = 1;
            }this._mode = modeCreator.call(mode, this, iv && iv.words);
        }, _doProcessBlock: function _doProcessBlock(words, offset) {
            this._mode.processBlock(words, offset);
        }, _doFinalize: function _doFinalize() {
            var padding = this.cfg.padding;if (this._xformMode == this._ENC_XFORM_MODE) {
                padding.pad(this._data, this.blockSize);var finalProcessedBlocks = this._process(!!"flush");
            } else {
                var finalProcessedBlocks = this._process(!!"flush");padding.unpad(finalProcessedBlocks);
            }return finalProcessedBlocks;
        }, blockSize: 128 / 32 });var CipherParams = C_lib.CipherParams = Base.extend({ init: function init(cipherParams) {
            this.mixIn(cipherParams);
        }, toString: function toString(formatter) {
            return (formatter || this.formatter).stringify(this);
        } });var C_format = C.format = {};var OpenSSLFormatter = C_format.OpenSSL = { stringify: function stringify(cipherParams) {
            var ciphertext = cipherParams.ciphertext;var salt = cipherParams.salt;if (salt) {
                var wordArray = WordArray.create([1398893684, 1701076831]).concat(salt).concat(ciphertext);
            } else {
                var wordArray = ciphertext;
            }return wordArray.toString(Base64);
        }, parse: function parse(openSSLStr) {
            var ciphertext = Base64.parse(openSSLStr);var ciphertextWords = ciphertext.words;if (ciphertextWords[0] == 1398893684 && ciphertextWords[1] == 1701076831) {
                var salt = WordArray.create(ciphertextWords.slice(2, 4));ciphertextWords.splice(0, 4);ciphertext.sigBytes -= 16;
            }return CipherParams.create({ ciphertext: ciphertext, salt: salt });
        } };var SerializableCipher = C_lib.SerializableCipher = Base.extend({ cfg: Base.extend({ format: OpenSSLFormatter }), encrypt: function encrypt(cipher, message, key, cfg) {
            cfg = this.cfg.extend(cfg);
            var encryptor = cipher.createEncryptor(key, cfg);var ciphertext = encryptor.finalize(message);var cipherCfg = encryptor.cfg;return CipherParams.create({ ciphertext: ciphertext, key: key, iv: cipherCfg.iv, algorithm: cipher, mode: cipherCfg.mode, padding: cipherCfg.padding, blockSize: cipher.blockSize, formatter: cfg.format });
        }, decrypt: function decrypt(cipher, ciphertext, key, cfg) {
            cfg = this.cfg.extend(cfg);ciphertext = this._parse(ciphertext, cfg.format);var plaintext = cipher.createDecryptor(key, cfg).finalize(ciphertext.ciphertext);return plaintext;
        }, _parse: function _parse(ciphertext, format) {
            if (typeof ciphertext == "string") {
                return format.parse(ciphertext, this);
            } else {
                return ciphertext;
            }
        } });var C_kdf = C.kdf = {};var OpenSSLKdf = C_kdf.OpenSSL = { execute: function execute(password, keySize, ivSize, salt) {
            if (!salt) {
                salt = WordArray.random(64 / 8);
            }var key = EvpKDF.create({ keySize: keySize + ivSize }).compute(password, salt);var iv = WordArray.create(key.words.slice(keySize), ivSize * 4);key.sigBytes = keySize * 4;return CipherParams.create({ key: key, iv: iv, salt: salt });
        } };var PasswordBasedCipher = C_lib.PasswordBasedCipher = SerializableCipher.extend({ cfg: SerializableCipher.cfg.extend({ kdf: OpenSSLKdf }), encrypt: function encrypt(cipher, message, password, cfg) {
            cfg = this.cfg.extend(cfg);var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize);cfg.iv = derivedParams.iv;var ciphertext = SerializableCipher.encrypt.call(this, cipher, message, derivedParams.key, cfg);ciphertext.mixIn(derivedParams);return ciphertext;
        }, decrypt: function decrypt(cipher, ciphertext, password, cfg) {
            cfg = this.cfg.extend(cfg);ciphertext = this._parse(ciphertext, cfg.format);var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, ciphertext.salt);cfg.iv = derivedParams.iv;var plaintext = SerializableCipher.decrypt.call(this, cipher, ciphertext, derivedParams.key, cfg);return plaintext;
        } });
}();

cc._RFpop();
},{"./core":"core"}],"convertNode":[function(require,module,exports){
"use strict";
cc._RFpush(module, '52d79u8vuROVY3yrhoo8aXz', 'convertNode');
// Script/convertNode.js

"use strict";

var NetData = require("NetData");

cc.Class({
    extends: cc.Component,

    properties: {

        flyChipNode: cc.Prefab,

        homePosition: {
            default: [],
            type: [cc.Vec2]
        },

        targetLocation1: {
            default: [],
            type: [cc.Vec2]
        },

        targetLocation2: {
            default: [],
            type: [cc.Vec2]
        },

        flyChipNodeArray: {
            default: [],
            type: [cc.Node]
        },

        rewardFlyNodeArray: {
            default: [],
            type: [cc.Prefab]
        },

        rewardFlyNodeTargetLocation: {
            default: [],
            type: [cc.Vec2]
        },

        rewardFlyNodeHomePosition: cc.Vec2,
        rewardFlyNodeInistantArray: [],
        markFlyRewardCnt: 0
    },

    // use this for initialization
    onLoad: function onLoad() {},

    chipFlyAction: function chipFlyAction(chipNum, chipIndex, betId, flag, powerTarget) {
        var netData = NetData.NetData.getInst();
        var homep = this.homePosition[chipIndex];

        var targetP = null;
        if (netData.timeFlag == 1) {
            targetP = this.targetLocation1[betId];
        } else {
            targetP = this.targetLocation2[betId];
        }

        var flyNode = this.getFlyChipNode();
        var flyNodeJS = flyNode.getComponent("flyChipNodePre");

        flyNodeJS.setSkinWithTag(chipIndex);
        flyNodeJS.setMoney(chipNum);
        flyNodeJS.chipFlyAction(homep, targetP, flag, flyNode, powerTarget, this, this.finishedCallback);
    },

    getFlyChipNode: function getFlyChipNode() {
        var flyNode = null;
        if (this.flyChipNodeArray.length > 0) {
            flyNode = this.flyChipNodeArray.shift();
            flyNode.active = true;
            return flyNode;
        }

        flyNode = cc.instantiate(this.flyChipNode);
        this.node.addChild(flyNode);
        flyNode.active = true;
        return flyNode;
    },

    setFlyChipNode: function setFlyChipNode(flynode) {
        this.flyChipNodeArray.push(flynode);
        flynode.active = false;
    },

    finishedCallback: function finishedCallback(target, object) {
        var powerTarget = object.powerTarget;
        var flag = object.flag;
        var self = object.target;
        var flynode = object.flyNode;

        self.setFlyChipNode(flynode);
        powerTarget.flyChipNodeFinished(powerTarget, flag);

        object = null;
    },

    //index: 0负 1胜  2平
    flyRewardNode: function flyRewardNode(index, positionIndex) {
        var flyNode = null;
        if (this.rewardFlyNodeInistantArray.length) {
            flyNode = this.rewardFlyNodeInistantArray[i];
        } else {
            flyNode = cc.instantiate(this.rewardFlyNodeArray[i]);
            this.node.addChild(flyNode);
            this.rewardFlyNodeInistantArray.push(flyNode);
        }

        flyNode.active = true;
        var flyNodeJS = flyNode.getComponent("flyRewardNodePre");
        flyNodeJS.setSkinWithTag(index);
        var p1 = this.rewardFlyNodeHomePosition;
        var p2 = this.rewardFlyNodeTargetLocation[positionIndex];
        flyNodeJS.flyRewardAction(p1, p2, this.flyRewardActionFinished);
    },

    flyRewardActionFinished: function flyRewardActionFinished() {
        this.markFlyRewardCnt++;
        if (this.markFlyRewardCnt == 4) {
            for (var i = 0; i < this.rewardFlyNodeInistantArray.length; i++) {
                this.rewardFlyNodeInistantArray.active = false;
            }
        }
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{"NetData":"NetData"}],"core":[function(require,module,exports){
"use strict";
cc._RFpush(module, '572fe/2x+JCKIyUCoP5avyE', 'core');
// Script/network/aes/core.js

"use strict";

var CryptoJS = CryptoJS || function (Math, undefined) {
    var C = {};var C_lib = C.lib = {};var Base = C_lib.Base = function () {
        function F() {}return { extend: function extend(overrides) {
                F.prototype = this;var subtype = new F();if (overrides) {
                    subtype.mixIn(overrides);
                }if (!subtype.hasOwnProperty("init")) {
                    subtype.init = function () {
                        subtype.$super.init.apply(this, arguments);
                    };
                }subtype.init.prototype = subtype;subtype.$super = this;return subtype;
            }, create: function create() {
                var instance = this.extend();instance.init.apply(instance, arguments);return instance;
            }, init: function init() {}, mixIn: function mixIn(properties) {
                for (var propertyName in properties) {
                    if (properties.hasOwnProperty(propertyName)) {
                        this[propertyName] = properties[propertyName];
                    }
                }if (properties.hasOwnProperty("toString")) {
                    this.toString = properties.toString;
                }
            }, clone: function clone() {
                return this.init.prototype.extend(this);
            } };
    }();var WordArray = C_lib.WordArray = Base.extend({ init: function init(words, sigBytes) {
            words = this.words = words || [];if (sigBytes != undefined) {
                this.sigBytes = sigBytes;
            } else {
                this.sigBytes = words.length * 4;
            }
        }, toString: function toString(encoder) {
            return (encoder || Hex).stringify(this);
        }, concat: function concat(wordArray) {
            var thisWords = this.words;var thatWords = wordArray.words;var thisSigBytes = this.sigBytes;var thatSigBytes = wordArray.sigBytes;this.clamp();if (thisSigBytes % 4) {
                for (var i = 0; i < thatSigBytes; i++) {
                    var thatByte = thatWords[i >>> 2] >>> 24 - i % 4 * 8 & 255;thisWords[thisSigBytes + i >>> 2] |= thatByte << 24 - (thisSigBytes + i) % 4 * 8;
                }
            } else {
                for (var i = 0; i < thatSigBytes; i += 4) {
                    thisWords[thisSigBytes + i >>> 2] = thatWords[i >>> 2];
                }
            }this.sigBytes += thatSigBytes;return this;
        }, clamp: function clamp() {
            var words = this.words;var sigBytes = this.sigBytes;words[sigBytes >>> 2] &= 4294967295 << 32 - sigBytes % 4 * 8;words.length = Math.ceil(sigBytes / 4);
        }, clone: function clone() {
            var clone = Base.clone.call(this);clone.words = this.words.slice(0);return clone;
        }, random: function random(nBytes) {
            var words = [];var r = function r(m_w) {
                var m_w = m_w;var m_z = 987654321;var mask = 4294967295;return function () {
                    m_z = 36969 * (m_z & 65535) + (m_z >> 16) & mask;m_w = 18000 * (m_w & 65535) + (m_w >> 16) & mask;var result = (m_z << 16) + m_w & mask;result /= 4294967296;result += 0.5;return result * (Math.random() > 0.5 ? 1 : -1);
                };
            };for (var i = 0, rcache; i < nBytes; i += 4) {
                var _r = r((rcache || Math.random()) * 4294967296);rcache = _r() * 987654071;words.push(_r() * 4294967296 | 0);
            }return new WordArray.init(words, nBytes);
        } });var C_enc = C.enc = {};var Hex = C_enc.Hex = { stringify: function stringify(wordArray) {
            var words = wordArray.words;var sigBytes = wordArray.sigBytes;var hexChars = [];for (var i = 0; i < sigBytes; i++) {
                var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;hexChars.push((bite >>> 4).toString(16));hexChars.push((bite & 15).toString(16));
            }return hexChars.join("");
        }, parse: function parse(hexStr) {
            var hexStrLength = hexStr.length;var words = [];for (var i = 0; i < hexStrLength; i += 2) {
                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << 24 - i % 8 * 4;
            }return new WordArray.init(words, hexStrLength / 2);
        } };var Latin1 = C_enc.Latin1 = { stringify: function stringify(wordArray) {
            var words = wordArray.words;var sigBytes = wordArray.sigBytes;var latin1Chars = [];for (var i = 0; i < sigBytes; i++) {
                var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;latin1Chars.push(String.fromCharCode(bite));
            }return latin1Chars.join("");
        }, parse: function parse(latin1Str) {
            var latin1StrLength = latin1Str.length;var words = [];for (var i = 0; i < latin1StrLength; i++) {
                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 255) << 24 - i % 4 * 8;
            }return new WordArray.init(words, latin1StrLength);
        } };var Utf8 = C_enc.Utf8 = { stringify: function stringify(wordArray) {
            try {
                return decodeURIComponent(escape(Latin1.stringify(wordArray)));
            } catch (e) {
                throw new Error("Malformed UTF-8 data");
            }
        }, parse: function parse(utf8Str) {
            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));
        } };var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({ reset: function reset() {
            this._data = new WordArray.init();this._nDataBytes = 0;
        }, _append: function _append(data) {
            if (typeof data == "string") {
                data = Utf8.parse(data);
            }this._data.concat(data);this._nDataBytes += data.sigBytes;
        }, _process: function _process(doFlush) {
            var data = this._data;var dataWords = data.words;var dataSigBytes = data.sigBytes;var blockSize = this.blockSize;var blockSizeBytes = blockSize * 4;var nBlocksReady = dataSigBytes / blockSizeBytes;if (doFlush) {
                nBlocksReady = Math.ceil(nBlocksReady);
            } else {
                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);
            }var nWordsReady = nBlocksReady * blockSize;var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);if (nWordsReady) {
                for (var offset = 0; offset < nWordsReady; offset += blockSize) {
                    this._doProcessBlock(dataWords, offset);
                }var processedWords = dataWords.splice(0, nWordsReady);data.sigBytes -= nBytesReady;
            }return new WordArray.init(processedWords, nBytesReady);
        }, clone: function clone() {
            var clone = Base.clone.call(this);clone._data = this._data.clone();return clone;
        }, _minBufferSize: 0 });var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({ cfg: Base.extend(), init: function init(cfg) {
            this.cfg = this.cfg.extend(cfg);this.reset();
        }, reset: function reset() {
            BufferedBlockAlgorithm.reset.call(this);this._doReset();
        }, update: function update(messageUpdate) {
            this._append(messageUpdate);this._process();return this;
        }, finalize: function finalize(messageUpdate) {
            if (messageUpdate) {
                this._append(messageUpdate);
            }var hash = this._doFinalize();
            return hash;
        }, blockSize: 512 / 32, _createHelper: function _createHelper(hasher) {
            return function (message, cfg) {
                return new hasher.init(cfg).finalize(message);
            };
        }, _createHmacHelper: function _createHmacHelper(hasher) {
            return function (message, key) {
                return new C_algo.HMAC.init(hasher, key).finalize(message);
            };
        } });var C_algo = C.algo = {};return C;
}(Math);module.exports = CryptoJS;

cc._RFpop();
},{}],"enc-base64":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0f5e3DWxj5ADaF0mRNcqcyU', 'enc-base64');
// Script/network/aes/enc-base64.js

"use strict";

var CryptoJS = require("./core");(function () {
  var C = CryptoJS;var C_lib = C.lib;var WordArray = C_lib.WordArray;var C_enc = C.enc;var Base64 = C_enc.Base64 = { stringify: function stringify(wordArray) {
      var words = wordArray.words;var sigBytes = wordArray.sigBytes;var map = this._map;wordArray.clamp();var base64Chars = [];for (var i = 0; i < sigBytes; i += 3) {
        var byte1 = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;var byte2 = words[i + 1 >>> 2] >>> 24 - (i + 1) % 4 * 8 & 255;var byte3 = words[i + 2 >>> 2] >>> 24 - (i + 2) % 4 * 8 & 255;var triplet = byte1 << 16 | byte2 << 8 | byte3;for (var j = 0; j < 4 && i + j * 0.75 < sigBytes; j++) {
          base64Chars.push(map.charAt(triplet >>> 6 * (3 - j) & 63));
        }
      }var paddingChar = map.charAt(64);if (paddingChar) {
        while (base64Chars.length % 4) {
          base64Chars.push(paddingChar);
        }
      }return base64Chars.join("");
    }, parse: function parse(base64Str) {
      var base64StrLength = base64Str.length;var map = this._map;var paddingChar = map.charAt(64);if (paddingChar) {
        var paddingIndex = base64Str.indexOf(paddingChar);if (paddingIndex != -1) {
          base64StrLength = paddingIndex;
        }
      }var words = [];var nBytes = 0;for (var i = 0; i < base64StrLength; i++) {
        if (i % 4) {
          var bits1 = map.indexOf(base64Str.charAt(i - 1)) << i % 4 * 2;var bits2 = map.indexOf(base64Str.charAt(i)) >>> 6 - i % 4 * 2;var bitsCombined = bits1 | bits2;words[nBytes >>> 2] |= bitsCombined << 24 - nBytes % 4 * 8;nBytes++;
        }
      }return WordArray.create(words, nBytes);
    }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" };
})();

cc._RFpop();
},{"./core":"core"}],"errorDialog":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6a5cchPFopKmrHUbPd5bRLY', 'errorDialog');
// Script/Tools/errorDialog.js

'use strict';

var EbuttonTag = cc.Enum({

    eSkinFresh: 0,
    eSkinOK: 1,
    eSkinCannel: 2,
    eSkin3: 3,
    eSkin4: 4,
    eSkin5: 5,
    eSkin6: 6

});
cc.Class({
    extends: cc.Component,

    properties: {
        leftButton: cc.Node,
        rightButton: cc.Node,
        title: cc.Label,
        leftSkinArray: {
            default: [],
            type: [cc.Node]
        },
        leftTitle: cc.Label,
        rightSkinArray: {
            default: [],
            type: [cc.Node]
        },
        rightTitle: cc.Label,
        typeAction: 0

    },

    // use this for initialization
    onLoad: function onLoad() {
        this.leftButton.on(cc.Node.EventType.TOUCH_START, function (event) {
            this.leftButton.scale = 0.8;
        }, this);

        this.leftButton.on(cc.Node.EventType.TOUCH_END, function (event) {
            this.leftButton.scale = 1;
            var gameFun = cc.find('Canvas').getComponent('game');
            gameFun.errorDialogCallback(this.typeAction, 1);
        }, this);

        this.leftButton.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {
            this.leftButton.scale = 1;
        }, this);

        this.rightButton.on(cc.Node.EventType.TOUCH_START, function (event) {
            this.rightButton.scale = 0.8;
        }, this);

        this.rightButton.on(cc.Node.EventType.TOUCH_END, function (event) {
            this.rightButton.scale = 1;
            var onFunction = cc.find('Canvas').getComponent('game');
            onFunction.errorDialogCallback(this.typeAction, 2);
        }, this);

        this.rightButton.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {
            this.rightButton.scale = 1;
        }, this);
    },

    showDialog: function showDialog(title, buttonType) {
        this.typeAction = buttonType;
        this.node.active = true;
        this.resetzIndexZreo();
        this.title.string = title;

        if (buttonType === 0) //刷新
            {
                this.leftButton.x = 0;
                this.leftButton.y = 0;
                this.rightButton.active = false;
                this.leftSkinArray[0].zIndex = 20;
                this.leftIndex = 0;
                this.rightIndex = -1;
            } else if (buttonType == 1) //等等再走 不玩了
            {
                this.leftButton.x = -160;
                this.leftButton.y = -100;
                this.rightButton.active = true;
                this.leftSkinArray[1].zIndex = 20;
                this.rightSkinArray[1].zIndex = 20;
            } else if (buttonType == 2) //
            {
                this.leftButton.x = -160;
                this.leftButton.y = -100;
                this.rightButton.active = true;
                this.leftSkinArray[2].zIndex = 20;
                this.rightSkinArray[2].zIndex = 20;
            }
    },

    hideDialog: function hideDialog() {
        this.node.active = false;
    },

    resetzIndexZreo: function resetzIndexZreo() {
        for (var i = 0; i < this.leftSkinArray.length; i++) {
            this.leftSkinArray[i].zIndex = 0;
        }

        for (var j = 0; j < this.rightSkinArray.length; j++) {
            this.rightSkinArray[j].zIndex = 0;
        }
    }

});

cc._RFpop();
},{}],"evpkdf":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'aa885BKH39D3pF0VusgBsiO', 'evpkdf');
// Script/network/aes/evpkdf.js

"use strict";

var CryptoJS = require("./core");(function () {
  var C = CryptoJS;var C_lib = C.lib;var Base = C_lib.Base;var WordArray = C_lib.WordArray;var C_algo = C.algo;var MD5 = C_algo.MD5;var EvpKDF = C_algo.EvpKDF = Base.extend({ cfg: Base.extend({ keySize: 128 / 32, hasher: MD5, iterations: 1 }), init: function init(cfg) {
      this.cfg = this.cfg.extend(cfg);
    }, compute: function compute(password, salt) {
      var cfg = this.cfg;var hasher = cfg.hasher.create();var derivedKey = WordArray.create();var derivedKeyWords = derivedKey.words;var keySize = cfg.keySize;var iterations = cfg.iterations;while (derivedKeyWords.length < keySize) {
        if (block) {
          hasher.update(block);
        }var block = hasher.update(password).finalize(salt);hasher.reset();for (var i = 1; i < iterations; i++) {
          block = hasher.finalize(block);hasher.reset();
        }derivedKey.concat(block);
      }derivedKey.sigBytes = keySize * 4;return derivedKey;
    } });C.EvpKDF = function (password, salt, cfg) {
    return EvpKDF.create(cfg).compute(password, salt);
  };
})();

cc._RFpop();
},{"./core":"core"}],"flyChipNodePre":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a48faS/teNMq5rWcxyKMFdi', 'flyChipNodePre');
// Script/flyChipNodePre.js

"use strict";

var ESkinTag = cc.Enum({

    eChip20: 0,
    eChip50: 1,
    eChip100: 2,
    eChip500: 3,
    eChip1000: 4,
    eGaryChip: 5,
    eOtherChip: 6

});

cc.Class({
    extends: cc.Component,

    properties: {
        //20 50 100 500 1000 gray other
        chipSkinNodeArray: {
            default: [],
            type: [cc.Node]
        },
        moneyLabel: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {},

    /**
     * 设置筹码皮肤
     * @param tag 对应的筹码编号(20 50 100 500 1000 gray other)
     */
    setSkinWithTag: function setSkinWithTag(tag) {

        for (var i = 0; i < this.chipSkinNodeArray.length; i++) {
            if (tag == i) {
                this.chipSkinNodeArray[i].activate = true;
            } else {
                this.chipSkinNodeArray[i].activate = false;
            }
        }
    },

    /**
     * 设置投注金额
     * @param chipMoney 对应的金额
     */
    setMoney: function setMoney(chipMoney) {
        if (chipMoney > 0) {
            this.moneyLabel.getComponent(cc.Label).string = chipMoney;
        } else {
            this.moneyLabel.getComponent(cc.Label).string = "";
        }
    },

    /**
     * 动画飞
     * @param position1 源位置
     * @param position2 目标位置
     * @param flag  飞回来还是飞回去
     * @param flyNode 飞过程的筹码对象
     * @param self 飞到的目标对象
     * @param callFun 回调的指针
     */
    chipFlyAction: function chipFlyAction(position1, position2, flag, flyNode, powerTarget, self, callFun) {
        var moveto = void 0;
        var dt = 0.2;
        this.node.stopAllActions();
        if (flag) {
            this.node.setPosition(position1);
            moveto = cc.moveTo(dt, position2);
        } else {
            this.node.setPosition(position2);
            moveto = cc.moveTo(dt, position1);
        }

        var ac1 = cc.scaleTo(dt, 1.0, 1.0);

        var obj = new Object();
        obj.powerTarget = powerTarget;
        obj.flyNode = flyNode;
        obj.target = self;
        obj.flag = flag;

        this.node.runAction(cc.sequence(moveto, cc.callFunc(callFun, self, obj)));
    }

});

module.exports = {
    ESkinTag: ESkinTag
};

cc._RFpop();
},{}],"flyRewardNodePre":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'edcb84oyLtPR4yixmZKo0vu', 'flyRewardNodePre');
// Script/flyRewardNodePre.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {

        rewardFlyNodeSkinArray: {
            default: [],
            type: [cc.Node]
        }
    },

    // use this for initialization
    onLoad: function onLoad() {},

    setSkin: function setSkin(index) {
        for (var i = 0; i < this.rewardFlyNodeSkinArray.length; i++) {
            if (index == i) {
                this.rewardFlyNodeSkinArray[i].active = true;
            } else {
                this.rewardFlyNodeSkinArray[i].active = false;
            }
        }
    },

    flyRewardAction: function flyRewardAction(position1, position2) {
        var moveto = void 0;
        var dt = 0.2;
        this.node.stopAllActions();
        this.node.setPosition(position1);
        moveto = cc.moveTo(dt, position2);
        var ac1 = cc.scaleTo(dt, 1.0, 1.0);

        var obj = new Object();
        obj.target = self;

        this.node.runAction(cc.sequence(moveto));
    }
});

cc._RFpop();
},{}],"game":[function(require,module,exports){
"use strict";
cc._RFpush(module, '96ad77uxvBOBKqKlCOn0FKD', 'game');
// Script/game.js

"use strict";

// const i18n = require('LanguageData');

var NetData = require("NetData");
var DataOper = require("DataOper");
var ButtonScale = require("ButtonScale");
var Init = require("Init");
var init = new Init();
init.init();

cc.Class({
    extends: cc.Component,

    properties: {
        rewardNode: cc.Node,

        blackLayer: {
            default: null,
            type: cc.Node
        },

        waitLayer: {
            default: null,
            type: cc.Node
        },

        cdtimeIcon: cc.Node,
        //倒计时看区域
        cdBgYellow: {
            default: null,
            type: cc.Node
        },
        cdBgRed: {
            default: null,
            type: cc.Node
        },
        cdLabel: {
            default: null,
            type: cc.Label
        },
        cdJieduanLabel: {
            default: null,
            type: cc.Label
        },

        //筹码区
        chipNodeArray: {
            default: [],
            type: [cc.Node]
        },

        //清除
        clearOnNode: {
            default: null,
            type: cc.Node
        },
        clearOffNode: {
            default: null,
            type: cc.Node
        },

        //toast
        toastNode: {
            default: null,
            type: cc.Node
        },

        chooseAreaNodeArray: {
            default: [],
            type: [cc.Node]
        },

        chipAreaNoTouchNode: {
            default: null,
            type: cc.Node
        },

        betAreaNoTouchNode: {
            default: null,
            type: cc.Node
        },

        stageStopDialog: cc.Node, //第一回合结束提示框label
        sumLimit: 0, //判断投注和值； 是否超过limit;
        needClearFlag: false, //需要清理;要在投注成功后调;
        chipIndex: 0, //筹码node 的 index
        clearingFlag: false, //清理中

        canBetFlag: true, //当前是否可以投注
        cunCmd: 100, //默认100

        errorDialog: cc.Node

    },

    // use this for initialization
    onLoad: function onLoad() {

        // i18n.init('en');
        // this.cdLabel.string = i18n.t('label.hello');

        this.netData = NetData.NetData.getInst();

        if (this.netData.initFlag == 1) {
            cc.log("正常初始化进入UI");
            //直接初始化
            this.frontInit();
            this.gameStart();
        } else if (this.netData.initFlag == 2) {
            // this.midNode.active = false;
            // this.stopHint(this, this.netData.stopSellingDesc);
        } else {
            cc.log("fei正常初始化进入UI");
            this.schedule(this.initWait, 0.1);
        }

        // //测试
        // this.netData.timeFlag = 1;
        // this.netData.secs = 25;

        // var obj = new Object();
        // obj.status = 1;
        // obj.betList = [10, 20, 30, 40, 50];
        // var oddsListObj = new Object();
        // oddsListObj.option = "群雄";
        // oddsListObj.id = 1;
        // oddsListObj.powerId = 2;
        // oddsListObj.odds1 = 0.2;
        // oddsListObj.odds2 = 0.8;
        // oddsListObj.status = 1;
        // obj.oddsList = oddsListObj;
        // this.netData.initData = obj;
        // this.gameStart();
    },

    initWait: function initWait(dt) {
        if (this.netData.initFlag) {
            //直接初始化
            this.frontInit();
            this.gameStart();
            this.unschedule(this.initWait);
        }
    },

    frontInit: function frontInit() {
        // if(this.netData.initData.status == 1){
        var te = new Date();
        var localTime = te.getTime();
        var offset = Math.round((localTime - init.timeStamp) / 1000);
        this.netData.secs -= offset;
        console.log("offset= " + offset + "sec= " + this.netData.secs);

        if (this.netData.secs < 0) {
            this.netData.initData.status = 3;
        }
        // }
    },

    resumeTick: function resumeTick(dt) {
        this.resumFlag = true;
    },

    start: function start() {
        if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
            cc.renderer.enableDirtyRegion(false);
        }
    },

    isCanBet: function isCanBet(callback) {
        var flag = false;

        if (!CC_JSB) {
            var self = this;
            var sdk = window.aliLotteryCasinoSDK;
            if (sdk) {

                sdk.isLogin(function (isLogin) {

                    if (!isLogin) //没登录去登录
                        {
                            self.goLogin();
                        } else //登录了 判断是否获取豆成功
                        {

                            sdk.setCache('chip', self.netData.betList[self.chipIndex]);

                            //在判断是否足额（淘宝相关）
                            var price = self.netdata.betList[self.chipIndex];

                            flag = self.judgeBalance(price);
                            if (flag) {
                                callback();
                            }
                        }
                });
            } else {
                callback();
            }
        } else {
            callback();
        }
    },

    goLogin: function goLogin() {
        if (!CC_JSB) {
            var self = this;
            var sdk = window.aliLotteryCasinoSDK;

            if (sdk) {
                sdk.login(function () {
                    //需要调初始化;
                    // login 后执行
                    sdk.updateUserInfo();
                    /*sdk.getUserInfo(function(info) {
                        if (info) {
                            self.netData.sdkBalance = info.fee;
                            var uid = info.uid;
                            var nick = info.nick;
                            self.showUserIcon(uid, nick);
                        }
                    });*/
                    self.fresh();
                });
            } else {
                this.fresh();
            }
        } else {
            this.fresh();
        }
    },

    exitJudge: function exitJudge() {
        var fg = false;
        var unfinish = false;

        if (!this.canBetFlag || unfinish) {
            this.errDialogTag = 3;

            if (this.clearingFlag) {
                this.showErrorLayer("正在帮你撤单，请稍等", true);
            } else {
                this.showErrorLayer("正在帮你下单，请稍等", true);
            }

            fg = true;
        }

        return fg;
    },

    fresh: function fresh() {
        this.setStageText();
    },

    exitGame: function exitGame() {
        if (!CC_JSB) {
            if (window.aliLotteryCasinoSDK) {
                window.aliLotteryCasinoSDK.popWindow();
            }
        } else {
            cc.director.loadScene('game');
        }
    },

    gameStart: function gameStart() {
        cc.log("gamestart");
        this.setStageText();
        this.getChipIndex();
        this.showChipNum();
        this.swiftSec();
        this.showPowerInfo();
    },

    reGo: function reGo() {},

    showPowerInfo: function showPowerInfo() {
        for (var i = 0; i < this.chooseAreaNodeArray.length; i++) {
            var chooseArea = this.chooseAreaNodeArray[i];
            var powerJS = chooseArea.getComponent("Power");
            powerJS.updataInfo(this.cunCmd);
            powerJS.updataUI();
        }
    },

    flyStamp: function flyStamp() {
        for (var i = 0; i < this.chooseAreaNodeArray.length; i++) {
            var chooseArea = this.chooseAreaNodeArray[i];
            var powerJS = chooseArea.getComponent("Power");
            if (powerJS.powerId > 1 && powerJS.powerId <= 5) {
                //延时的2s走盖戳
                this.scheduleOnce(powerJS.putStampOnAction(), 0.3);
            }
        }
    },

    setStageText: function setStageText() {
        this.cdJieduanLabel.node.active = true;
        this.cdtimeIcon.active = true;
        this.cdLabel.node.x = -54;

        var jieduan = this.cdJieduanLabel.getComponent(cc.Label);
        if (this.netData.timeFlag == 1) //盲选阶段
            {
                jieduan.string = "盲选";
            } else if (this.netData.timeFlag == 2) //明选阶段
            {
                jieduan.string = "明选";
            }
    },

    swiftSec: function swiftSec() {
        //1：暗牌正在投注，2：暗牌阶段已截止，3：明牌正在投注，4:明牌截至投注，5：正在开奖，7:停售
        cc.log("this.netData.initData.status ", this.netData.initData.status);
        cc.log("time is ", this.netData.secs);
        switch (this.netData.initData.status) {
            case 1:
            case 3:
                {

                    if (this.netData.secs >= 0) {
                        this.cdLabel.string = this.netData.secs + "″";
                    } else {
                        this.cdLabel.string = "0″";
                    }

                    var pt = this.cdBgRed.parent;
                    pt.stopAllActions();
                    pt.runAction(cc.show());

                    if (this.netData.secs <= 3) {

                        this.cdBgRed.active = true;
                        this.cdBgYellow.active = false;
                        var dt = 0.38; //3 / 8;
                        pt.runAction(cc.repeat(cc.sequence(cc.delayTime(dt), cc.hide(), cc.delayTime(dt), cc.show()), 4));
                    } else {
                        this.cdBgYellow.active = true;
                        this.cdBgRed.active = false;
                    }

                    this.schedule(this.showSec, 1);
                    this.grayLight(false);
                }
                break;
            case 2:
            case 4:
                {
                    this.doStopBet();
                }
                break;
            case 5:
                {
                    //正在开奖
                    this.getReward();
                }
                break;
            case 7:
                {
                    //停售

                }
                break;
            default:
                break;
        }
    },

    secCd: function secCd(dt) {
        this.netData.secs--;
    },

    showSec: function showSec(dt) {
        // cc.log("showSec：this.netData.secs ",this.netData.secs);

        this.netData.secs--;

        if (this.netData.secs >= 0) {
            this.cdLabel.string = this.netData.secs + "″";
        } else {
            this.cdLabel.string = "0″";
        }

        if (this.netData.secs <= 3) {
            var pt = this.cdBgRed.parent;
            cc.log("sec<3");
            this.cdBgRed.active = true;
            this.cdBgYellow.active = false;
            var _dt = 0.38; //3 / 8;
            pt.runAction(cc.repeat(cc.sequence(cc.delayTime(_dt), cc.hide(), cc.delayTime(_dt), cc.show()), 4));
        }

        if (this.netData.secs <= 0) {
            cc.log("sec== 0");
            this.doStopBet();
        }
    },

    doStopBet: function doStopBet() {
        cc.log("this.netData.timeFlag", this.netData.timeFlag);
        this.canBetFlag = false;
        // this.unschedule(this.turnTableLogic);
        this.cdBgRed.parent.stopAllActions();
        this.cdBgRed.parent.runAction(cc.show());
        this.cdBgYellow.active = true;
        this.cdBgRed.active = false;
        this.cdLabel.node.x = -54;
        // this.cdLabel.w = 220;
        this.cdLabel.string = "已截止";
        this.unschedule(this.showSec);
        //变灰;
        this.grayLight(true);
        this.netData.initData.status = 2;
        if (this.netData.timeFlag == 1) //提示框的弹出获取结果开奖就然后获取第二回合数据
            {
                this.stageStopDialog.active = true;

                var self = this;
                var callback = function callback(dt) {
                    this.getSecondData(); //获取第二阶段
                };
                this.scheduleOnce(callback, 10);
            } else //获取开奖结果
            {
                this.getReward();
            }
    },

    grayLight: function grayLight(flag) {
        this.clearOnNode.parent.active = !flag;
        this.clearOffNode.parent.active = flag;
        this.betAreaNoTouchNode.active = flag;
    },

    getReward: function getReward() {

        this.unschedule(this.showSec);
        this.cdBgRed.parent.stopAllActions();
        this.cdBgRed.parent.runAction(cc.show());
        this.cdBgYellow.active = true;
        this.cdBgRed.active = false;
        this.cdJieduanLabel.node.active = false;
        this.cdtimeIcon.active = false;
        this.cdLabel.node.x = -100;
        this.cdLabel.string = "正在开奖";
        this.scheduleOnce(this.doReward, 6); //提前的3秒 + 给服务器预留的2秒;
    },

    getSecondData: function getSecondData() //获取第二阶段的数据
    {
        this.showWaitLayer();
        var dataOper = DataOper.DataOper.getInst();
        dataOper.getSecondData(this.netCallback, this);
    },

    doReward: function doReward(dt) {
        this.showWaitLayer();
        var dataOper = DataOper.DataOper.getInst();
        dataOper.getReward(this.netCallback, this);
    },

    showWaitLayer: function showWaitLayer() {
        this.blackLayer.active = true;
        this.waitLayer.active = true;
    },

    hideWaitLayer: function hideWaitLayer() {
        this.blackLayer.active = false;
        this.waitLayer.active = false;
    },

    judgeBalance: function judgeBalance(amount) {
        var fg = true;

        if (this.sdkBalance == -1) {
            // this.errDialogTag = 5;
            // this.blackLayer.active = true;
            // this.refreshNode.getChildByName("word").getComponent(cc.Label).string = "获取" + this.netData.currency + "失败，请刷新页面";
            // this.refreshNode.runAction(cc.scaleTo(0.2, 1.0, 1.0));
            fg = false;
        } else {

            if (amount > this.sdkBalance) {
                //提示余额不足，跳转到充值
                if (!CC_JSB) {
                    if (window.aliLotteryCasinoSDK) {
                        window.aliLotteryCasinoSDK.recharge(true);
                    }
                }

                fg = false;
                console.log("no balance");
            }
        }

        return fg;
    },

    getChipIndex: function getChipIndex() {
        var sdk = window.aliLotteryCasinoSDK;

        if (sdk) {
            var self = this;
            var len = this.netData.betList.length;

            window.aliLotteryCasinoSDK.getCache('chip', function (result) {
                if (result) {
                    for (var i = 0; i < len; i++) {
                        if (self.netData.betList[i] == result) {
                            self.chipIndex = i;
                            break;
                        }
                    }
                } else {
                    for (var _i = 0; _i < len; _i++) {
                        if (self.netData.betList[_i] == self.netData.preBet) {
                            self.chipIndex = _i;
                            break;
                        }
                    }
                }
            });
        }
    },

    /******************netCallback********************/
    netCallback: function netCallback(cmd, res, msg, self) {
        cc.log("netCallback cmd=" + cmd);
        self.cunCmd = cmd;
        var netData = NetData.NetData.getInst();
        self.hideWaitLayer();
        res = parseInt(res);
        console.log("res=" + res + "/mg=" + msg + "/cmd=" + self.cunCmd);
        switch (res) {
            case 0:
                {
                    switch (cmd) {
                        case 100:
                            //init
                            {
                                self.gameStart();
                            }
                            break;
                        case 101:
                            //bet
                            {
                                self.showPowerInfo();
                                //投注成功后清零
                                for (var i = 0; i < self.chooseAreaNodeArray.length; i++) {
                                    var chooseArea = self.chooseAreaNodeArray[i];
                                    var powerJS = chooseArea.getComponent("Power");
                                    if (powerJS.betFlag) {
                                        powerJS.betNum = 0;
                                    }
                                }
                            }
                            break;
                        case 102:
                            //clear
                            {
                                self.showPowerInfo();
                            }
                            break;
                        case 103:
                            //reward
                            {
                                self.chipAreaNoTouchNode.active = true;

                                self.showPowerInfo();
                                self.flyStamp();
                            }
                            break;
                        case 104:
                            //twostemp
                            {
                                self.stageStopDialog.active = false;
                                self.schedule(self.showSec, 1);
                                self.grayLight(false);
                                self.setStageText();
                                self.showPowerInfo();
                            }
                            break;
                        case 105:
                            //orderlist
                            {}
                            break;
                        case 106:
                            //historylist
                            {}
                            break;
                    }
                }
                break;
            case 100007:
                //在其他设备登录
                {
                    self.stageStopDialog.active = false;
                    var errorDialogJs = self.errorDialog.getComponent("errorDialog");
                    errorDialogJs.showDialog(msg, 1);
                }
                break;
            case 200009:
                //余额不足;
                {}
                break;
            default:
                {
                    cc.log("res default!");
                    switch (cmd) {
                        case 101:
                            //投注失败回收筹码
                            {
                                // self.showToast(msg);

                                self.canBetFlag = false;
                                for (var i = 0; i < self.chooseAreaNodeArray.length; i++) {
                                    var chooseArea = self.chooseAreaNodeArray[i];
                                    var powerJS = chooseArea.getComponent("Power");
                                    for (var j = 0; j < netData.reqBetList.length; j++) {
                                        if (powerJS.betId == netData.reqBetList[j].id) {
                                            powerJS.reduceSelfChip();
                                            break;
                                        }
                                    }
                                }
                            }
                            break;
                        default:
                            {
                                self.stageStopDialog.active = false;
                                //通常的错误提示
                                var errorDialogJs = self.errorDialog.getComponent("errorDialog");
                                errorDialogJs.showDialog(msg, 0);
                            }
                            break;
                    }
                }
                break;
        }
    },
    /******************netCallback********************/
    //结算飞戳结束
    rewardFlyFinishedCallback: function rewardFlyFinishedCallback() {
        //提示再来一局103
        cc.log("该提示结算页面了");

        var netData = NetData.NetData.getInst();
        var status = netData.rewardData.status;
        this.rewardNode.active = true;
        var num = 0;
        if (status == 1) //sheng
            {
                num = netData.rewardData.amount;
            } else if (status == 2) //fu
            {
                num = netData.rewardData.allNum;
            } else if (status == 3) //ping
            {
                num = netData.rewardData.amount;
            }

        this.rewardNode.getComponent("rewardNode").setContent(status, num);
    },

    rewardNodeColse: function rewardNodeColse() {
        this.rewardNode.active = false;

        this.showPowerInfo();
        this.schedule(self.showSec, 1);
        this.grayLight(false);
        this.setStageText();
    },

    clearWithFlag: function clearWithFlag(flag) {
        this.clearOnNode.parent.active = flag;
        this.clearOffNode.parent.active = !flag;
    },

    //所有按钮的回调等等事件
    btnActionCallBack: function btnActionCallBack(btnTag) {
        switch (btnTag) {
            // case ButtonScale.EbuttonTag.eCleare:
            case 5:
                {
                    cc.log("clear clear!!!");

                    this.clearingFlag = true;

                    if (this.canBetFlag) {
                        this.canBetFlag = false;
                        this.clearWithFlag(false);

                        this.showWaitLayer();
                        var dataOper = DataOper.DataOper.getInst();
                        dataOper.getClear(this.netCallback, this);

                        this.flyBack();
                        this.sumLimit = 0;
                        this.netData.betLimit = this.netData.totalBetLimit;
                    } else {
                        this.needClearFlag = true;
                        this.flyBack();
                        this.sumLimit = 0;
                        this.netData.betLimit = this.netData.totalBetLimit;
                    }
                }
                break;
            case ButtonScale.EbuttonTag.eChip20:
            case ButtonScale.EbuttonTag.eChip50:
            case ButtonScale.EbuttonTag.eChip100:
            case ButtonScale.EbuttonTag.eChip500:
            case ButtonScale.EbuttonTag.eChip1000:
                {
                    cc.log("");
                    this.chipIndex = btnTag;
                    this.resetChip();
                    cc.log("chipIndex is = ", this.chipIndex);
                }
                break;

            default:
                break;
        }
    },

    errorDialogCallback: function errorDialogCallback(typeaction, positon) //1 左边按钮 2 右边按钮
    {
        var errorDialogJs = this.errorDialog.getComponent("errorDialog");
        errorDialogJs.hideDialog();

        if (positon == 1) {
            switch (typeaction) {
                case 0:
                    {
                        //只有一个按钮刷新刷新的
                        if (this.cunCmd == 100) {
                            var dataOper = DataOper.DataOper.getInst();
                            dataOper.getInit(this.netCallback, this);
                        } else if (this.cunCmd == 101) {} else if (this.cunCmd == 102) {} else if (this.cunCmd == 103) {
                            this.showWaitLayer();
                            var dataOper = DataOper.DataOper.getInst();
                            dataOper.getReward(this.netCallback, this);
                        } else if (this.cunCmd == 104) {
                            this.showWaitLayer();
                            var dataOper = DataOper.DataOper.getInst();
                            dataOper.getSecondData(this.netCallback, this);
                        } else if (this.cunCmd == 105) {} else if (this.cunCmd == 106) {}
                    }
                    break;
                case 1:
                    {}
                    break;
                case 2:
                    {}
                    break;
            }
        } else {
            switch (typeaction) {
                case 0:
                    {}
                    break;
                case 1:
                    {}
                    break;
                case 2:
                    {}
                    break;
            }
        }
    },

    showChipNum: function showChipNum() {
        var netData = NetData.NetData.getInst();

        for (var i = 0; i < this.chipNodeArray.length; i++) {
            var le = this.chipNodeArray[i].getChildByName("Label").getComponent(cc.Label);
            this.adjustFontsize(le, netData.initData.betList[i]);
            le.string = netData.initData.betList[i];
        }

        for (var j = 0; j < netData.initData.betList.length; j++) {
            if (netData.initData.betList[j] == netData.initData.preBet) {
                this.chipIndex = j;
            }
        }
        this.resetChip();
    },

    adjustFontsize: function adjustFontsize(label, num) {
        var se = 71;

        if (num < 100) {} else if (num < 1000) {
            label.fontSize = se * 0.8;
        } else {
            label.fontSize = se * 0.56;
        }
    },

    resetChip: function resetChip() {
        for (var i = 0; i < this.chipNodeArray.length; i++) {
            if (this.chipIndex == i) {
                this.chipNodeArray[i].scale = 1;
            } else {
                this.chipNodeArray[i].scale = 0.8;
            }
        }
    },

    showToast: function showToast(msg) {
        this.toastNode.stopAllActions();
        this.toastNode.scale = 0;
        var le = this.toastNode.getChildByName("word").getComponent(cc.Label);
        le.string = msg;
        var len = le.node.width + 20;
        this.toastNode.width = len;
        var dt = 0.2;
        var ac1 = cc.scaleTo(dt, 1.0, 1.0);
        var ac2 = cc.scaleTo(dt, 0, 0);
        this.toastNode.runAction(cc.sequence(ac1, cc.delayTime(2), ac2));
    },

    flyBack: function flyBack() {
        for (var i = 0; i < this.chooseAreaNodeArray.length; i++) {
            var chooseArea = this.chooseAreaNodeArray[i];
            var powerJS = chooseArea.getComponent("Power");
            if (powerJS.betFlag) {
                powerJS.flyBack();
            }
        }
    },

    powerBet: function powerBet(callFunc, power) {
        //判断登录、余额TODO
        var self = this;
        var callback = function callback() {
            self.canBetFlag = true;
            self.clearWithFlag(true);
            callFunc(self.chipIndex, power);
            self.unschedule(self.dealBet);
            self.scheduleOnce(self.dealBet, 0.5);
        };
        self.isCanBet(callback);
    },

    /**
     * 真实投注
     */
    dealBet: function dealBet(dt) {
        this.showWaitLayer();
        var netData = NetData.NetData.getInst();
        var dataOper = DataOper.DataOper.getInst();
        //首先检查当前是否有没有回来的投注请求
        if (this.canBetFlag) {
            this.canBetFlag = false;

            netData.reqBetList = [];

            for (var i = 0; i < this.chooseAreaNodeArray.length; i++) {
                var chooseArea = this.chooseAreaNodeArray[i];
                var powerJS = chooseArea.getComponent("Power");
                if (powerJS.betFlag) {
                    powerJS.betNum = 0;
                    for (var j = 0; j < powerJS.betList.length; ++j) {
                        netData.reqBetList.push(powerJS.betList[j]);
                        powerJS.betNum += powerJS.betList[j].bet * powerJS.betList[j].num;
                    }
                    powerJS.betList = [];
                }
            }

            dataOper.getBet(this.netCallback, this);
        } else {
            this.scheduleOnce(this.dealBet, 0.5);
        }
    }

});

cc._RFpop();
},{"ButtonScale":"ButtonScale","DataOper":"DataOper","Init":"Init","NetData":"NetData"}],"md5":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2ceb3709r9Ml6wPLEEyiUfd', 'md5');
// Script/network/aes/md5.js

"use strict";

var CryptoJS = require("./core");(function (Math) {
  var C = CryptoJS;var C_lib = C.lib;var WordArray = C_lib.WordArray;var Hasher = C_lib.Hasher;var C_algo = C.algo;var T = [];(function () {
    for (var i = 0; i < 64; i++) {
      T[i] = Math.abs(Math.sin(i + 1)) * 4294967296 | 0;
    }
  })();var MD5 = C_algo.MD5 = Hasher.extend({ _doReset: function _doReset() {
      this._hash = new WordArray.init([1732584193, 4023233417, 2562383102, 271733878]);
    }, _doProcessBlock: function _doProcessBlock(M, offset) {
      for (var i = 0; i < 16; i++) {
        var offset_i = offset + i;var M_offset_i = M[offset_i];M[offset_i] = (M_offset_i << 8 | M_offset_i >>> 24) & 16711935 | (M_offset_i << 24 | M_offset_i >>> 8) & 4278255360;
      }var H = this._hash.words;var M_offset_0 = M[offset + 0];var M_offset_1 = M[offset + 1];var M_offset_2 = M[offset + 2];var M_offset_3 = M[offset + 3];var M_offset_4 = M[offset + 4];var M_offset_5 = M[offset + 5];var M_offset_6 = M[offset + 6];var M_offset_7 = M[offset + 7];var M_offset_8 = M[offset + 8];var M_offset_9 = M[offset + 9];var M_offset_10 = M[offset + 10];var M_offset_11 = M[offset + 11];var M_offset_12 = M[offset + 12];var M_offset_13 = M[offset + 13];var M_offset_14 = M[offset + 14];var M_offset_15 = M[offset + 15];var a = H[0];var b = H[1];var c = H[2];var d = H[3];a = FF(a, b, c, d, M_offset_0, 7, T[0]);d = FF(d, a, b, c, M_offset_1, 12, T[1]);c = FF(c, d, a, b, M_offset_2, 17, T[2]);b = FF(b, c, d, a, M_offset_3, 22, T[3]);a = FF(a, b, c, d, M_offset_4, 7, T[4]);d = FF(d, a, b, c, M_offset_5, 12, T[5]);c = FF(c, d, a, b, M_offset_6, 17, T[6]);b = FF(b, c, d, a, M_offset_7, 22, T[7]);a = FF(a, b, c, d, M_offset_8, 7, T[8]);d = FF(d, a, b, c, M_offset_9, 12, T[9]);c = FF(c, d, a, b, M_offset_10, 17, T[10]);b = FF(b, c, d, a, M_offset_11, 22, T[11]);a = FF(a, b, c, d, M_offset_12, 7, T[12]);d = FF(d, a, b, c, M_offset_13, 12, T[13]);c = FF(c, d, a, b, M_offset_14, 17, T[14]);b = FF(b, c, d, a, M_offset_15, 22, T[15]);a = GG(a, b, c, d, M_offset_1, 5, T[16]);d = GG(d, a, b, c, M_offset_6, 9, T[17]);c = GG(c, d, a, b, M_offset_11, 14, T[18]);b = GG(b, c, d, a, M_offset_0, 20, T[19]);a = GG(a, b, c, d, M_offset_5, 5, T[20]);d = GG(d, a, b, c, M_offset_10, 9, T[21]);c = GG(c, d, a, b, M_offset_15, 14, T[22]);b = GG(b, c, d, a, M_offset_4, 20, T[23]);a = GG(a, b, c, d, M_offset_9, 5, T[24]);d = GG(d, a, b, c, M_offset_14, 9, T[25]);c = GG(c, d, a, b, M_offset_3, 14, T[26]);b = GG(b, c, d, a, M_offset_8, 20, T[27]);a = GG(a, b, c, d, M_offset_13, 5, T[28]);d = GG(d, a, b, c, M_offset_2, 9, T[29]);c = GG(c, d, a, b, M_offset_7, 14, T[30]);b = GG(b, c, d, a, M_offset_12, 20, T[31]);a = HH(a, b, c, d, M_offset_5, 4, T[32]);d = HH(d, a, b, c, M_offset_8, 11, T[33]);c = HH(c, d, a, b, M_offset_11, 16, T[34]);b = HH(b, c, d, a, M_offset_14, 23, T[35]);a = HH(a, b, c, d, M_offset_1, 4, T[36]);d = HH(d, a, b, c, M_offset_4, 11, T[37]);c = HH(c, d, a, b, M_offset_7, 16, T[38]);b = HH(b, c, d, a, M_offset_10, 23, T[39]);a = HH(a, b, c, d, M_offset_13, 4, T[40]);d = HH(d, a, b, c, M_offset_0, 11, T[41]);c = HH(c, d, a, b, M_offset_3, 16, T[42]);b = HH(b, c, d, a, M_offset_6, 23, T[43]);a = HH(a, b, c, d, M_offset_9, 4, T[44]);d = HH(d, a, b, c, M_offset_12, 11, T[45]);c = HH(c, d, a, b, M_offset_15, 16, T[46]);b = HH(b, c, d, a, M_offset_2, 23, T[47]);a = II(a, b, c, d, M_offset_0, 6, T[48]);d = II(d, a, b, c, M_offset_7, 10, T[49]);c = II(c, d, a, b, M_offset_14, 15, T[50]);b = II(b, c, d, a, M_offset_5, 21, T[51]);a = II(a, b, c, d, M_offset_12, 6, T[52]);d = II(d, a, b, c, M_offset_3, 10, T[53]);c = II(c, d, a, b, M_offset_10, 15, T[54]);b = II(b, c, d, a, M_offset_1, 21, T[55]);a = II(a, b, c, d, M_offset_8, 6, T[56]);d = II(d, a, b, c, M_offset_15, 10, T[57]);c = II(c, d, a, b, M_offset_6, 15, T[58]);b = II(b, c, d, a, M_offset_13, 21, T[59]);a = II(a, b, c, d, M_offset_4, 6, T[60]);d = II(d, a, b, c, M_offset_11, 10, T[61]);c = II(c, d, a, b, M_offset_2, 15, T[62]);b = II(b, c, d, a, M_offset_9, 21, T[63]);H[0] = H[0] + a | 0;H[1] = H[1] + b | 0;H[2] = H[2] + c | 0;H[3] = H[3] + d | 0;
    }, _doFinalize: function _doFinalize() {
      var data = this._data;var dataWords = data.words;var nBitsTotal = this._nDataBytes * 8;var nBitsLeft = data.sigBytes * 8;dataWords[nBitsLeft >>> 5] |= 128 << 24 - nBitsLeft % 32;var nBitsTotalH = Math.floor(nBitsTotal / 4294967296);var nBitsTotalL = nBitsTotal;dataWords[(nBitsLeft + 64 >>> 9 << 4) + 15] = (nBitsTotalH << 8 | nBitsTotalH >>> 24) & 16711935 | (nBitsTotalH << 24 | nBitsTotalH >>> 8) & 4278255360;dataWords[(nBitsLeft + 64 >>> 9 << 4) + 14] = (nBitsTotalL << 8 | nBitsTotalL >>> 24) & 16711935 | (nBitsTotalL << 24 | nBitsTotalL >>> 8) & 4278255360;data.sigBytes = (dataWords.length + 1) * 4;this._process();var hash = this._hash;var H = hash.words;for (var i = 0; i < 4; i++) {
        var H_i = H[i];H[i] = (H_i << 8 | H_i >>> 24) & 16711935 | (H_i << 24 | H_i >>> 8) & 4278255360;
      }return hash;
    }, clone: function clone() {
      var clone = Hasher.clone.call(this);clone._hash = this._hash.clone();return clone;
    } });function FF(a, b, c, d, x, s, t) {
    var n = a + (b & c | ~b & d) + x + t;return (n << s | n >>> 32 - s) + b;
  }function GG(a, b, c, d, x, s, t) {
    var n = a + (b & d | c & ~d) + x + t;return (n << s | n >>> 32 - s) + b;
  }function HH(a, b, c, d, x, s, t) {
    var n = a + (b ^ c ^ d) + x + t;return (n << s | n >>> 32 - s) + b;
  }function II(a, b, c, d, x, s, t) {
    var n = a + (c ^ (b | ~d)) + x + t;return (n << s | n >>> 32 - s) + b;
  }C.MD5 = Hasher._createHelper(MD5);C.HmacMD5 = Hasher._createHmacHelper(MD5);
})(Math);

cc._RFpop();
},{"./core":"core"}],"mode-ecb":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e11dbyI/bFD/4JfK0/gf6re', 'mode-ecb');
// Script/network/aes/mode-ecb.js

"use strict";

var CryptoJS = require("./core");CryptoJS.mode.ECB = function () {
  var ECB = CryptoJS.lib.BlockCipherMode.extend();ECB.Encryptor = ECB.extend({ processBlock: function processBlock(words, offset) {
      this._cipher.encryptBlock(words, offset);
    } });ECB.Decryptor = ECB.extend({ processBlock: function processBlock(words, offset) {
      this._cipher.decryptBlock(words, offset);
    } });return ECB;
}();

cc._RFpop();
},{"./core":"core"}],"rewardNode":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b717b2HbwlOla7ieO9oW8vk', 'rewardNode');
// Script/rewardNode.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        imgArray: [cc.Node],
        btnImg: cc.Node,
        btnText: cc.Label,
        text: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.btnImg.parent.on(cc.Node.EventType.TOUCH_START, function (event) {
            this.btnImg.scale = 0.8;
        }, this);

        this.btnImg.parent.on(cc.Node.EventType.TOUCH_END, function (event) {
            this.btnImg.scale = 1;
            this.node.active = false;
            var onFunction = cc.find('Canvas').getComponent('game');
            onFunction.rewardNodeColse();
        }, this);

        this.btnImg.parent.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {

            this.btnImg.scale = 1;
        }, this);
    },

    setContent: function setContent(status, num) {
        this.node.active = true;
        var text = "";
        if (status === 0) //未开奖
            {} else if (status == 1) //sheng
            {
                text = "中" + num + "豆";
            } else if (status == 2) //fu
            {
                text = "今日已有" + num + "人猜中!";
            } else if (status == 3) //ping
            {
                text = "返还" + num + "豆";
            } else if (status == 4) //未投注
            {} else {}
        this.text.getComponent(cc.Label).string = text;
        if (status >= 1 && status <= 3) //sheng
            {
                for (var i = 0; i < this.imgArray.length; i++) {
                    if (status - 1 == i) {
                        this.imgArray[i].active = true;
                    } else {
                        this.imgArray[i].active = false;
                    }
                }
            }
    }

});

cc._RFpop();
},{}]},{},["HelloWorld","Help","Init","Power","ButtonScale","Notouch","WaitScript","errorDialog","convertNode","flyChipNodePre","flyRewardNodePre","game","DataOper","NetData","aes","cipher-core","core","enc-base64","evpkdf","md5","mode-ecb","rewardNode"])

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVG9vbHMvQnV0dG9uU2NhbGUuanMiLCJhc3NldHMvU2NyaXB0L25ldHdvcmsvRGF0YU9wZXIuanMiLCJhc3NldHMvU2NyaXB0L0hlbGxvV29ybGQuanMiLCJhc3NldHMvU2NyaXB0L0hlbHAuanMiLCJhc3NldHMvU2NyaXB0L0luaXQuanMiLCJhc3NldHMvU2NyaXB0L25ldHdvcmsvTmV0RGF0YS5qcyIsImFzc2V0cy9TY3JpcHQvVG9vbHMvTm90b3VjaC5qcyIsImFzc2V0cy9TY3JpcHQvUG93ZXIuanMiLCJhc3NldHMvU2NyaXB0L1Rvb2xzL1dhaXRTY3JpcHQuanMiLCJhc3NldHMvU2NyaXB0L25ldHdvcmsvYWVzL2Flcy5qcyIsImFzc2V0cy9TY3JpcHQvbmV0d29yay9hZXMvY2lwaGVyLWNvcmUuanMiLCJhc3NldHMvU2NyaXB0L2NvbnZlcnROb2RlLmpzIiwiYXNzZXRzL1NjcmlwdC9uZXR3b3JrL2Flcy9jb3JlLmpzIiwiYXNzZXRzL1NjcmlwdC9uZXR3b3JrL2Flcy9lbmMtYmFzZTY0LmpzIiwiYXNzZXRzL1NjcmlwdC9Ub29scy9lcnJvckRpYWxvZy5qcyIsImFzc2V0cy9TY3JpcHQvbmV0d29yay9hZXMvZXZwa2RmLmpzIiwiYXNzZXRzL1NjcmlwdC9mbHlDaGlwTm9kZVByZS5qcyIsImFzc2V0cy9TY3JpcHQvZmx5UmV3YXJkTm9kZVByZS5qcyIsImFzc2V0cy9TY3JpcHQvZ2FtZS5qcyIsImFzc2V0cy9TY3JpcHQvbmV0d29yay9hZXMvbWQ1LmpzIiwiYXNzZXRzL1NjcmlwdC9uZXR3b3JrL2Flcy9tb2RlLWVjYi5qcyIsImFzc2V0cy9TY3JpcHQvcmV3YXJkTm9kZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7QUFDQTs7QUFFRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFSdUI7O0FBY3pCO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7O0FBS0o7QUFDQTs7QUFFSTtBQUNBO0FBQ0k7QUFFSTtBQUNBO0FBRUc7QUFDRjtBQUVBO0FBQ0o7O0FBR0w7QUFFSTtBQUNBO0FBRUk7QUFDSDtBQUNEO0FBQ0E7QUFHQztBQUNKOztBQUVEO0FBRUk7QUFDQTtBQUVJO0FBQ0g7QUFFQTtBQUNKO0FBR0E7QUFFSjs7QUF4REk7O0FBNkRUO0FBQ0k7QUFEYTs7Ozs7Ozs7OztBQzVFakI7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBRlE7QUFEUTs7QUFPeEI7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBSEc7QUFEQTs7QUFRWDtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQWhEaUI7O0FBbUR0QjtBQUNJO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDSjtBQWhDa0I7O0FBbUN2Qjs7QUFFSTtBQUNJO0FBQ0E7O0FBRUE7O0FBRUk7QUFFSTtBQUNBO0FBQ0g7QUFDRDtBQUVIOztBQUVEOztBQUVJO0FBQ0k7QUFDSDtBQUNKO0FBcEJLOztBQXVCVjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFLSjtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNIO0FBRUc7QUFDSDtBQUNEO0FBQ0E7O0FBRUg7QUFDSjs7QUFLRDtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7OztBQUlIOztBQUVEO0FBQ0k7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7Ozs7O0FBTUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQVM7QUFDVDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFUSjtBQVdIO0FBQ0o7QUFDSjtBQUVHO0FBQ0g7QUFDSjtBQUNHOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7O0FBS0M7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUFTO0FBQ0w7QUFDSDtBQUNEO0FBQ0E7QUFBUztBQUNMO0FBQ0g7QUFDRDtBQUNBO0FBQVM7QUFDTDtBQUNIO0FBQ0Q7QUFDQTtBQUFTO0FBQ0w7QUFDSDtBQUNEO0FBQ0E7QUFBUztBQUNMO0FBQ0g7QUFDRDtBQUNBO0FBQVM7QUFDTDtBQUNIO0FBQ0Q7QUFDQTtBQUFTO0FBQ047QUFDRjtBQUNEO0FBQ0E7QUFBVztBQUNSO0FBQ0Y7QUFDRDtBQUNBO0FBQ0E7QUFsQ0o7QUFvQ0g7O0FBRUY7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBSUc7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSDs7QUFFRDs7O0FBR0M7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSDs7QUFFRDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0g7O0FBRUQ7OztBQUdEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTjs7Ozs7Ozs7Ozs7QUFZRzs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOzs7OztBQUtBO0FBQ0k7QUFDSTtBQUNIO0FBRUc7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7Ozs7OztBQU1BO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBem1CbUI7O0FBNG1CeEI7QUFDSTtBQURhOzs7Ozs7Ozs7O0FDOXNCakI7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUZHO0FBSVA7QUFDQTtBQU5ROztBQVNaO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFsQks7Ozs7Ozs7Ozs7QUNBVDtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUUTs7QUFZWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7O0FBRUE7QUFFSTtBQUNIOztBQUVEO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7O0FBRUE7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDQTs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFDQTtBQUNIO0FBbkhJOzs7Ozs7Ozs7O0FDSFQ7QUFDQTs7QUFFQTtBQUNJOztBQUVBOzs7O0FBSUE7QUFDSTtBQUNBO0FBQ0k7O0FBR0k7O0FBRUE7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0g7QUFFRztBQUNIO0FBQ0Q7QUFDQTs7QUFFSDs7QUFHRDtBQUNBOztBQUVBOztBQUVBO0FBQ0k7QUFDQTtBQUNNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNMO0FBQ0c7QUFDSDtBQUNKO0FBQ0Y7QUFDTjtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFFRztBQUNIO0FBRUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDUDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBL0ZJOzs7Ozs7Ozs7O0FDRlQ7QUFDSTtBQUNJO0FBQ0E7O0FBRUE7O0FBRUk7QUFFSTtBQUNBO0FBQ0g7QUFDRDtBQUVIOztBQUVEOztBQUVJO0FBQ0k7QUFDSDtBQUNKO0FBcEJLOztBQXVCVjtBQUNJO0FBQ0E7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBMUJROztBQTZCWjs7QUFJQTtBQXpEbUI7O0FBNkR2QjtBQUNJO0FBRGE7Ozs7Ozs7Ozs7QUM5RGpCO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUUTs7QUFZWjtBQUNBO0FBQ0c7QUFDSztBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQWpDSTs7Ozs7Ozs7OztBQ0FUOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUk7QUFDSTtBQUNBO0FBRm9COztBQUt4Qjs7QUFFQTtBQUNJO0FBQ0E7QUFGUzs7QUFLYjs7QUFFQTtBQUNJO0FBQ0E7QUFGTzs7QUFLWDtBQUNJO0FBQ0E7QUFGUzs7QUFLYjtBQUNJO0FBQ0E7QUFGYTs7QUFLakI7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUdKO0FBQ0E7QUFDSTs7QUFJQTtBQUNJO0FBQ0E7QUFDSTtBQUNDO0FBQ0Q7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOzs7O0FBSUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSTtBQUNIO0FBRUc7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNKO0FBQ0o7QUFLRztBQUNJO0FBQ0g7QUFFRztBQUNIOztBQUVEO0FBQ0g7QUFFRztBQUNBO0FBQ0k7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7OztBQUtBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUVHO0FBQ0E7QUFDSTtBQUNIO0FBRUc7QUFDSDtBQUVHO0FBQ0g7O0FBRUQ7Ozs7OztBQU1IO0FBRUc7QUFDQTs7Ozs7O0FBTUg7QUFFRztBQUNBOzs7Ozs7QUFNSDtBQUNEO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7O0FBRUE7O0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUVHO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUVHO0FBQ0g7QUFFRztBQUNIOztBQUVEO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFFSTtBQUVRO0FBRUk7QUFDSDs7QUFFRDs7QUFFSTtBQUVRO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFDRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFyQko7QUF1QkE7QUFDQTtBQUVQO0FBR1o7O0FBRUc7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBRUk7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdKO0FBQ0o7O0FBRUQ7QUFFSTtBQUVJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFFRDtBQUNJO0FBQ0g7QUFFRDtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUdMOztBQUVRO0FBRUk7QUFDSDtBQUdHO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFHRztBQUNIO0FBRUo7QUFFUjs7QUFFRDtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDSDs7QUFFRDtBQUVJO0FBQ0E7QUFDSDs7QUFFRDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNIO0FBRUc7QUFDSDs7QUFHRDtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUVHO0FBQ0g7O0FBRUQ7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFFSDtBQUVKOztBQUVEO0FBRUk7QUFDQTtBQUNDO0FBQ0E7QUFFRztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0g7QUFFTDs7QUFHRDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFFRztBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDSDtBQUNEO0FBRUk7QUFDQTtBQUVJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBQ0Q7QUFFSDtBQUVKOztBQUVEOzs7QUFHQTtBQUVJO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFFRztBQUNIO0FBQ0Q7QUFDSDs7QUFFRDs7OztBQUlBOztBQUlBO0FBQ0E7O0FBRUE7QUExbkJLOzs7Ozs7Ozs7O0FDRlQ7QUFDSTs7QUFFQTs7QUFHQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNDO0FBQ0k7O0FBRUE7QUFFSTtBQUNIOztBQUVEO0FBQ0g7QUFyQkc7Ozs7Ozs7Ozs7QUNBVDtBQUFnTDtBQUFtUjtBQUFnQztBQUFVO0FBQVU7QUFBSztBQUFnQjtBQUFDO0FBQXdDO0FBQWdjO0FBQU87QUFBSztBQUFpQztBQUFDO0FBQUM7QUFBdUc7QUFBNE07QUFBa0I7QUFBbUM7QUFBSztBQUFnRDtBQUFrSTtBQUFLO0FBQWdDO0FBQWlGO0FBQUM7QUFBZ0Q7QUFBQztBQUEwRjtBQUF5QztBQUF5QjtBQUFLO0FBQTJCO0FBQXlCO0FBQTJCO0FBQUs7QUFBbUo7QUFBQztBQUFDO0FBQWlDO0FBQTRGO0FBQWlDO0FBQW1PO0FBQTJGO0FBQW1OO0FBQWdlO0FBQThmO0FBQXVEOzs7Ozs7Ozs7O0FDQXp6SDtBQUF5RTtBQUEyVjtBQUFpRDtBQUFtQztBQUFpRDtBQUFrQztBQUFtRjtBQUFrQjtBQUF3RDtBQUE4QjtBQUFnRDtBQUErQjtBQUFlO0FBQXlCO0FBQW9FO0FBQTRGO0FBQW1DO0FBQXlCO0FBQTJCO0FBQUs7QUFBMEI7QUFBQztBQUF3QjtBQUF5QztBQUFpRTtBQUFzQztBQUFvRTtBQUFFO0FBQUM7QUFBZ0Y7QUFBOEU7QUFBK0g7QUFBd0M7QUFBcUM7QUFBd0M7QUFBMEI7QUFBZ0M7QUFBa0M7QUFBK0Y7QUFBeUw7QUFBaUU7QUFBaU47QUFBNkM7QUFBdUI7QUFBZ0M7QUFBSztBQUEwQjtBQUE2QjtBQUEwQjtBQUFDO0FBQVc7QUFBMkU7QUFBNE87QUFBK0I7QUFBOEU7QUFBc0I7QUFBcUY7QUFBb0g7QUFBbUg7QUFBcUM7QUFBSztBQUEyRDtBQUFvRDtBQUF3QztBQUFzQztBQUF3QjtBQUF1RTtBQUF5RjtBQUFLO0FBQXNGO0FBQTRCO0FBQWlHO0FBQXlCO0FBQThCO0FBQWtEO0FBQW9HO0FBQTJFO0FBQXdGO0FBQUs7QUFBeUI7QUFBa0M7QUFBNEI7QUFBZ0o7QUFBMEc7QUFBOEQ7QUFBbUo7QUFDajJKO0FBQWdUO0FBQTZDO0FBQXNLO0FBQW9DO0FBQWdDO0FBQXFDO0FBQUs7QUFBa0I7QUFBQztBQUFtRztBQUFVO0FBQTRCO0FBQStNO0FBQWlMO0FBQXNRO0FBQWtEO0FBQXFTO0FBQUc7Ozs7Ozs7Ozs7QUNBanZEOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUk7O0FBRUE7QUFFSTtBQUNBO0FBRko7O0FBS0E7QUFFSTtBQUNBO0FBRko7O0FBS0E7QUFFSTtBQUNBO0FBRko7O0FBS0E7QUFDSTtBQUNBO0FBRmE7O0FBS2pCO0FBQ0k7QUFDQTtBQUZlOztBQUtuQjtBQUVJO0FBQ0E7QUFGSjs7QUFLQTtBQUNBO0FBQ0E7QUF4Q1E7O0FBNENaO0FBQ0E7O0FBSUE7QUFFSTtBQUNDOztBQUVHO0FBQ0E7QUFFSTtBQUNIO0FBR0c7QUFDSDs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVQOztBQUVEO0FBRUk7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBRUg7O0FBRUQ7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBRUg7O0FBRUQ7QUFDQTtBQUVJO0FBQ0E7QUFFSTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBR0Q7QUFFSTtBQUNBO0FBRUk7QUFFSTtBQUNIO0FBQ0o7QUFFSjs7QUFHRDtBQUNBOztBQUVBO0FBMUpLOzs7Ozs7Ozs7O0FDSFQ7QUFBaUQ7QUFBNEQ7QUFBZ0Q7QUFBbUQ7QUFBeUI7QUFBb0M7QUFBd0I7QUFBMEM7QUFBQztBQUFrRTtBQUFtQjtBQUFtRjtBQUE4QztBQUFvQztBQUE0QztBQUE0QztBQUFDO0FBQTBDO0FBQWtDO0FBQUM7QUFBa0I7QUFBd0M7QUFBRTtBQUE2RTtBQUFtRDtBQUF1QjtBQUFLO0FBQTZCO0FBQUM7QUFBNEI7QUFBcUM7QUFBNEI7QUFBMEo7QUFBZ0M7QUFBMEg7QUFBQztBQUFLO0FBQWlDO0FBQWlEO0FBQUM7QUFBd0M7QUFBa0I7QUFBd0k7QUFBa0I7QUFBNkU7QUFBeUI7QUFBa0M7QUFBb0U7QUFBb0w7QUFBQztBQUFvQztBQUFtRztBQUF3QztBQUF1RTtBQUFzRztBQUF3SDtBQUF5QjtBQUF3QjtBQUE2RTtBQUE0RDtBQUFnRDtBQUF5RDtBQUF5RztBQUF1RjtBQUE0QjtBQUEyQjtBQUFxRjtBQUEwRDtBQUFpRDtBQUFxRDtBQUFJO0FBQStEO0FBQVM7QUFBd0M7QUFBQztBQUF5QjtBQUEyRDtBQUF3RjtBQUFtRDtBQUF3QjtBQUEwQjtBQUFzQjtBQUF3RDtBQUE0QjtBQUFpTTtBQUFxQztBQUFLO0FBQThEO0FBQTRHO0FBQXVEO0FBQXVDO0FBQThFO0FBQXNEO0FBQWtCO0FBQTRFO0FBQWdIO0FBQTJDO0FBQWtCO0FBQXdEO0FBQWdDO0FBQXdEO0FBQWtDO0FBQWtCO0FBQTRCO0FBQ3QxSjtBQUFZO0FBQWlEO0FBQTZCO0FBQThDO0FBQUM7QUFBb0M7QUFBNkI7QUFBMEQ7QUFBQztBQUFpQzs7Ozs7Ozs7OztBQ0QxUztBQUEyQztBQUFvSTtBQUE4STtBQUF5TztBQUF1RDtBQUFDO0FBQStDO0FBQTRCO0FBQThCO0FBQUM7QUFBNEI7QUFBMkI7QUFBc0c7QUFBcUU7QUFBNkI7QUFBQztBQUE2RDtBQUFRO0FBQTRNO0FBQUM7QUFBc0M7QUFBMkU7Ozs7Ozs7Ozs7QUNDMzBDOztBQUVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVJ1QjtBQVd6QjtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRlc7QUFJZjtBQUNBO0FBQ0k7QUFDQTtBQUZZO0FBSWhCO0FBQ0E7O0FBZFE7O0FBa0JaO0FBQ0E7QUFDSTtBQUNLO0FBQ0o7O0FBRUQ7QUFDSztBQUNEO0FBQ0E7QUFFSDs7QUFFRDtBQUNLO0FBQ0o7O0FBRUQ7QUFDSztBQUNKOztBQUVEO0FBQ0s7QUFDRDtBQUNBO0FBRUg7O0FBRUQ7QUFDSztBQUNKO0FBRUo7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUNIOztBQUVEO0FBRUk7QUFFSTtBQUNIOztBQUVEO0FBRUk7QUFDSDtBQUNKOztBQTFHSTs7Ozs7Ozs7OztBQ1pUO0FBQTJDO0FBQXlPO0FBQThCO0FBQWlDO0FBQW1OO0FBQVU7QUFBcUI7QUFBOEY7QUFBNEM7QUFBeUI7QUFBZ0Q7QUFBd0M7QUFBaUQ7QUFBQzs7Ozs7Ozs7OztBQ0NsM0I7O0FBRUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUnFCOztBQWF2QjtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFGZTtBQUluQjtBQU5ROztBQVNaO0FBQ0E7O0FBSUE7Ozs7QUFJQTs7QUFHSTtBQUVJO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFDSjtBQUdKOztBQUVEOzs7O0FBSUE7QUFFSTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7OztBQVNBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQXpGSTs7QUFpR1Q7QUFDSTtBQURhOzs7Ozs7Ozs7O0FDL0dqQjtBQUNJOztBQUVBOztBQUVJO0FBRUk7QUFDQTtBQUZKO0FBSFE7O0FBU1o7QUFDQTs7QUFJQTtBQUVJO0FBRUk7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUVKO0FBQ0o7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFHQTtBQUNIO0FBL0NJOzs7Ozs7Ozs7O0FDQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0k7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNJO0FBQ0E7QUFGTzs7QUFLWDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRlE7QUFJWjtBQUNJO0FBQ0E7QUFGSztBQUlUO0FBQ0k7QUFDQTtBQUZLO0FBSVQ7QUFDRTtBQUNBO0FBRmE7O0FBS2Y7QUFDQTtBQUNJO0FBQ0E7QUFGVzs7QUFLZjtBQUNBO0FBQ0k7QUFDQTtBQUZTO0FBSWI7QUFDSTtBQUNBO0FBRlU7O0FBS2Q7QUFDQTtBQUNJO0FBQ0E7QUFGTzs7QUFLWDtBQUNJO0FBQ0E7QUFGaUI7O0FBS3JCO0FBQ0k7QUFDQTtBQUZpQjs7QUFLckI7QUFDSTtBQUNBO0FBRmdCOztBQUtwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBOUVROztBQWtGWjtBQUNBOztBQUVJO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBRUc7QUFDQTtBQUNIO0FBRUc7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVIOztBQUdEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNIO0FBQ0w7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUVLOztBQUVEO0FBRUk7QUFDSDtBQUNHOztBQUdJOztBQUdFO0FBQ0E7QUFDSTtBQUNIO0FBRUQ7O0FBRUU7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBRUk7QUFDSDtBQUNGO0FBQ0Y7QUFDSjtBQUdHO0FBQ0g7QUFDSjtBQUdFO0FBQ0Y7QUFFSDs7QUFFRjtBQUNJO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQXNCO0FBQ2xCO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTtBQUNIO0FBQ0o7QUFFRztBQUNIO0FBQ0o7QUFFRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNIO0FBRUc7QUFDSDs7QUFFRDtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFFSTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUVHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUdBO0FBRUk7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUVJO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUVEO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNIO0FBRUc7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUVHO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQU87QUFDSDtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQU87QUFDSDs7QUFFSDtBQUNEO0FBQ0E7QUFDQTtBQWpESjtBQW1ESDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0g7QUFFRztBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDQTtBQUVJO0FBQ0g7QUFDRDtBQUNIO0FBRUQ7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBR0c7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRztBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFPO0FBQ0g7QUFFSTtBQUFTO0FBQ1Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUFTO0FBQ1Q7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0E7QUFBUztBQUNUO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFBUztBQUNUO0FBQ0k7O0FBRUE7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUFTO0FBQ1Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUNBO0FBQVM7QUFDVDtBQUNBO0FBQ0E7QUFBUztBQUNUO0FBQ0E7QUFsREo7QUFvREg7QUFDRDtBQUNBO0FBQVk7QUFDUjtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSjtBQUFZO0FBQ1o7QUFHQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRUk7QUFBUztBQUNMO0FBQ0k7O0FBRUE7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUVJO0FBRUk7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBN0JSO0FBK0JIO0FBQ0Q7QUF4R0E7QUEyR0g7QUFDRDtBQUNBO0FBQ0E7QUFFSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFFRDtBQUNJO0FBQ0g7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFFSDs7QUFFRDtBQUVJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUVJO0FBRUk7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEOztBQUVBO0FBQ0k7QUEzQ1I7QUE4Q0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFFSTtBQUVJO0FBQ0k7QUFDSTtBQUNBO0FBRUk7QUFDQTtBQUNIO0FBV0c7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDSDtBQVdKO0FBQ0Q7QUFDSjtBQUNJO0FBR0E7QUFDSjtBQUNJO0FBQ0E7QUFqRFI7QUFtREg7QUFHRztBQUVJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQVZSO0FBWUg7QUFDSjs7QUFFRDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUVJO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUdJO0FBQ0g7QUFFRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0k7QUFDSDtBQUVHO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBRUk7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUNKO0FBQ0o7O0FBR0Q7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUVIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTs7QUFFSjtBQUVJO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7O0FBRUQ7QUFDQztBQUVHO0FBQ0g7QUFDSjs7QUF2N0JJOzs7Ozs7Ozs7O0FDWFQ7QUFBK0M7QUFBNEg7QUFBc0I7QUFBNEM7QUFBQztBQUEwRDtBQUE0RTtBQUFvQztBQUFzQjtBQUErSjtBQUF5ckY7QUFBd0I7QUFBc25CO0FBQXNGO0FBQVk7QUFBa0I7QUFBOEU7QUFBOEI7QUFBeUQ7QUFBMkI7QUFBeUQ7QUFBMkI7QUFBa0Q7QUFBMkI7QUFBcUQ7QUFBd0U7Ozs7Ozs7Ozs7QUNBdCtJO0FBQTZEO0FBQTRHO0FBQXdDO0FBQWlFO0FBQXdDO0FBQWM7Ozs7Ozs7Ozs7QUNBeFU7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBT1o7QUFDQTtBQUNJO0FBQ0s7QUFDSjs7QUFFRDtBQUNLO0FBQ0E7QUFDRDtBQUNBO0FBRUg7O0FBRUQ7O0FBRUk7QUFHQztBQUNSOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNJO0FBQ0g7QUFFRDtBQUNJO0FBQ0g7QUFFRDtBQUNJO0FBQ0g7QUFFRDtBQUtBO0FBQ0E7QUFDQTtBQUNJO0FBRUk7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUF2RUkiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8v5oyJ6ZKu5qCH6K+GXG52YXIgRWJ1dHRvblRhZyA9IGNjLkVudW0oe1xuXG4gIGVDaGlwMjA6IDAsXG4gIGVDaGlwNTA6IDEsICAgXG4gIGVDaGlwMTAwOiAyLCAgICAgIFxuICBlQ2hpcDUwMDozLCBcbiAgZUNoaXAxMDAwOjQsIFxuICBlQ2xlYXIgOiA1LCAgXG4gIGVIaXN0b3J5TGlzdDogNixcblxufSk7XG5cblxuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBzY2FsZUZsYWc6dHJ1ZSxcbiAgICAgICAgYnV0dG9uVGFnOjAsXG4gICAgICAgIHBhcmVudE5vZGU6IGNjLk5vZGUsLy/niLboioLngrko5Li65LqG57uT5bGA54K55Ye75Yy65Z+f57yp5ZCOIOS6i+S7tuS4jeWTjeW6lCDnu5/nu5/liqDkuobniLboioLngrnmnaXlpITnkIbkuovku7bvvIzlr7nlrZDoioLngrnnvKnmlL4gMjAxNy0wNC0xMCBQTTozNDApXG4gICAgICAgIFxuICAgIH0sXG5cblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIHZhciB0aW1lQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuc2NhbGVGbGFnKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUuc2NhbGUgPSAwLjg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSx0aGlzKTsgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgXG4gICAgICAgIGlmKHRoaXMucGFyZW50Tm9kZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCxmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICBpZih0aGlzLnNjYWxlRmxhZylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuc2NhbGUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9uRnVuY3Rpb24gPSBjYy5maW5kKCdDYW52YXMnKS5nZXRDb21wb25lbnQoJ2dhbWUnKTtcbiAgICAgICAgICAgIG9uRnVuY3Rpb24uYnRuQWN0aW9uQ2FsbEJhY2sodGhpcy5idXR0b25UYWcpO1xuXG4gICAgICAgICAgIFxuICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMucGFyZW50Tm9kZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCxmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICBpZih0aGlzLnNjYWxlRmxhZylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuc2NhbGUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0sXG5cblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEVidXR0b25UYWcgOiBFYnV0dG9uVGFnLFxufTtcblxuXG5cbiIsIlxudmFyIENyeXB0b0pTID0gcmVxdWlyZShcImNvcmVcIik7XG5yZXF1aXJlKFwiYWVzXCIpO1xudmFyIE5ldERhdGEgPSByZXF1aXJlKFwiTmV0RGF0YVwiKTtcblxudmFyIEtleVZhbHVlID0gY2MuQ2xhc3Moe1xuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAga2V5IDogXCJcIixcbiAgICAgICAgdmFsdWUgOiBcIlwiXG4gICAgfVxufSk7XG5cbnZhciBDdXNNYXAgPSBjYy5DbGFzcyh7XG4gICAgcHJvcGVydGllczp7XG4gICAgICAgIG1hcHMgOiB7XG4gICAgICAgICAgICBkZWZhdWx0IDogW10sXG4gICAgICAgICAgICB0eXBlIDogW0tleVZhbHVlXSxcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgc2V0IDogZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgICAgIHZhciBzX2tleSA9IGtleS50b1N0cmluZygpO1xuICAgICAgICB2YXIgZmxhZyA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMubWFwcy5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICBpZih0aGlzLm1hcHNbaV0ua2V5ID09PSBzX2tleSl7XG4gICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBzW2ldLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKGZsYWcgPT09IGZhbHNlKXtcbiAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IG5ldyBLZXlWYWx1ZSgpO1xuICAgICAgICAgICAga2V5VmFsdWUua2V5ID0gc19rZXk7XG4gICAgICAgICAgICBrZXlWYWx1ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5tYXBzLnB1c2goa2V5VmFsdWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICBnZXQgOiBmdW5jdGlvbihrZXkpe1xuICAgICAgICB2YXIgc19rZXkgPSBrZXkudG9TdHJpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcHMubGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgaWYodGhpcy5tYXBzW2ldLmtleSA9PT0gc19rZXkpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcHNbaV0udmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICBjbGVhciA6IGZ1bmN0aW9uKGtleSl7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcHMubGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgaWYodGhpcy5tYXBzW2ldLmtleSA9PSBrZXkpe1xuICAgICAgICAgICAgICAgIHRoaXMubWFwcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxudmFyIE5ldFdvcmsgPSBjYy5DbGFzcyh7XG4gICAgc2VuZCA6IGZ1bmN0aW9uKHJlcXVlc3RJZCwgcmVxdWVzdEhlYWRlcnMsIHJlcXVlc3REYXRhLCBjYWxsZnVuYyl7XG4gICAgICAgIHZhciB4aHIgPSBjYy5sb2FkZXIuZ2V0WE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICBpZiAoIUNDX0pTQil7XG4gICAgICAgICAgICBpZiAod2luZG93LmFsaUxvdHRlcnlDYXNpbm9TREspIHtcbiAgICAgICAgICAgICAgICB4aHIgPSB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESy5nZXRIdHRwUmVxdWVzdE9iamVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIFwiaHR0cDovLzEwLjAuMjAuMTcyOjgwODAvZ2F0ZXdheS9wcm9jZXNzXCIpO1xuICAgICAgICAvL3hoci5vcGVuKFwiUE9TVFwiLCBcImh0dHA6Ly8xNzIuMTYuMjAuMTYxOjcwODAvZ2F0ZXdheS9wcm9jZXNzXCIpOy8vXCJodHRwOi8vMTcyLjE2LjIwLjE3NTo4MDgwL2dhdGV3YXkvcHJvY2Vzc1wiKTsgLy9cImh0dHA6Ly8xMC4wLjEuMjMyOjcwODAvbmV3X2dhdGV3YXkvcHJvY2Vzc1wiKTsgXG4gICAgICAgIHhoci50aW1lb3V0ID0gMTUwMDA7Ly8xNXPotoXml7ZcbiAgICAgICAgXG4gICAgICAgIC8v6K6+572u6K+35rGC5aS0XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXF1ZXN0SGVhZGVycy5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihyZXF1ZXN0SGVhZGVyc1tpXS5rZXksIHJlcXVlc3RIZWFkZXJzW2ldLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgeGhyLnNlbmQocmVxdWVzdERhdGEpO1xuICAgIFxuICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FsbGZ1bmMocmVxdWVzdElkLCB4aHIpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY2FsbGZ1bmMocmVxdWVzdElkLCB4aHIpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjYWxsZnVuYyhyZXF1ZXN0SWQsIHhocik7XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbnZhciBEYXRhT3BlciA9IGNjLkNsYXNzKHtcbiAgICBcbiAgICBzdGF0aWNzIDoge1xuICAgICAgICBnX0RhdGFPcGVySW5zdCA6IG51bGwsXG4gICAgICAgIHNfaW5kZXggOiAwLFxuICAgICAgICBcbiAgICAgICAgZ2V0SW5zdDpmdW5jdGlvbigpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihEYXRhT3Blci5nX0RhdGFPcGVySW5zdCA9PT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBEYXRhT3Blci5nX0RhdGFPcGVySW5zdCA9IG5ldyBEYXRhT3BlcigpO1xuICAgICAgICAgICAgICAgIERhdGFPcGVyLmdfRGF0YU9wZXJJbnN0LmluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBEYXRhT3Blci5nX0RhdGFPcGVySW5zdDtcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuXG4gICAgICAgIGRlc3RvcnlJbnN0OmZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKERhdGFPcGVyLmdfRGF0YU9wZXJJbnN0ICE9PSBudWxsKXtcbiAgICAgICAgICAgICAgICBEYXRhT3Blci5nX0RhdGFPcGVySW5zdCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcHJvcGVydGllcyA6IHtcbiAgICAgICAgLy/or7fmsYJkYXRhXG4gICAgICAgIHJlcXVlc3REYXRhIDogXCJcIixcbiAgICAgICAgLy/or7fmsYJpZFxuICAgICAgICByZXF1ZXN0SWQgOiAwLFxuICAgICAgICAvL2FlcyBLZXlcbiAgICAgICAgYWVzS2V5IDogXCI4MTdmZWQ5NWY5ZTE2YmVkXCIsLy/np5jpkqXvvIzlhpnmrbtcbiAgICAgICAgXG4gICAgICAgIC8vKioqKioqKioqKioqKioqKuivt+axguWktOS/oeaBryoqKioqKioqKipcbiAgICAgICAgLy/or7fmsYLlpLTmlbDnu4RcbiAgICAgICAgcmVxdWVzdEhlYWRlcnMgOiB7XG4gICAgICAgICAgICBkZWZhdWx0IDogW10sXG4gICAgICAgICAgICB0eXBlIDogW0tleVZhbHVlXSxcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgLy/lkb3ku6Tlj7dcbiAgICAgICAgaGVhZGVyQ21kIDogMCwgLy/liJ3lp4vljJYtMTAwICDmipXms6gtMTAxICDnu5PnrpctMTAzXG4gICAgICAgIC8vc2lnXG4gICAgICAgIGhlYWRlclNpZyA6IFwiXCIsXG4gICAgICAgIC8v54mI5pys5Y+3XG4gICAgICAgIGhlYWRlclZlciA6IFwiMS4wXCIsXG4gICAgICAgIC8v5Lya6K+d5qCH6K+GXG4gICAgICAgIGhlYWRlclRva2VuIDogXCIzNzA2MjAxNzc5XCIsLy9cIjM3MDYyMDE3NzlcIixcbiAgICAgICAgLy/muLjmiI/muKDpgZPlrp7kvovmoIfor4ZcbiAgICAgICAgZ2FtZVRva2VuIDogXCJhZDgwZGI5OTRkYWJiOTBiNDJkYjAwMjE0YjhkMzAxZC05LTkwMS0xMjAyXCIsLy9cImRkZDc2Y2Q2ZTliNjJkYzIyNTlhYTc3MmE0NTAxYjIyLTktOTUxLTkyNlwiLFxuICAgICAgICAvL+a4uOaIj+agh+ivhlxuICAgICAgICAvL2hlYWRlckdpZCA6IFwiMTAwMDRcIiAgLy/mr4/kuKrmuLjmiI/lnKjov5nph4zlhpnmrbsgIOWQjOiKsemhui0xMDAwMCAg5bCP5oCq6IGU55ufLTEwMDAxICDml5flvIDlvpfog5wtMTAwMDIg5aWH5bm75a6d55+zLTEwMDAzIOiAgeiZjuacui0xMDAwNCDlnLDkuqflpKfkuqgtMTAwMDVcbiAgICB9LFxuICAgIFxuICAgIGluaXQgOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmNhbGxmdW5jcyA9IG5ldyBDdXNNYXAoKTtcbiAgICAgICAgdGhpcy5jYWxsbm9kZSA9IG5ldyBDdXNNYXAoKTtcbiAgICAgICAgdGhpcy5jYWxsY21kID0gbmV3IEN1c01hcCgpO1xuICAgICAgICBjYy5sb2coXCJqYj1cIiArIENDX0pTQik7XG4gICAgICAgIFxuICAgICAgICBpZiAoIUNDX0pTQil7XG4gICAgICAgICAgICB0aGlzLmdhbWVUb2tlbiA9IHRoaXMuR2V0UXVlcnlTdHJpbmcoXCJhY2Nlc3NUb2tlblwiKTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZih0aGlzLmdhbWVUb2tlbiA9PSBudWxsKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lVG9rZW4gPSBcImFkODBkYjk5NGRhYmI5MGI0MmRiMDAyMTRiOGQzMDFkLTktOTAxLTEyMDJcIjsvL1wiZGRkNzZjZDZlOWI2MmRjMjI1OWFhNzcyYTQ1MDFiMjItOS05NTEtOTI2XCI7XG4gICAgICAgICAgICAgICAgbGV0IHRvayA9IHRoaXMuR2V0UXVlcnlTdHJpbmcoXCJ0b2tcIik7XG5cbiAgICAgICAgICAgICAgICBpZih0b2spe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRva2VuID0gdG9rO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvaz1cIiArIHRoaXMuaGVhZGVyVG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRva2VuID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy90ZXN0XG4gICAgICAgICAgICAgICAgLyp2YXIgbXlEYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRva2VuID0gbXlEYXRlLmdldFRpbWUoKTsqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG5cbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzLmdhbWVUb2tlbiA9IFwiICsgdGhpcy5nYW1lVG9rZW4pO1xuICAgIH0sXG5cbiAgICBHZXRRdWVyeVN0cmluZyA6IGZ1bmN0aW9uKG5hbWUpXG4gICAge1xuICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cChcIihefCYpXCIrIG5hbWUgK1wiPShbXiZdKikoJnwkKVwiKTtcbiAgICAgICAgdmFyIHIgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5tYXRjaChyZWcpO1xuICAgICAgICBpZihyIT09bnVsbClyZXR1cm4gIHVuZXNjYXBlKHJbMl0pOyByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIFxuICAgIHNldFJlcXVlc3RIZWFkZXIgOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLnJlcXVlc3RIZWFkZXJzID0gW107XG5cbiAgICAgICAgdmFyIGtleVZhbHVlID0gbmV3IEtleVZhbHVlKCk7XG4gICAgICAgIGtleVZhbHVlLmtleSA9IFwiY21kXCI7XG4gICAgICAgIGtleVZhbHVlLnZhbHVlID0gdGhpcy5oZWFkZXJDbWQudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SGVhZGVycy5wdXNoKGtleVZhbHVlKTtcbiAgICAgICAgXG4gICAgICAgIGtleVZhbHVlID0gbmV3IEtleVZhbHVlKCk7XG4gICAgICAgIGtleVZhbHVlLmtleSA9IFwiQ29udGVudC1UeXBlXCI7XG4gICAgICAgIGtleVZhbHVlLnZhbHVlID0gXCJ0ZXh0L3BsYWluXCI7XG4gICAgICAgIHRoaXMucmVxdWVzdEhlYWRlcnMucHVzaChrZXlWYWx1ZSk7XG4gICAgICAgIFxuICAgICAgICAvKmtleVZhbHVlID0gbmV3IEtleVZhbHVlKCk7XG4gICAgICAgIGtleVZhbHVlLmtleSA9IFwiY2lkXCI7XG4gICAgICAgIGtleVZhbHVlLnZhbHVlID0gdGhpcy5oZWFkZXJDaWQudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SGVhZGVycy5wdXNoKGtleVZhbHVlKTsqL1xuICAgICAgICBcbiAgICAgICAga2V5VmFsdWUgPSBuZXcgS2V5VmFsdWUoKTtcbiAgICAgICAga2V5VmFsdWUua2V5ID0gXCJzaWdcIjtcbiAgICAgICAga2V5VmFsdWUudmFsdWUgPSB0aGlzLmhlYWRlclNpZy50b1N0cmluZygpO1xuICAgICAgICB0aGlzLnJlcXVlc3RIZWFkZXJzLnB1c2goa2V5VmFsdWUpO1xuICAgICAgICBcbiAgICAgICAga2V5VmFsdWUgPSBuZXcgS2V5VmFsdWUoKTtcbiAgICAgICAga2V5VmFsdWUua2V5ID0gXCJ2ZXJcIjtcbiAgICAgICAga2V5VmFsdWUudmFsdWUgPSB0aGlzLmhlYWRlclZlci50b1N0cmluZygpO1xuICAgICAgICB0aGlzLnJlcXVlc3RIZWFkZXJzLnB1c2goa2V5VmFsdWUpO1xuICAgICAgICBcbiAgICAgICAga2V5VmFsdWUgPSBuZXcgS2V5VmFsdWUoKTtcbiAgICAgICAga2V5VmFsdWUua2V5ID0gXCJ0b2tcIjtcbiAgICAgICAga2V5VmFsdWUudmFsdWUgPSB0aGlzLmhlYWRlclRva2VuLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMucmVxdWVzdEhlYWRlcnMucHVzaChrZXlWYWx1ZSk7XG5cbiAgICAgICAga2V5VmFsdWUgPSBuZXcgS2V5VmFsdWUoKTtcbiAgICAgICAga2V5VmFsdWUua2V5ID0gXCJnYW1lVG9rZW5cIjtcbiAgICAgICAga2V5VmFsdWUudmFsdWUgPSB0aGlzLmdhbWVUb2tlbi50b1N0cmluZygpO1xuICAgICAgICB0aGlzLnJlcXVlc3RIZWFkZXJzLnB1c2goa2V5VmFsdWUpO1xuICAgICAgICBcbiAgICAgICAgLyprZXlWYWx1ZSA9IG5ldyBLZXlWYWx1ZSgpO1xuICAgICAgICBrZXlWYWx1ZS5rZXkgPSBcImdpZFwiO1xuICAgICAgICBrZXlWYWx1ZS52YWx1ZSA9IHRoaXMuaGVhZGVyR2lkLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMucmVxdWVzdEhlYWRlcnMucHVzaChrZXlWYWx1ZSk7Ki9cbiAgICB9LFxuICAgIFxuICAgIHJlcXVlc3QgOiBmdW5jdGlvbihjYWxsRnVuYywgc2VsZil7XG4gICAgICAgIGlmKHRoaXMuaGVhZGVyQ21kICE9IDEwNSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcXVlc3QtLS0tLS0tLS0tLWRhdGEgPSBcIiArIHRoaXMucmVxdWVzdERhdGEgKyBcIjtjbWQ6XCIgKyB0aGlzLmhlYWRlckNtZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2FsbGZ1bmNzLnNldChEYXRhT3Blci5zX2luZGV4LCBjYWxsRnVuYyk7XG4gICAgICAgIHRoaXMuY2FsbG5vZGUuc2V0KERhdGFPcGVyLnNfaW5kZXgsIHNlbGYpO1xuICAgICAgICB0aGlzLmNhbGxjbWQuc2V0KERhdGFPcGVyLnNfaW5kZXgsIHRoaXMuaGVhZGVyQ21kKTtcbiAgICAgICAgLy9hZXPliqDlr4ZcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSA9IHRoaXMuQUVTRW5jcnlwdGlvbih0aGlzLnJlcXVlc3REYXRhLCB0aGlzLmFlc0tleSk7XG4gICAgICAgIC8vQmFzZTY0XG4gICAgICAgIC8vdGhpcy5yZXF1ZXN0RGF0YSA9IEJhc2U2NC5lbmNvZGUodGhpcy5yZXF1ZXN0RGF0YSk7XG4gICAgICAgIC8vZ3ppcFxuICAgICAgICAvL3RoaXMucmVxdWVzdERhdGEgPSB0aGlzLnJlcXVlc3REYXRhO1xuICAgICAgICAvL21kNVxuICAgICAgICB0aGlzLmhlYWRlclNpZyA9IENyeXB0b0pTLk1ENSh0aGlzLnJlcXVlc3REYXRhKTtcbiAgICAgICAgLy/or7fmsYLlpLRcbiAgICAgICAgdGhpcy5zZXRSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIC8vc2VuZFxuICAgICAgICB2YXIgbmV0V29yayA9IG5ldyBOZXRXb3JrKCk7XG4gICAgICAgIG5ldFdvcmsuc2VuZChEYXRhT3Blci5zX2luZGV4LCB0aGlzLnJlcXVlc3RIZWFkZXJzLCB0aGlzLnJlcXVlc3REYXRhLCB0aGlzLm9uSHR0cFJlcXVlc3RDb21wbGV0ZWQpO1xuICAgICAgICBEYXRhT3Blci5zX2luZGV4Kys7XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiDogZTnvZHlm57osINcbiAgICAgKiBAUGFyYW0gcmVxdWVzdElkIOivt+axgmlkXG4gICAgICogQHBhcmFtIHN0YXR1cyAgIOiBlOe9keeKtuaAgVxuICAgICAqIEBwYXJhbSByZXNwb25lRGF0YSDlk43lupRkYXRhXG4gICAgICovXG4gICAgb25IdHRwUmVxdWVzdENvbXBsZXRlZCA6IGZ1bmN0aW9uKHJlcXVlc3RJZCwgeGhyKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJvbkh0dHBSZXF1ZXN0Q29tcGxldGVkLnhoci5zdGF0dXM9XCIgKyB4aHIuc3RhdHVzKTtcbiAgICAgICAgdmFyIGNhbGxGdW5jID0gRGF0YU9wZXIuZ2V0SW5zdCgpLmNhbGxmdW5jcy5nZXQocmVxdWVzdElkKTtcbiAgICAgICAgdmFyIGNhbGxOb2RlID0gRGF0YU9wZXIuZ2V0SW5zdCgpLmNhbGxub2RlLmdldChyZXF1ZXN0SWQpO1xuICAgICAgICB2YXIgY2FsbENtZCA9IERhdGFPcGVyLmdldEluc3QoKS5jYWxsY21kLmdldChyZXF1ZXN0SWQpO1xuICAgICAgICBjYy5sb2coXCJjYWxsQ21kPVwiICsgY2FsbENtZCArIFwiL2xuPVwiICsgRGF0YU9wZXIuZ2V0SW5zdCgpLmNhbGxjbWQubWFwcy5sZW5ndGggKyBcIidcIiArIERhdGFPcGVyLmdldEluc3QoKS5jYWxsZnVuY3MubWFwcy5sZW5ndGggKyBcIidcIiArIERhdGFPcGVyLmdldEluc3QoKS5jYWxsbm9kZS5tYXBzLmxlbmd0aCk7XG4gICAgICAgIERhdGFPcGVyLmdldEluc3QoKS5jYWxsZnVuY3MuY2xlYXIocmVxdWVzdElkKTtcbiAgICAgICAgRGF0YU9wZXIuZ2V0SW5zdCgpLmNhbGxub2RlLmNsZWFyKHJlcXVlc3RJZCk7XG4gICAgICAgIERhdGFPcGVyLmdldEluc3QoKS5jYWxsY21kLmNsZWFyKHJlcXVlc3RJZCk7XG5cbiAgICAgICAgaWYoKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHx8IHhoci5zdGF0dXMgPT09IDMwNCl7XG4gICAgICAgICAgICAvL+WPlmh0dHDlpLRcbiAgICAgICAgICAgIC8v5ZG95Luk5Y+3XG4gICAgICAgICAgICB2YXIgY21kID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiY21kXCIpO1xuICAgICAgICAgICAgY21kID0gcGFyc2VJbnQoY21kKTtcbiAgICAgICAgICAgIC8vcmVzXG4gICAgICAgICAgICB2YXIgcmVzID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKFwicmVzXCIpO1xuICAgICAgICAgICAgLy9tc2dcbiAgICAgICAgICAgIHZhciBtc2cgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJtc2dcIik7XG4gICAgICAgICAgICBtc2cgPSBkZWNvZGVVUklDb21wb25lbnQobXNnKTtcbiAgICAgICAgICAgIC8vc2lnXG4gICAgICAgICAgICB2YXIgc2lnID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKFwic2lnXCIpO1xuICAgICAgICAgICAgY2MubG9nKFwieGhyLnN0YXR1cz1cIiArIHhoci5zdGF0dXMgKyBcInxyZT1cIiArIHJlcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHJlcyA9PSAwKXtcbiAgICAgICAgICAgICAgICAvL+WPlmJvZHlcbiAgICAgICAgICAgICAgICB2YXIgYm9keSA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgLy9tZDXpqozor4FcbiAgICAgICAgICAgICAgICB2YXIgdF9zaWcgPSBDcnlwdG9KUy5NRDUoYm9keSk7XG4gICAgICAgICAgICAgICAgbGV0IHRfc2lnX3N0ciA9IG5ldyBTdHJpbmcodF9zaWcpO1xuICAgICAgICAgICAgICAgIGxldCBzaWdfc3RyID0gbmV3IFN0cmluZyhzaWcpO1xuICAgICAgICAgICAgICAgIHRfc2lnX3N0ciA9IHRfc2lnX3N0ci50cmltKCk7XG4gICAgICAgICAgICAgICAgc2lnX3N0ciA9IHNpZ19zdHIudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgaWYodF9zaWdfc3RyID09IHNpZ19zdHIpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInZhbGlmeSByaWdodFwiKTtcbiAgICAgICAgICAgICAgICAgICAgRGF0YU9wZXIuZ2V0SW5zdCgpLnBhcnNlclNlcnZlckRhdGEoYm9keSwgY21kKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEZ1bmMoY21kLCByZXMsIG1zZywgY2FsbE5vZGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8v5pu05paw6LSm5oi35L2Z6aKdXG4gICAgICAgICAgICAgICAgICAgIC8v5Yid5aeL5YyW6LCD6L+H5LqG77yM5LiN6LCD5LqG44CCXG4gICAgICAgICAgICAgICAgICAgIGlmICghQ0NfSlNCKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChjbWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwMTovL2JldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwMjovL2NsZWFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTAzOi8vcmV3YXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGlMb3R0ZXJ5Q2FzaW5vU0RLLnVwZGF0ZVVzZXJJbmZvKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEZ1bmMoY21kLCAtMSwgXCLliqDlr4bpqozor4HplJnor69cIiwgY2FsbE5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5oql6ZSZLS0tcmVzOlwiICsgcmVzICsgXCItLS0tbXNnOlwiICsgbXNnKTtcblxuICAgICAgICAgICAgICAgIC8v57qv5Lia5YqhbG9naWNcbiAgICAgICAgICAgICAgICBpZigoY21kID09IDEwMCkgJiYgKHJlcyA9PSA5OTk5OTkpKXtcbiAgICAgICAgICAgICAgICAgICAgTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5pbml0RmxhZyA9IDI7XG4gICAgICAgICAgICAgICAgICAgIE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCkuc3RvcFNlbGxpbmdEZXNjID0gbXNnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2VuZCDkuJrliqFcbiAgICAgICAgICAgICAgICBjYWxsRnVuYyhjbWQsIHJlcywgbXNnLCBjYWxsTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy/ogZTnvZHlpLHotKVcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaHR0cCBzdGF0dXM6XCIgKyB4aHIuc3RhdHVzICsgXCJ8Y2FsbENtZD1cIiArIGNhbGxDbWQpO1xuICAgICAgICAgICAgY2FsbEZ1bmMoY2FsbENtZCwgLTEsIFwi572R57uc5Y+v6IO95LiN5aW95ZOm77yM6K+36YeN6K+VXCIsIGNhbGxOb2RlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICrop6PmnpDmnI3liqHlmajov5Tlm57mlbDmja5cbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwYXJhbSBjbWRcbiAgICAgKi9cbiAgICAgcGFyc2VyU2VydmVyRGF0YSA6IGZ1bmN0aW9uKGRhdGEsIGNtZCl7XG4gICAgICAgICAvL2d6aXDop6PljotcbiAgICAgICAgIC8vZGF0YSA9IGRhdGE7XG4gICAgICAgICAvL0Jhc2U2NFxuICAgICAgICAgLy9kYXRhID0gQmFzZTY0LmRlY29kZShkYXRhKTtcbiAgICAgICAgIC8vYWVz6Kej5a+GXG4gICAgICAgICBkYXRhID0gdGhpcy5BRVNEZWNyeXB0KGRhdGEsIHRoaXMuYWVzS2V5KTtcbiAgICAgICAgIHZhciBpTnVtMSA9IHBhcnNlSW50KGNtZCk7XG5cbiAgICAgICAgIGlmKGlOdW0xICE9IDEwNSl7XG4gICAgICAgICAgICAgY29uc29sZS5sb2coXCJkYXRhID0gXCIgKyBkYXRhICsgXCIsIGNtZCA9IFwiICsgY21kKTtcbiAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICAgc3dpdGNoKGlOdW0xKXtcbiAgICAgICAgICAgICBjYXNlIDEwMDp7XG4gICAgICAgICAgICAgICAgIHRoaXMucGFyc2VySW5pdChkYXRhKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgY2FzZSAxMDE6e1xuICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlckJldChkYXRhKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgY2FzZSAxMDI6e1xuICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlQ2xlYXIoZGF0YSk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgIGNhc2UgMTAzOntcbiAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZXJSZXdhcmQoZGF0YSk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgIGNhc2UgMTA0OntcbiAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZVNlY29uZERhdGEoZGF0YSk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgIGNhc2UgMTA1OntcbiAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZVRhYmxlKGRhdGEpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICBjYXNlIDEwNjp7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZU9yZGVyTGlzdChkYXRhKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgY2FzZSAxMDcgOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZXJIaXN0b3J5KGRhdGEpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgfVxuICAgICB9LFxuICAgICBcbiAgICAvL0FFU+WKoOWvhlxuICAgIEFFU0VuY3J5cHRpb24gOiBmdW5jdGlvbiAoZGF0YSwgYWVzS2V5KSB7XG4gICAgICAgIHZhciBrZXkgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZShhZXNLZXkpO1xuICAgICAgICB2YXIgaXYgID0gQ3J5cHRvSlMuZW5jLlV0ZjgucGFyc2UoYWVzS2V5KTtcbiAgICAgICAgdmFyIHNyY3MgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZShkYXRhKTtcbiAgICAgICAgdmFyIGVuY3J5cHRlZCA9IENyeXB0b0pTLkFFUy5lbmNyeXB0KHNyY3MsIGtleSwgeyBpdjogaXYsbW9kZTpDcnlwdG9KUy5tb2RlLkVDQn0pO1xuICAgICAgICByZXR1cm4gZW5jcnlwdGVkLnRvU3RyaW5nKCk7XG4gICAgfSxcbiAgICBcbiAgICAvL0FFU+ino+WvhlxuICAgIEFFU0RlY3J5cHQgOiBmdW5jdGlvbiAoZGF0YSwgYWVzS2V5KSB7XG4gICAgICAgIHZhciBrZXkgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZShhZXNLZXkpO1xuICAgICAgICB2YXIgaXYgID0gQ3J5cHRvSlMuZW5jLlV0ZjgucGFyc2UoYWVzS2V5KTtcbiAgICAgICAgdmFyIGRlY3J5cHQgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdChkYXRhLCBrZXksIHsgaXY6IGl2LG1vZGU6Q3J5cHRvSlMubW9kZS5FQ0J9KTtcbiAgICAgICAgcmV0dXJuIENyeXB0b0pTLmVuYy5VdGY4LnN0cmluZ2lmeShkZWNyeXB0KS50b1N0cmluZygpO1xuICAgIH0sXG4gICAgIFxuICAgIC8qKlxuICAgICAqIOino+aekOWIneWni+WMllxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICovXG4gICAgcGFyc2VySW5pdCA6IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICB2YXIgbmV0RGF0YSA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCk7XG4gICAgICAgIG5ldERhdGEuaW5pdERhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYy5sb2coXCJuZXREYXRhLmluaXREYXRhLm9kZHNMaXN0IFwiLCBuZXREYXRhLmluaXREYXRhLm9kZHNMaXN0KTtcbiAgICAgICAgbmV0RGF0YS5zZXNzaW9uID0gbmV0RGF0YS5pbml0RGF0YS5zZXNzaW9uO1xuICAgICAgICBuZXREYXRhLnBlcmlvZElkID0gbmV0RGF0YS5pbml0RGF0YS5wZXJpb2RJZDtcbiAgICAgICAgbmV0RGF0YS50aWNrZXRObyA9IG5ldERhdGEuaW5pdERhdGEudGlja2V0Tm87XG4gICAgICAgIG5ldERhdGEuYmV0TGltaXQgPSBuZXREYXRhLmluaXREYXRhLmJldExpbWl0O1xuICAgICAgICBuZXREYXRhLnRvdGFsQmV0TGltaXQgPSBuZXREYXRhLmluaXREYXRhLnRvdGFsQmV0TGltaXQ7XG5cbiAgICAgICAgdmFyIHBlcmlvZEVuZFRpbWUgPSBudWxsO1xuICAgICAgICBpZihuZXREYXRhLmluaXREYXRhLnN0YXR1cyA9PSAxKXtcbiAgICAgICAgICAgIG5ldERhdGEudGltZUZsYWcgPSAxO1xuICAgICAgICAgICAgcGVyaW9kRW5kVGltZSA9IG5ldERhdGEuaW5pdERhdGEucGVyaW9kRW5kVGltZTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihuZXREYXRhLmluaXREYXRhLnN0YXR1cyA9PSAzIHx8XG4gICAgICAgICAgICAgICAgbmV0RGF0YS5pbml0RGF0YS5zdGF0dXMgPT0gMiB8fFxuICAgICAgICAgICAgICAgIG5ldERhdGEuaW5pdERhdGEuc3RhdHVzID09IDQpe1xuICAgICAgICAgICAgbmV0RGF0YS50aW1lRmxhZyA9IDI7XG4gICAgICAgICAgICBwZXJpb2RFbmRUaW1lID0gbmV0RGF0YS5pbml0RGF0YS5wZXJpb2RFbmRUaW1lMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHBlcmlvZEVuZFRpbWUgIT0gbnVsbCl7XG4gICAgICAgICAgICBuZXREYXRhLmxvdHRlcnlJZCA9IG5ldERhdGEuaW5pdERhdGEubG90dGVyeUlkO1xuICAgICAgICAgICAgbmV0RGF0YS5sb3R0ZXJ5SW5kZXggPSBuZXREYXRhLmluaXREYXRhLmxvdHRlcnlJbmRleDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGxldCBsb2NhbFRpbWUgPSB0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBsZXQgc2V2ZXJUaW1lID0gbmV0RGF0YS5pbml0RGF0YS5zZXJ2ZXJUaW1lO1xuICAgICAgICAgICAgbmV0RGF0YS5yZWNlaXZlVGltZSA9IGxvY2FsVGltZSAtIHNldmVyVGltZTtcbiAgICAgICAgICAgIG5ldERhdGEuc2VjcyA9IE1hdGguZmxvb3IoKHBlcmlvZEVuZFRpbWUgLSBzZXZlclRpbWUpIC8gMTAwMCAtIG5ldERhdGEuYmV0VGhyZXNob2xkIC0gMyk7XG4gICAgICAgICAgICBjYy5sb2coXCJyZWNlaXZlVGltZT1cIiArIG5ldERhdGEucmVjZWl2ZVRpbWUgKyBcInxcIiArIG5ldERhdGEuc2Vjcyk7XG4gICAgICAgIH0gICAgICAgIFxuICAgICAgICAvL1xuICAgICAgICBuZXREYXRhLmluaXRGbGFnID0gMTtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIOino+aekOaKleazqFxuICAgICAqL1xuICAgICBwYXJzZXJCZXQgOiBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuICAgICAgICB2YXIgb2JqUm9vdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIG5ldERhdGEuYmV0TGltaXQgPSBvYmpSb290LmJldExpbWl0O1xuICAgICAgICBuZXREYXRhLnRvdGFsQmV0TGltaXQgPSBvYmpSb290LnRvdGFsQmV0TGltaXQ7XG4gICAgICAgIG5ldERhdGEudGlja2V0Tm8gPSBvYmpSb290LnRpY2tldE5vO1xuXG5cbiAgICAgICAgdmFyIHRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGxvY2FsVGltZSA9IHRlLmdldFRpbWUoKTtcbiAgICAgICAgbGV0IHNldmVyVGltZSA9IG9ialJvb3Quc2VydmVyVGltZTtcbiAgICAgICAgbGV0IHRtcCA9IGxvY2FsVGltZSAtIHNldmVyVGltZTtcblxuICAgICAgICBpZih0bXAgPCBuZXREYXRhLnJlY2VpdmVUaW1lKXtcbiAgICAgICAgICAgIG5ldERhdGEucmVjZWl2ZVRpbWUgPSB0bXA7XG4gICAgICAgICAgICBuZXREYXRhLnNlY3MgPSBNYXRoLmZsb29yKChuZXREYXRhLmJldERhdGEucGVyaW9kRW5kVGltZSAtIHNldmVyVGltZSkgLyAxMDAwIC0gbmV0RGF0YS5iZXRUaHJlc2hvbGQgLSAzKTtcbiAgICAgICAgICAgIGNjLmxvZyhcInJlY2VpdmVUaW1lPVwiICsgbmV0RGF0YS5yZWNlaXZlVGltZSArIFwifFwiICsgbmV0RGF0YS5zZWNzKTtcbiAgICAgICAgfVxuICAgICB9LFxuXG4gICAgIHBhcnNlQ2xlYXIgOiBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpOyBcbiAgICAgICAgdmFyIG9ialJvb3QgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBuZXREYXRhLnRpY2tldE5vID0gXCJcIjtcbiAgICAgICAgbmV0RGF0YS5iZXRMaW1pdCA9IG5ldERhdGEuaW5pdERhdGEuYmV0TGltaXQ7XG4gICAgICAgIG5ldERhdGEudG90YWxCZXRMaW1pdCA9IG5ldERhdGEuaW5pdERhdGEudG90YWxCZXRMaW1pdDtcbiAgICAgICAgdmFyIHRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGxvY2FsVGltZSA9IHRlLmdldFRpbWUoKTtcbiAgICAgICAgbGV0IHNldmVyVGltZSA9IG9ialJvb3Quc2VydmVyVGltZTtcbiAgICAgICAgbGV0IHRtcCA9IGxvY2FsVGltZSAtIHNldmVyVGltZTtcblxuICAgICAgICBpZih0bXAgPCBuZXREYXRhLnJlY2VpdmVUaW1lKXtcbiAgICAgICAgICAgIG5ldERhdGEucmVjZWl2ZVRpbWUgPSB0bXA7XG4gICAgICAgICAgICBuZXREYXRhLnNlY3MgPSBNYXRoLmZsb29yKChvYmpSb290LnBlcmlvZEVuZFRpbWUgLSBzZXZlclRpbWUpIC8gMTAwMCAtIG5ldERhdGEuYmV0VGhyZXNob2xkIC0gMyk7XG4gICAgICAgICAgICBjYy5sb2coXCJyZWNlaXZlVGltZT1cIiArIG5ldERhdGEucmVjZWl2ZVRpbWUgKyBcInxcIiArIG5ldERhdGEuc2Vjcyk7XG4gICAgICAgIH1cbiAgICAgfSxcbiAgICAgXG4gICAgIC8qKlxuICAgICAgKiDnu5PnrpdcbiAgICAgICovXG4gICAgcGFyc2VyUmV3YXJkIDogZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgIHZhciBuZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTsgXG4gICAgICAgIHZhciBvYmpSb290ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgbmV0RGF0YS5yZXdhcmREYXRhID0gb2JqUm9vdDtcbiAgICAgICAgLy8gbmV0RGF0YS5yZXdhcmREYXRhID0gSlNPTi5wYXJzZShkYXRhKTsgICAgICBcblxuICAgICAgICBuZXREYXRhLnBlcmlvZElkID0gbmV0RGF0YS5yZXdhcmREYXRhLm5leHRQZXJpb2RJZDtcbiAgICAgICAgbmV0RGF0YS50aW1lRmxhZyA9IG5ldERhdGEucmV3YXJkRGF0YS5uZXh0VGltZUZsYWc7XG4gICAgICAgIG5ldERhdGEuaW5pdERhdGEucGVyaW9kRW5kVGltZTIgPSBvYmpSb290LnBlcmlvZEVuZFRpbWUyO1xuXG4gICAgICAgIGlmKG9ialJvb3QucGVyaW9kRW5kVGltZSAhPSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgdmFyIHRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGxldCBsb2NhbFRpbWUgPSB0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBsZXQgc2V2ZXJUaW1lID0gb2JqUm9vdC5zZXJ2ZXJUaW1lO1xuICAgICAgICAgICAgbmV0RGF0YS5yZWNlaXZlVGltZSA9IGxvY2FsVGltZSAtIHNldmVyVGltZTtcbiAgICAgICAgICAgIG5ldERhdGEuc2VjcyA9IE1hdGguZmxvb3IoKG9ialJvb3QucGVyaW9kRW5kVGltZTEgLSBzZXZlclRpbWUpIC8gMTAwMCAtIG5ldERhdGEuYmV0VGhyZXNob2xkIC0gMyk7XG4gICAgICAgICAgICBjYy5sb2coXCJyZWNlaXZlVGltZT1cIiArIG5ldERhdGEucmVjZWl2ZVRpbWUgKyBcInxcIiArIG5ldERhdGEuc2Vjcyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcGFyc2VUYWJsZSA6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuICAgICAgICB2YXIgb2JqUm9vdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIHZhciB0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCBsb2NhbFRpbWUgPSB0ZS5nZXRUaW1lKCk7XG4gICAgICAgIGxldCBzZXZlclRpbWUgPSBvYmpSb290LnNlcnZlclRpbWU7XG4gICAgICAgIGxldCB0bXAgPSBsb2NhbFRpbWUgLSBzZXZlclRpbWU7XG5cbiAgICAgICAgaWYodG1wIDwgbmV0RGF0YS5yZWNlaXZlVGltZSl7XG4gICAgICAgICAgICBuZXREYXRhLnJlY2VpdmVUaW1lID0gdG1wOyBcbiAgICAgICAgICAgIG5ldERhdGEuc2VjcyA9IE1hdGguZmxvb3IoKG9ialJvb3QucGVyaW9kRW5kVGltZSAtIHNldmVyVGltZSkgLyAxMDAwIC0gbmV0RGF0YS5iZXRUaHJlc2hvbGQgLSAzKTtcbiAgICAgICAgICAgIGNjLmxvZyhcInJlY2VpdmVUaW1lPVwiICsgbmV0RGF0YS5yZWNlaXZlVGltZSArIFwifFwiICsgbmV0RGF0YS5zZWNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v6Kej5p6QbGlzdFxuICAgICAgICBuZXREYXRhLnRhYmxlQXJyYXkgPSBbXTtcbiAgICAgICAgbmV0RGF0YS50YWJsZUFycmF5ID0gb2JqUm9vdC5saXN0O1xuICAgIH0sXG5cbiAgICBwYXJzZVNlY29uZERhdGEgOiBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuICAgICAgICB2YXIgb2JqUm9vdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIG5ldERhdGEuc2Vjb25kRGF0YSA9IG9ialJvb3Q7XG4gICAgICAgIG5ldERhdGEudGltZUZsYWcgPSAyO1xuICAgICAgICBsZXQgc2V2ZXJUaW1lID0gb2JqUm9vdC5zZXJ2ZXJUaW1lO1xuICAgICAgICBuZXREYXRhLnNlY3MgPSBNYXRoLmZsb29yKChuZXREYXRhLmluaXREYXRhLnBlcmlvZEVuZFRpbWUyIC0gc2V2ZXJUaW1lKSAvIDEwMDAgLSBuZXREYXRhLmJldFRocmVzaG9sZCAtIDMpO1xuICAgICAgICBjYy5sb2coXCLmmI7mipXliankvZnml7bpl7QqKioqKioqKlwiICsgbmV0RGF0YS5pbml0RGF0YS5wZXJpb2RFbmRUaW1lMiArIFwiIC0gXCIgKyBzZXZlclRpbWUgKyBcIiA9IFwiICsgbmV0RGF0YS5zZWNzKTtcbiAgLypcbiAgICAgICAgdmFyIHRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGxvY2FsVGltZSA9IHRlLmdldFRpbWUoKTtcbiAgICAgICAgbGV0IHNldmVyVGltZSA9IG9ialJvb3Quc2VydmVyVGltZTtcbiAgICAgICAgbGV0IHRtcCA9IGxvY2FsVGltZSAtIHNldmVyVGltZTtcblxuICAgICAgICBpZih0bXAgPCBuZXREYXRhLnJlY2VpdmVUaW1lKXtcbiAgICAgICAgICAgIG5ldERhdGEucmVjZWl2ZVRpbWUgPSB0bXA7IFxuICAgICAgICAgICAgbmV0RGF0YS5zZWNzID0gTWF0aC5mbG9vcigobmV0RGF0YS5pbml0RGF0YS5wZXJpb2RFbmRUaW1lMiAtIHNldmVyVGltZSkgLyAxMDAwIC0gbmV0RGF0YS5iZXRUaHJlc2hvbGQgLSAzKTtcbiAgICAgICAgICAgIGNjLmxvZyhcInJlY2VpdmVUaW1lPVwiICsgbmV0RGF0YS5yZWNlaXZlVGltZSArIFwifFwiICsgbmV0RGF0YS5zZWNzKTtcbiAgICAgICAgfVxuICAgICAgICAqL1xuICAgIH0sXG5cbiAgICBwYXJzZU9yZGVyTGlzdCA6IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICB2YXIgbmV0RGF0YSA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCk7XG4gICAgICAgIHZhciBvYmpSb290ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgbmV0RGF0YS5vcmRlckxpc3QgPSBbXTtcbiAgICAgICAgbmV0RGF0YS5vcmRlckxpc3QgPSBvYmpSb290LmRhdGE7XG4gICAgfSxcblxuICAgIHBhcnNlckhpc3RvcnkgOiBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuICAgICAgICB2YXIgb2JqUm9vdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIG5ldERhdGEuaGlzdG9yeUxpc3QgPSBbXTtcbiAgICAgICAgbmV0RGF0YS5oaXN0b3J5TGlzdCA9IG9ialJvb3QuaGlzdG9yeUxpc3Q7XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJZcbiAgICAgKiBAcGFyYW1cbiAgICAgKiBcbiAgICAgKi9cbiAgICBnZXRJbml0IDogZnVuY3Rpb24oc2Vzc2lvbiwgY2FsbEZ1bmMsIHNlbGYpe1xuICAgICAgICBpZihzZXNzaW9uID09IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSA9IFwie31cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdmFyIG9iaiA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgICAgIG9iai5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdERhdGEgPSBKU09OLnN0cmluZ2lmeShvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/mj5DliY3liJ3lp4vljJZcbiAgICAgICAgTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5pbml0RmxhZyA9IDA7XG4gICAgICAgIC8v6K6+572u5ZG95Luk5Y+377yM5q+P5Liq6K+35rGC6YO95LiN5LiA5qC3XG4gICAgICAgIHRoaXMuaGVhZGVyQ21kID0gMTAwO1xuICAgICAgICAvL+ivt+axgue9kee7nFxuICAgICAgICB0aGlzLnJlcXVlc3QoY2FsbEZ1bmMsIHNlbGYpO1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICog5oqV5rOoXG4gICAgICogQHBhcmFtIHRpY2tldF9ubyDorqLljZXlj7fvvIzpppbmrKHmipXms6jkuLrnqbpcbiAgICAgKiBAcGFyYW0gc3RlcCDmraXmlbBcbiAgICAgKiBAUGFybWEgdHJhbnNfZGF0YSDmlbDmja7kuqTkupJcbiAgICAgKi9cbiAgICBnZXRCZXQgOiBmdW5jdGlvbihjYWxsRnVuYywgc2VsZil7XG4gICAgICAgIHZhciBuZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSA9IFwiXCI7XG4gICAgICAgIC8v5ou85oiQanNvbuS4su+8jOavj+S4quivt+axgumDveS4jeS4gOagt1xuICAgICAgICB2YXIgb2JqID0gbmV3IE9iamVjdCgpO1xuICAgICAgICB2YXIgdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBvYmoudGlkID0gdGUuZ2V0VGltZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgIHRlID0gbnVsbDtcbiAgICAgICAgb2JqLmJldExpc3QgPSBuZXREYXRhLnJlcUJldExpc3Q7XG4gICAgICAgIG9iai5wZXJpb2RJZCA9IG5ldERhdGEucGVyaW9kSWQ7XG4gICAgICAgIG9iai50aW1lRmxhZyA9IG5ldERhdGEudGltZUZsYWc7XG4gICAgICAgIG9iai5zZXNzaW9uID0gbmV0RGF0YS5zZXNzaW9uO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICAgICAgb2JqID0gbnVsbDtcbiAgICAgICAgLy/orr7nva7lkb3ku6Tlj7fvvIzmr4/kuKror7fmsYLpg73kuI3kuIDmoLdcbiAgICAgICAgdGhpcy5oZWFkZXJDbWQgPSAxMDE7XG4gICAgICAgIC8v6K+35rGC572R57ucXG4gICAgICAgIHRoaXMucmVxdWVzdChjYWxsRnVuYywgc2VsZik7XG4gICAgfSxcblxuICAgIGdldENsZWFyIDogZnVuY3Rpb24oY2FsbEZ1bmMsIHNlbGYpIHtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gXCJcIjtcbiAgICAgICAgLy/mi7zmiJBqc29u5Liy77yM5q+P5Liq6K+35rGC6YO95LiN5LiA5qC3XG4gICAgICAgIHZhciBvYmogPSBuZXcgT2JqZWN0KCk7XG4gICAgICAgIG9iai5wZXJpb2RJZCA9IG5ldERhdGEucGVyaW9kSWQ7XG4gICAgICAgIG9iai5zZXNzaW9uID0gbmV0RGF0YS5zZXNzaW9uO1xuICAgICAgICBvYmoudGltZUZsYWcgPSBuZXREYXRhLnRpbWVGbGFnO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgXG4gICAgICAgIG9iaiA9IG51bGw7XG4gICAgICAgIC8v6K6+572u5ZG95Luk5Y+377yM5q+P5Liq6K+35rGC6YO95LiN5LiA5qC3XG4gICAgICAgIHRoaXMuaGVhZGVyQ21kID0gMTAyO1xuICAgICAgICAvL+ivt+axgue9kee7nFxuICAgICAgICB0aGlzLnJlcXVlc3QoY2FsbEZ1bmMsIHNlbGYpO1xuICAgIH0sXG4gICAgIFxuICAgIC8qKlxuICAgICAqIOe7k+eul1xuICAgICAqIEBwYXJhbSB0aWNrZXRfbm8g6K6i5Y2V5Y+3XG4gICAgICovXG4gICAgZ2V0UmV3YXJkIDogZnVuY3Rpb24oY2FsbEZ1bmMsIHNlbGYpe1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gXCJcIjtcbiAgICAgICAgLy/mi7zmiJBqc29u5Liy77yM5q+P5Liq6K+35rGC6YO95LiN5LiA5qC3XG4gICAgICAgIHZhciBvYmogPSBuZXcgT2JqZWN0KCk7XG4gICAgICAgIG9iai5wZXJpb2RJZCA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCkucGVyaW9kSWQ7XG4gICAgICAgIG9iai5zZXNzaW9uID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5zZXNzaW9uO1xuICAgICAgICBvYmoudGlja2V0Tm8gPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpLnRpY2tldE5vO1xuXG4gICAgICAgIC8vIG9iai51aWRzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIG9iai51aWRzID0gWzEyLCAxMjNdO1xuICAgICAgICAvLyBmb3IobGV0IGkgPSAwOyBpIDwgTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS50YWJsZUFycmF5Lmxlbmd0aCgpOyArK2kpe1xuICAgICAgICAvLyAgICAgb2JqLnVpZHMucHVzaChOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpLnRhYmxlQXJyYXlbaV0udWlkKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSA9IEpTT04uc3RyaW5naWZ5KG9iaik7IFxuICAgICAgICBvYmogPSBudWxsO1xuICAgICAgICAvL+iuvue9ruWRveS7pOWPt++8jOavj+S4quivt+axgumDveS4jeS4gOagt1xuICAgICAgICB0aGlzLmhlYWRlckNtZCA9IDEwMztcbiAgICAgICAgLy/or7fmsYLnvZHnu5xcbiAgICAgICAgdGhpcy5yZXF1ZXN0KGNhbGxGdW5jLCBzZWxmKTtcbiAgICB9LFxuXG4gICAgZ2V0VGFibGUgOiBmdW5jdGlvbiggY2FsbEZ1bmMsIHNlbGYpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSA9IFwiXCI7XG4gICAgICAgIC8v5ou85oiQanNvbuS4su+8jOavj+S4quivt+axgumDveS4jeS4gOagt1xuICAgICAgICB2YXIgb2JqID0gbmV3IE9iamVjdCgpO1xuICAgICAgICBvYmoubGlzdCA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCkudGFibGVBcnJheTtcbiAgICAgICAgb2JqLnBlcmlvZElkID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5wZXJpb2RJZDsgXG4gICAgICAgIG9iai5zZXNzaW9uID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5zZXNzaW9uO1xuICAgICAgICBvYmoudGltZUZsYWcgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpLnRpbWVGbGFnO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICAgICAgb2JqID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkZXJDbWQgPSAxMDU7XG4gICAgICAgIC8v6K+35rGC572R57ucXG4gICAgICAgIHRoaXMucmVxdWVzdChjYWxsRnVuYywgc2VsZik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOiOt+WPluS6jOmYtuauteaVsOaNrlxuICAgICAqL1xuICAgIGdldFNlY29uZERhdGEgIDpmdW5jdGlvbihjYWxsRnVuYywgc2VsZil7XG4gICAgICAgIHRoaXMucmVxdWVzdERhdGEgPSBcIlwiO1xuICAgICAgICAvL+aLvOaIkGpzb27kuLLvvIzmr4/kuKror7fmsYLpg73kuI3kuIDmoLdcbiAgICAgICAgdmFyIG9iaiA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgb2JqLnBlcmlvZElkID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5wZXJpb2RJZDsgXG4gICAgICAgIG9iai5zZXNzaW9uID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5zZXNzaW9uO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICAgICAgb2JqID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkZXJDbWQgPSAxMDQ7XG4gICAgICAgIC8v6K+35rGC572R57ucXG4gICAgICAgIHRoaXMucmVxdWVzdChjYWxsRnVuYywgc2VsZik7XG4gICAgfSxcblxuICAgIGdldE9yZGVyTGlzdCA6IGZ1bmN0aW9uKGNhbGxGdW5jLCBzZWxmKXtcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSA9IFwiXCI7XG4gICAgICAgIHRoaXMuaGVhZGVyQ21kID0gMTA2O1xuICAgICAgICAvL+ivt+axgue9kee7nFxuICAgICAgICB0aGlzLnJlcXVlc3QoY2FsbEZ1bmMsIHNlbGYpOyAgICAgICAgXG4gICAgfSxcblxuICAgIGdldEhpc3RvcnkgIDogZnVuY3Rpb24oY2FsbEZ1bmMsIHNlbGYpe1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gXCJcIjtcbiAgICAgICAgLy/mi7zmiJBqc29u5Liy77yM5q+P5Liq6K+35rGC6YO95LiN5LiA5qC3XG4gICAgICAgIHZhciBvYmogPSBuZXcgT2JqZWN0KCk7XG4gICAgICAgIG9iai5zZXNzaW9uID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKS5zZXNzaW9uO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICAgICAgb2JqID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkZXJDbWQgPSAxMDc7XG4gICAgICAgIC8v6K+35rGC572R57ucXG4gICAgICAgIHRoaXMucmVxdWVzdChjYWxsRnVuYywgc2VsZik7XG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIERhdGFPcGVyIDogRGF0YU9wZXJcbn07IiwiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxuICAgICAgICB9LFxuICAgICAgICAvLyBkZWZhdWx0cywgc2V0IHZpc3VhbGx5IHdoZW4gYXR0YWNoaW5nIHRoaXMgc2NyaXB0IHRvIHRoZSBDYW52YXNcbiAgICAgICAgdGV4dDogJ0hlbGxvLCBXb3JsZCEnXG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxhYmVsLnN0cmluZyA9IHRoaXMudGV4dDtcbiAgICB9LFxuXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcblxuICAgIH0sXG59KTtcbiIsInZhciBOZXREYXRhID0gcmVxdWlyZShcIk5ldERhdGFcIik7XG52YXIgR2FtZSA9IHJlcXVpcmUoXCJnYW1lXCIpO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICAvL+a4uOaIj+W4ruWKqVxuICAgICAgICB1aUJsYWNrIDogY2MuTm9kZSxcbiAgICAgICAgdGVzdE5vZGUgOiBjYy5Ob2RlLFxuICAgICAgICBzY3JvbGxWaWV3OiBjYy5Ob2RlLFxuICAgICAgICBjb250ZW50OiBjYy5Ob2RlLFxuICAgICAgICB2aWV3OiBjYy5Ob2RlLFxuICAgICAgICBsb2NrIDogZmFsc2UsXG4gICAgICAgIGdhbWVOb2RlOiBjYy5Ob2RlLFxuICAgICAgICBpbWdBcnJheSA6IFtjYy5TcHJpdGVdLFxuICAgIH0sXG5cbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5uZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcbiAgICAgICAgdGhpcy5sb2NrID0gdHJ1ZTtcbiAgICAgICAgbGV0IG9yaVAxID0gdGhpcy50ZXN0Tm9kZS5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MudjIoMCwgMCkpO1xuICAgICAgICB0aGlzLm9yaVkgPSB0aGlzLnRlc3ROb2RlLnkgLSBvcmlQMS55O1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwib3JpWT1cIiArIHRoaXMubm9kZS55ICsgXCJ8XCIgKyBvcmlQMS55KTsgICAgICAgIFxuXG4gICAgICAgIHZhciBjYWxsRnVuY18xID0gY2MuY2FsbEZ1bmMoZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBzZSA9IGNjLmRpcmVjdG9yLmdldFdpblNpemUoKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5oZWlnaHQgPSBzZS5oZWlnaHQgKiAwLjg7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuZ2V0Q2hpbGRCeU5hbWUoXCJ2aWV3XCIpLmhlaWdodCA9IHRoaXMuc2Nyb2xsVmlldy5oZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLm5vZGUuaGVpZ2h0ID0gdGhpcy5zY3JvbGxWaWV3LmhlaWdodDtcbiAgICAgICAgICAgIHRoaXMubm9kZS55ID0gdGhpcy5vcmlZIC0gdGhpcy5zY3JvbGxWaWV3LmhlaWdodDsgICAgXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwibnk9XCIgKyB0aGlzLm5vZGUueSk7XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKDAuMSksIGNhbGxGdW5jXzEpKTtcblxuICAgICAgICB0aGlzLnVpQmxhY2sub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfSxcblxuICAgIGNsb3NlOiBmdW5jdGlvbigpe1xuICAgICAgICBpZighdGhpcy5sb2NrKXtcbiAgICAgICAgICAgIHRoaXMudWlCbGFjay5hY3RpdmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgbGV0IGNhbGwzID0gY2MuY2FsbEZ1bmMoZnVuY3Rpb24oKVxuICAgICAgICAgICAgeyAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMubmV0RGF0YS5oZWxwU2hvd0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLm1vdmVUbygwLjMsIGNjLnYyKDAsIHRoaXMub3JpWSAtIHRoaXMuc2Nyb2xsVmlldy5oZWlnaHQpKSwgY2FsbDMpKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBkb3duSGVscDogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBsZXQgc3B0ID0gdGhpcy5nYW1lTm9kZS5nZXRDb21wb25lbnQoR2FtZSk7XG4gICAgICAgIHNwdC5zaG93V2FpdExheWVyKCk7XG4gICAgICAgIGxldCByaCA9IDA7XG4gICAgICAgIFxuICAgICAgICBjYy5sb2FkZXIubG9hZCh0aGlzLm5ldERhdGEucnVsZVBpY3MsIG51bGwsIGZ1bmN0aW9uIChlcnJvcnMsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVycm9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgdXJsIFsnICsgZXJyb3JzW2ldICsgJ106ICcgKyByZXN1bHRzLmdldEVycm9yKGVycm9yc1tpXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNjLmxvZyhcInJlc3VsdHMgaXMgJSUgXCIsIHJlc3VsdHMuZ2V0Q29udGVudC5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IGxlbiA9IHNlbGYubmV0RGF0YS5ydWxlUGljcy5sZW5ndGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKyl7ICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIGFUZXggPSByZXN1bHRzLmdldENvbnRlbnQoc2VsZi5uZXREYXRhLnJ1bGVQaWNzW2ldKTsgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5uZXREYXRhLnJ1bGVQaWNzW2ldICsgXCJ8XCIgKyBhVGV4KTtcbiAgICAgICAgICAgICAgICBsZXQgc2YgPSBuZXcgY2MuU3ByaXRlRnJhbWUoKTtcbiAgICAgICAgICAgICAgICBzZi5zZXRUZXh0dXJlKGFUZXgpO1xuICAgICAgICAgICAgICAgIHNlbGYuaW1nQXJyYXlbaV0uc3ByaXRlRnJhbWUgPSBzZjtcbiAgICAgICAgICAgICAgICByaCArPSBzZWxmLmltZ0FycmF5W2ldLm5vZGUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGNjLmxvZyhcImhlaWdodCBpcyAkJCQgXCIsIHNlbGYuaW1nQXJyYXlbaV0ubm9kZS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIC8v5pSv5oyB5aSa5byg5Zu+5o6S54mI77yIMjAxNy0wMy0yNyBwbe+8mjUyMO+8iVxuICAgICAgICAgICAgICAgIGlmKGkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaHQgPSBzZWxmLmltZ0FycmF5W2luZGV4XS5ub2RlLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdBcnJheVtpXS5ub2RlLnkgID0gc2VsZi5pbWdBcnJheVtpbmRleF0ubm9kZS55IC0gaHQgKyAxO1xuICAgICAgICAgICAgICAgICAgICAvLyBjYy5sb2coXCJoZWlnaHQgaXMgJCQkIFwiLCBodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmKGxlbiA9PSAyKXtcbiAgICAgICAgICAgIC8vICAgICBsZXQgaHQgPSBzZWxmLmltZ0FycmF5WzBdLm5vZGUuaGVpZ2h0O1xuICAgICAgICAgICAgLy8gICAgIHNlbGYuaW1nQXJyYXlbMV0ubm9kZS55ID0gLWh0O1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuaGVpZ2h0ID0gcmg7XG4gICAgICAgICAgICBzcHQuaGlkZVdhaXRMYXllcigpO1xuICAgICAgICAgICAgc2VsZi5pbml0SGVscCgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaW5pdEhlbHA6ZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCF0aGlzLmxvY2spe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbml0SGVscFwiKTtcbiAgICAgICAgICAgIHRoaXMubmV0RGF0YS5oZWxwU2hvd0ZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5sb2NrID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5nZXRDb21wb25lbnQoY2MuU2Nyb2xsVmlldykuc2Nyb2xsVG9PZmZzZXQoY2MucCgwLDApLCAwLjEpO1xuICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gY2MuY2FsbEZ1bmModGhpcy5zZWxlY3RTaG93Q2FsbEJhY2ssIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlVG8oMC4zLCBjYy5wKDAsIHRoaXMub3JpWSkpLCBjYWxsYmFjaykpO1xuICAgICAgICB9ICAgICAgICBcbiAgICB9LFxuXG4gICAgc2VsZWN0U2hvd0NhbGxCYWNrOmZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMudWlCbGFjay5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmxvY2sgPSBmYWxzZTtcbiAgICB9LFxufSk7XG4iLCJ2YXIgRGF0YU9wZXIgPSByZXF1aXJlKFwiRGF0YU9wZXJcIik7XG52YXIgTmV0RGF0YSA9IHJlcXVpcmUoXCJOZXREYXRhXCIpO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgLypjdG9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgXG4gICAgfSwqL1xuXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKCFDQ19KU0IgJiYgd2luZG93LmFsaUxvdHRlcnlDYXNpbm9TREspIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Nhc2lubzppbml0JywgZnVuY3Rpb24oZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqMjAxNzA1MDnlnKgxLjQuMuS/ruaUueiOt+WPlmdhbWVUb2tlbioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFPcGVyID0gRGF0YU9wZXIuRGF0YU9wZXIuZ2V0SW5zdCgpO1xuICAgICAgICAgICAgICAgIGRhdGFPcGVyLmdhbWVUb2tlbiA9IGUuZGF0YS5hY2Nlc3NUb2tlbjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoZGF0YU9wZXIuZ2FtZVRva2VuID09PSBudWxsKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPcGVyLmdhbWVUb2tlbiA9IFwiMjZhMDljYTA1MmQ0YzdkY2RlMTM0NDliYTFiNzM1ZGYtMTEtMTE1MS0xMDUxXCI7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b2sgPSBkYXRhT3Blci5HZXRRdWVyeVN0cmluZyhcInRva1wiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZih0b2spe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9wZXIuaGVhZGVyVG9rZW4gPSB0b2s7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvaz1cIiArIGRhdGFPcGVyLmhlYWRlclRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9wZXIuaGVhZGVyVG9rZW4gPSBcIjBcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL3Rlc3Rzc3Nzc3NzXG4gICAgICAgICAgICAgICAgICAgIC8qdmFyIG15RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyVG9rZW4gPSBteURhdGUuZ2V0VGltZSgpOyovXG4gICAgICAgICAgICAgICAgfVxuICAgICBcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGhpcy5nYW1lVG9rZW4gPSBcIiArIGRhdGFPcGVyLmdhbWVUb2tlbik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzLmhlYWRlclRva2VuID0gXCIgKyBkYXRhT3Blci5oZWFkZXJUb2tlbik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKjIwMTcwNTA55ZyoMS40LjLkv67mlLnojrflj5ZnYW1lVG9rZW4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAgICAgXG4gICAgICAgICAgICAgICAgc2VsZi5mZXRjaChmdW5jdGlvbihpc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGlzRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5ZCI5bm26LWE5rqQXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGlMb3R0ZXJ5Q2FzaW5vU0RLLm1lcmdlUmVzb3VyY2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaYvuekuiBsb2FkaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGlMb3R0ZXJ5Q2FzaW5vU0RLLmluaXRMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOi/kOihjOa4uOaIj1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESy5ydW5HYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESy5zaG93RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmZldGNoKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZmV0Y2g6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVmVyc2lvbk46MjAxNzA1MjUxMjAwXCIpO1xuICAgICAgICBjYy5sb2coXCJmZXRjaFwiKTtcbiAgICAgICAgdGhpcy5pbml0RGF0YSA9IHt9O1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhT3BlciA9IERhdGFPcGVyLkRhdGFPcGVyLmdldEluc3QoKTtcbiAgICAgICAgZGF0YU9wZXIuZ2V0SW5pdChudWxsLCBmdW5jdGlvbihjbWQsIHJlcywgbXNnLCBzZWxmKSB7XG4gICAgICAgICAgICAvLyDliKTmlq3mmK/lkKbmiJDlip/lubblrZjlgqjliJ3lp4vljJZcbiAgICAgICAgICAgIHZhciBpc0Vycm9yID0gZmFsc2U7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8v5q+P5pelKioqKua4uOaIj+aaguWBnOi/kOiQpe+8iOWuouaIt+err+WkhOeQhu+8iVxuICAgICAgICAgICAgaWYocmVzID09IDEwMDAwNyl7XG4gICAgICAgICAgICAgICAgaXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihyZXMgIT0gMCl7XG4gICAgICAgICAgICAgICAgaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIC8vIGlmKE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCkuc3RhdHVzID09IDEpe1xuICAgICAgICAgICAgICAgIC8vICAgICB2YXIgdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIC8vICAgICBzZWxmLnRpbWVTdGFtcCA9IHRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgY2MubG9nKFwidGltZVN0YW1wIGlzIFwiLCBzZWxmLnRpbWVTdGFtcCk7XG4gICAgICAgICAgICAgICAgLy8gfSBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50aW1lU3RhbXAgPSB0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcInRpbWVTdGFtcCBpcyBcIiwgc2VsZi50aW1lU3RhbXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYy5sb2coJ2ZldGNoIGluaXQgZGF0YScpO1xuICAgICAgICAgICAgY2MubG9nKGNtZCwgcmVzLCBtc2cpO1xuICAgICAgICAgICAgc2VsZi5pbml0RGF0YS5jbWQgPSBjbWQ7XG4gICAgICAgICAgICBzZWxmLmluaXREYXRhLnJlcyA9IHJlcztcbiAgICAgICAgICAgIHNlbGYuaW5pdERhdGEubXNnID0gbXNnO1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soaXNFcnJvcik7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG59KTtcbiIsIlxudmFyIE5ldERhdGEgPSBjYy5DbGFzcyh7XG4gICAgc3RhdGljcyA6IHtcbiAgICAgICAgZ19JbnN0IDogbnVsbCxcbiAgICAgICAgc19pbmRleCA6IDAsXG4gICAgICAgIFxuICAgICAgICBnZXRJbnN0OmZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKE5ldERhdGEuZ19JbnN0ID09PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIE5ldERhdGEuZ19JbnN0ID0gbmV3IE5ldERhdGEoKTtcbiAgICAgICAgICAgICAgICBOZXREYXRhLmdfSW5zdC5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gTmV0RGF0YS5nX0luc3Q7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcblxuICAgICAgICBkZXN0b3J5SW5zdDpmdW5jdGlvbigpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihOZXREYXRhLmdfSW5zdCAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgTmV0RGF0YS5nX0luc3QgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC8v6K+35rGC5Y+C5pWwXG4gICAgICAgIHJlcUJldExpc3QgOiBbXSwvL+aKleazqOaVsOaNrlxuXG5cblxuXG4gICAgICAgIC8v5ZON5bqUXG4gICAgICAgIHRpbWVGbGFnIDogMSwvL+aKleazqOmYtuautSAxLeesrOS4gOmYtuautSAgMi3nrKzkuozpmLbmrrVcbiAgICAgICAgc2Vzc2lvbiA6IG51bGwsXG4gICAgICAgIHBlcmlvZElkIDogMSwvL+acn+asoVxuICAgICAgICByZWNlaXZlVGltZSA6IDAsLy/mjqXmlLbml7bpl7Tlt65cbiAgICAgICAgc2VjcyA6IDAsLy/lvanmnJ/liankvZnnp5LmlbBcbiAgICAgICAgYmV0VGhyZXNob2xkIDogMyxcbiAgICAgICAgdGlja2V0Tm8gOiBcIlwiLC8v6K6i5Y2V5Y+3XG4gICAgICAgIGJldExpbWl0IDogMCwvL+aKleazqOmZkOminVxuICAgICAgICB0b3RhbEJldExpbWl0IDogMCwvL+aAu+aKleazqOmZkOminVxuXG4gICAgICAgIHRhYmxlQXJyYXkgOiBbXSwvL+WQjOahjOS6ulxuICAgICAgICBpbml0RGF0YSA6IG51bGwsLy/liJ3lp4vljJZkYXRhXG4gICAgICAgIHJld2FyZERhdGEgOiBudWxsLC8v57uT566XZGF0YVxuICAgICAgICBzZWNvbmREYXRhIDogbnVsbCwvL+esrOS6jOmYtuauteaVsOaNrmRhdGFcbiAgICAgICAgaGlzdG9yeUxpc3QgOiBbXSwvL+WOhuWPsui1sOWKv1xuICAgICAgICBvcmRlckxpc3QgOiBbXSwvL+iuouWNlWRhdGFcblxuICAgICAgICAvL3NkayAgICAgICAgXG4gICAgICAgIGluaXRGbGFnIDogMCAvL+aPkOWJjeWIneWni+WMliAwOuayoeWlvSAgMTrlpb3kuoYgMi7lgZzllK5cbiAgICB9LFxuICAgIFxuICAgIGluaXQgOiBmdW5jdGlvbigpe1xuXG4gICAgfSxcblxuICAgIGNsZWFyOiBmdW5jdGlvbigpe1xuICAgIH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgTmV0RGF0YSA6IE5ldERhdGFcbn07XG4iLCJjYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICAvLyBmb286IHtcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxuICAgICAgICAvLyB9LFxuICAgICAgICAvLyAuLi5cbiAgICB9LFxuXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgIC8v5LiN5YaN5rS+5Y+R5LqL5Lu2XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgaWYodGhpcy5vYmogIT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZnVuKHRoaXMub2JqKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iaiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLmZ1biA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSx0aGlzKTtcbiAgICB9LFxuXG4gICAgaW5pdDogZnVuY3Rpb24ob2JqLCBmdW4pe1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5mdW4gPSBmdW47XG4gICAgfSxcbiAgICBcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG5cbiAgICAvLyB9LFxufSk7XG4iLCJ2YXIgTmV0RGF0YSA9IHJlcXVpcmUoXCJOZXREYXRhXCIpO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBcbiAgICAgICAgcHVrZUhpZ2hMaWdodE5vZGVBcnJheToge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBbY2MuTm9kZV1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGJldEhpZ2hMaWdodExheWVyOmNjLk5vZGUsXG4gICAgICAgIFxuICAgICAgICBzZWxmQ2hpcE5vZGU6e1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBbY2MuTm9kZV1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIG90aGVyc1Bvc2l0aW9uTm9kZTpjYy5Ob2RlLFxuICAgICAgICBcbiAgICAgICAgcG9rZXJzTm9kZTp7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IFtjYy5Ob2RlXVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgbm9Qb2tlcnNOb2RlOntcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLk5vZGVdXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBoaXN0b3J5c0xpc3ROb2RlOntcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLk5vZGVdIFxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgb2Rkc0xhYmVsOmNjLk5vZGUsXG4gICAgICAgIFxuICAgICAgICBwb2tlck5hbWVOb2RlOmNjLk5vZGUsXG4gICAgICAgIFxuICAgICAgICBwb2tlck5vVG91Y2hMYXllcjpjYy5Ob2RlLFxuICAgICAgICBcbiAgICAgICAgb3B0aW9ucyA6IFwiXCIsLy/pgInpobnor7TmmI5cbiAgICAgICAgLy/lir/liptcbiAgICAgICAgcG93ZXJGbGFnIDogdHJ1ZSwvL+aYr+WQpuWKv+WKm1xuICAgICAgICBwb3dlcklkIDogMCwvL+WKv+WKm2lkXG4gICAgICAgIHBvY2tlcnMgOiBbXSwvL+eJjOWei1xuICAgICAgICBoaXN0b3J5cyA6IFtdLC8v6IOc6LSf6LWw5Yq/XG5cbiAgICAgICAgLy/mipXms6jpoblcbiAgICAgICAgYmV0RmxhZyA6IHRydWUsLy/mmK/lkKbmipXms6jpoblcbiAgICAgICAgYmV0SWQgOiAwLC8v5oqV5rOo6aG5aWRcbiAgICAgICAgb2RkczEgOiAxLC8v5LiA6Zi25q616LWU546HXG4gICAgICAgIG9kZHMyIDogMSwvL+S6jOmYtuautei1lOeOh1xuICAgICAgICBvZGRUeXBlIDogMCwvL+i1lOeOh+WPmOWMluexu+WeiyAgMC3pmY3kvY4gIDEt5LiK5Y2HICAyLeS4jeWPmFxuICAgICAgICBiZXRTdGF0dXMgOiAxLC8v5piv5ZCm5Y+v5oqV5rOoLCAxLeWPr+aKlSAwLeS4jeWPr+aKlVxuICAgICAgICBiZXROdW1Ub3RhbDEgOiAwLC8v56ys5LiA6Zi25q615oC75oqV5rOo6aKdXG4gICAgICAgIGJldE51bVRvdGFsMiA6IDAsLy/nrKzkuozpmLbmrrXmipXms6jmgLvpop1cbiAgICAgICAgYmV0TnVtICA6IDAsLy/ljZXmrKHmipXms6jpop3vvIznlKjkuo7orrDlvZXmipXms6jmibnmrKHvvIzlpLHotKXnmoTopoHpgIDlm57mnaVcbiAgICAgICAgYmV0TGlzdCA6IFtdLC8v5pyA5ZCO5LiA5qyh5oqV5rOo5YiX6KGo77yM55So5LqO5oqV5rOo77yM5oqK5omA5pyJ5oqV5rOo6aG555qE6L+Z5Liq5pWw57uE5pS26ZuG6LW35p2l5bCx5piv55yf5q2j55qE5oqV5rOo5YiX6KGoXG4gICAgICAgIGNoaXBDb2xvciA6IDAsLy/nrbnnoIHpopzoibIgIDAtICAxLSAgMi0gIDMtXG4gICAgICAgIGxpZ3RoRmxhZyA6IGZhbHNlLC8v5oqV5rOo6aG55piv5ZCm6auY5LquXG5cbiAgICAgICAgLy/nu5PnrpfnirbmgIFcbiAgICAgICAgd2luIDogLTEsIC8vLTE6IOacquW8gOWlliAxOuiDnOWIqe+8jDA66LSf77yMMjrlubNcbiAgICAgICAgdHlwZSA6IC0xLC8vLTE6IOacquW8gOWlliAwOuaVo+eJjO+8jDE65pWj54mM77yMMjrlr7nlrZDvvIwz77ya6aG65a2Q77yMNDrlkIzoirHvvIw1OuWQjOiKsemhuu+8jDY66LG55a2QXG4gICAgICAgIHBva2VyTGlnaHQgOiBbXSwvL+aJkeWFi+mrmOS6riDnqbrkuLrlhajkuI3kuq7vvIwgWzAsIDEsIDJd5YWo5Lqu77yMIFswLCAyXeS6ruS4pOS4qlxuXG4gICAgICAgIC8v6aOe562556CBXG4gICAgICAgIGNoaXBQb3NpdGlvbnMgOiBbXSwvL+alvOS4izXkuKrnrbnnoIHnmoTnm7jlr7nkvY3nva5cbiAgICAgICAgcGxheWVyUG9zaXRpb25zIDogW10sLy/njqnlrrblpLTlg4/nm7jlr7nkvY3nva7vvIzljIXmi6zoh6rlt7HnmoTvvIjoh6rlt7HnmoTnrbnnoIHpo57lm57vvIlcbiAgICAgICAgY3VycmVudENoaXBJbmRleDogMCwvL+iusOW9leW9k+WJjeaKleazqOmineeahGluZGV4XG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uIChldmVudCl7XG5cbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgZnVuY3Rpb24gKGV2ZW50KXtcbiAgICAgICAgICAgIGNjLmxvZyhcIlRPVUNIX0VORCEhIVwiKTtcbiAgICAgICAgICAgIGlmKHRoaXMuYmV0RmxhZyAmJiB0aGlzLmJldFN0YXR1cyl7XG4gICAgICAgICAgICAgICAgLy/mipXms6jmk43kvZzvvIzlm57osIPliLBnYW1l5Y675Yik5pat55m75b2V54q25oCB44CB5L2Z6aKd562JXG4gICAgICAgICAgICAgICAgIHZhciBvbkZ1bmN0aW9uID0gY2MuZmluZCgnQ2FudmFzJykuZ2V0Q29tcG9uZW50KCdnYW1lJyk7XG4gICAgICAgICAgICAgICAgb25GdW5jdGlvbi5wb3dlckJldCh0aGlzLmFkZHNlbGZDaGlwLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOmHjee9rmluZm/vvIzkuIvkuIDmnJ/lvIDlp4vml7bosIPnlKhcbiAgICAgKi9cbiAgICByZXNldEluZm8gOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLnBvY2tlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5vZGRUeXBlID0gMjtcbiAgICAgICAgdGhpcy5iZXRTdGF0dXMgPSAxO1xuICAgICAgICB0aGlzLmJldE51bVRvdGFsMSA9IDA7XG4gICAgICAgIHRoaXMuYmV0TnVtVG90YWwyID0gMDtcbiAgICAgICAgdGhpcy5iZXROdW0gPSAwO1xuICAgICAgICB0aGlzLmJldExpc3QgPSBbXTtcbiAgICAgICAgdGhpcy53aW4gPSAtMTtcbiAgICAgICAgdGhpcy50eXBlcyA9IC0xO1xuICAgICAgICB0aGlzLnBva2VyTGlnaHQgPSBbXTtcbiAgICAgICAgdGhpcy5saWd0aEZsYWcgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5pu05paw6YCJ6aG5aW5mb1xuICAgICAqIEBwYXJhbSBzdGF0dXMgMTAwLeWIneWni+WMliAgIDEwMS3mipXms6ggIDEwMi3muIXnqbrmipXms6ggIDEwMy3nu5PnrpcgIDEwNC3ojrflj5bkuozpmLbmrrXmlbDmja5cbiAgICAgKi9cbiAgICB1cGRhdGFJbmZvIDogZnVuY3Rpb24oc3RhdHVzKXtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuICAgICAgICBcbiAgICAgICAgaWYoc3RhdHVzID09IDEwMCl7XG4gICAgICAgICAgICB2YXIgaW5pdERhdGEgPSBuZXREYXRhLmluaXREYXRhO1xuICAgICAgICAgICAgaWYodGhpcy5wb3dlckZsYWcpe1xuICAgICAgICAgICAgICAgIGlmKGluaXREYXRhLnBvY2tlckxpc3Qpe1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgaW5pdERhdGEucG9ja2VyTGlzdC5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnBvd2VySWQgPT0gaW5pdERhdGEucG9ja2VyTGlzdFtpXS5wb3dlcklkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJ0aGlzLnBvd2VySWQgXCIsIHRoaXMucG93ZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5pdERhdGEucG9ja2VyTGlzdFtpXS5wb2NrZXJzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2NrZXJzID0gaW5pdERhdGEucG9ja2VyTGlzdFtpXS5wb2NrZXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJ0aGlzLnBvY2tlcnNcIiwgdGhpcy5wb2NrZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5cyA9IGluaXREYXRhLnBvY2tlckxpc3RbaV0uaGlzdG9yeXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRoaXMuYmV0RmxhZyl7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGluaXREYXRhLm9kZHNMaXN0Lmxlbmd0aDsgKytpKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5iZXRJZCA9PSBpbml0RGF0YS5vZGRzTGlzdFtpXS5pZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJvZGRzMiBcIiwgaW5pdERhdGEub2Rkc0xpc3RbaV0ub2RkczIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gaW5pdERhdGEub2Rkc0xpc3RbaV0ub3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRzMSA9IGluaXREYXRhLm9kZHNMaXN0W2ldLm9kZHMxO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRzMiA9IGluaXREYXRhLm9kZHNMaXN0W2ldLm9kZHMyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZXRTdGF0dXMgPSBpbml0RGF0YS5vZGRzTGlzdFtpXS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8v5oqV5rOo6aKdLOeUqOS6juaBouWkjVxuICAgICAgICAgICAgICAgIGlmKGluaXREYXRhLmJldHMpe1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgaW5pdERhdGEuYmV0cy5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpbml0RGF0YS5iZXRzW2ldLmlkID09IHRoaXMuYmV0SWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluaXREYXRhLmJldHNbaV0udGltZUZsYWcgPT0gMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmV0TnVtVG90YWwxID0gaW5pdERhdGEuYmV0c1tpXS50b3RhbEJldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZXROdW1Ub3RhbDIgPSBpbml0RGF0YS5iZXRzW2ldLnRvdGFsQmV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHN0YXR1cyA9PSAxMDEpe1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihzdGF0dXMgPT0gMTAyKXtcbiAgICAgICAgICAgIGlmKG5ldERhdGEudGltZUZsYWcgPT0gMSl7XG4gICAgICAgICAgICAgICAgdGhpcy5iZXROdW1Ub3RhbDEgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLmJldE51bVRvdGFsMiA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJldExpc3QgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHN0YXR1cyA9PSAxMDMpe1xuICAgICAgICAgICAgdmFyIHJld2FyZERhdGEgPSBuZXREYXRhLnJld2FyZERhdGE7XG4gICAgICAgICAgICBpZih0aGlzLnBvd2VyRmxhZyl7XG4gICAgICAgICAgICAgICAgdmFyIGxvdHRlcnkgPSByZXdhcmREYXRhLmxvdHRlcnk7XG4gICAgICAgICAgICAgICAgLy92YXIgaWRzdHJpbmcgPSBcInBvd2VyXCIrIHRoaXMucG93ZXJJZDtcblxuICAgICAgICAgICAgICAgLy8gdmFyIHBvY2tlcnMgPSBsb3R0ZXJ5LmNhY2hlLmlkc3RyaW5nLnBvY2tlcnM7XG4gICAgICAgICAgICAgICAgLy90aGlzLndpbiA9IGxvdHRlcnkuY2FjaGUuaWRzdHJpbmcud2luO1xuICAgICAgICAgICAgICAgIC8vdGhpcy50eXBlcyA9IGxvdHRlcnkuY2FjaGUuaWRzdHJpbmcudHlwZXM7XG4gICAgICAgICAgICAgICAgLy90aGlzLmhpc3RvcnlzLnBvcCgpO1xuICAgICAgICAgICAgICAgLy8gdGhpcy5oaXN0b3J5cy51bnNoaWZ0KHRoaXMud2luKTtcbiAgICAgICAgICAgICAgICAvL3RoaXMucG9ja2Vycy5wdXNoKHBvY2tlcnMpO1xuXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbG90dGVyeS5jYWNoZS5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGxvdHRlcnkuY2FjaGVbaV0ucG93ZXJJZCA9PSB0aGlzLnBvd2VySWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aW4gPSBsb3R0ZXJ5LmNhY2hlW2ldLndpbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnlzLnVuc2hpZnQodGhpcy53aW4pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBsb3R0ZXJ5LmNhY2hlW2ldLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvY2tlcnMucHVzaChsb3R0ZXJ5LmNhY2hlW2ldLnBvY2tlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCIxMDMgcG9ja2VycyBsZW5ndGggaXMgXCIsIHRoaXMucG9ja2Vycy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/niYzlnovpq5jkuq5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9rZXJMaWdodCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50eXBlcyA9PT0gMCB8fCB0aGlzLnR5cGVzID09IDEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pWj54mM77yM6YO95LiN5LquXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMudHlwZXMgPT0gMil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lr7nlrZBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnBvY2tlcnNbMF0udmFsID09IHRoaXMucG9ja2Vyc1sxXS52YWwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBva2VyTGlnaHQgPSBbMCwgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5wb2NrZXJzWzBdLnZhbCA9PSB0aGlzLnBvY2tlcnNbMl0udmFsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2tlckxpZ2h0ID0gWzAsIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMucG9ja2Vyc1sxXS52YWwgPT0gdGhpcy5wb2NrZXJzWzJdLnZhbCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9rZXJMaWdodCA9IFsxLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5a+55a2Q5oqV5rOo6aG56auY5LquXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5iZXRJZCA9PSA1KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWd0aEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnR5cGVzID09IDYpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9rZXJMaWdodCA9IFswLCAxLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiJ5ZCM5Y+35oqV5rOo6aG56auY5LquXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5iZXRJZCA9PSA2KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWd0aEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBva2VyTGlnaHQgPSBbMCwgMSwgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WFtuS7lueJjOWei+aKleazqOmhuemrmOS6rlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYmV0SWQgPT0gNyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlndGhGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLmJldEZsYWcpe1xuICAgICAgICAgICAgICAgIC8vIGNjLmxvZyhcIm9kZHMyIFwiLCByZXdhcmREYXRhLm9kZHNMaXN0WzBdLm9kZHMyKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmV3YXJkRGF0YS5vZGRzTGlzdC5sZW5ndGg7ICsraSl7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmJldElkID09IHJld2FyZERhdGEub2Rkc0xpc3RbaV0uaWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwib2RkczIgXCIsIHJld2FyZERhdGEub2Rkc0xpc3RbaV0ub2RkczIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gcmV3YXJkRGF0YS5vZGRzTGlzdFtpXS5vcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9kZHMxID0gcmV3YXJkRGF0YS5vZGRzTGlzdFtpXS5vZGRzMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2RkczIgPSByZXdhcmREYXRhLm9kZHNMaXN0W2ldLm9kZHMyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZXRTdGF0dXMgPSByZXdhcmREYXRhLm9kZHNMaXN0W2ldLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoc3RhdHVzID09IDEwNCl7XG4gICAgICAgICAgICB2YXIgc2Vjb25kRGF0YSA9IG5ldERhdGEuc2Vjb25kRGF0YTtcbiAgICAgICAgICAgIGlmKHRoaXMucG93ZXJGbGFnKXtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2Vjb25kRGF0YS5wb2NrZXJMaXN0Lmxlbmd0aDsgKytpKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wb3dlcklkID09IHNlY29uZERhdGEucG9ja2VyTGlzdFtpXS5wb3dlcklkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9ja2VycyA9IHNlY29uZERhdGEucG9ja2VyTGlzdFtpXS5wb2NrZXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRoaXMuYmV0RmxhZyl7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNlY29uZERhdGEub2Rkc0xpc3QubGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmJldElkID09IHNlY29uZERhdGEub2Rkc0xpc3RbaV0uaWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gc2Vjb25kRGF0YS5vZGRzTGlzdFtpXS5vcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+i/memHjOWIpOaWreS4gOS4i+i1lOeOh+aYr+WPmOWkp+WPmOWwj1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRzMSA9IHNlY29uZERhdGEub2Rkc0xpc3RbaV0ub2RkczE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9kZHMyID0gc2Vjb25kRGF0YS5vZGRzTGlzdFtpXS5vZGRzMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMub2RkczIgPiB0aGlzLm9kZHMxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9kZFR5cGUgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLm9kZHMyIDwgdGhpcy5vZGRzMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRUeXBlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRUeXBlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZXRTdGF0dXMgPSBzZWNvbmREYXRhLm9kZHNMaXN0W2ldLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvL+abtOaWsFVJXG4gICAgdXBkYXRhVUk6ZnVuY3Rpb24oc3RhdHVzKVxuICAgIHtcbiAgICAgICAgaWYodGhpcy5wb3dlckZsYWcpXG4gICAgICAgIHtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgdGhpcy5ub1Bva2Vyc05vZGUubGVuZ3RoOyBqICsrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub1Bva2Vyc05vZGVbal0uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV0RGF0YSA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucG9ja2Vycy5sZW5ndGg7IGkgKyspXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vUG9rZXJzTm9kZVtpXS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9rZXJOdW0gPSB0aGlzLnBva2Vyc05vZGVbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJudW1cIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnBvY2tlcnNbaV0udmFsID09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSBcIkFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnBvY2tlcnNbaV0udmFsID09IDExKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gXCJKXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5wb2NrZXJzW2ldLnZhbCA9PSAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IFwiUVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMucG9ja2Vyc1tpXS52YWwgPT0gMTMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSBcIktcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gdGhpcy5wb2NrZXJzW2ldLnZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwicG9ja2VyIG51bSBpcyBcIiwgbnVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2tlck51bS5zdHJpbmcgPSBudW07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBva2VyVHlwZSA9IHRoaXMucG9rZXJzTm9kZVtpXS5nZXRDaGlsZEJ5TmFtZShcInR5cGVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCh0aGlzLnBvY2tlcnNbaV0uY29sb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gXCLlv4PlvaJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IFwi6I+x5b2iXCI7ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBcIuahg+W9olwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gXCLmooXoirHlvaJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9rZXJUeXBlLnN0cmluZyA9IGNvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcInBvY2tlciBjb2xvciBpcyBcIiwgY29sb3IpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gXG5cblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucG9rZXJMaWdodC5sZW5ndGg7IGkgKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wb2tlckxpZ2h0W2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucHVrZUhpZ2hMaWdodE5vZGVBcnJheVtpbmRleF0uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodGhpcy5iZXRGbGFnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBuZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcbiAgICAgICAgICAgICAgICBpZihuZXREYXRhLnRpbWVGbGFnID09IDEpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9kZHNMYWJlbC5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMub2RkczEgKyBcIuWAjVwiO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9kZHNMYWJlbC5jb2xvciA9IG5ldyBjYy5Db2xvcigyNTUsIDI1NSwgMjU1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRzTGFiZWwuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSB0aGlzLm9kZHMyICsgXCLlgI1cIjtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5vZGRUeXBlID09IDApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2Rkc0xhYmVsLmNvbG9yID0gbmV3IGNjLkNvbG9yKDI1NSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLm9kZFR5cGUgPT0gMSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRzTGFiZWwuY29sb3IgPSBuZXcgY2MuQ29sb3IoNDUsIDY3LCAxMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZGRzTGFiZWwuY29sb3IgPSBuZXcgY2MuQ29sb3IoMjU1LCAyNTUsIDI1NSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodGhpcy5wb3dlckZsYWcgJiYgdGhpcy5wb3dlcklkICE9IDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeXNMaXN0Tm9kZS5sZW5ndGg7IGkgKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGlzdG9yeUljb25Ob2RlID0gdGhpcy5oaXN0b3J5c0xpc3ROb2RlW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmhpc3RvcnlzW2ldID09IDEpLy/og5xcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUljb25Ob2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDI1NSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmhpc3RvcnlzW2ldID09IDApLy/otJ9cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUljb25Ob2RlLkNvbG9yID0gbmV3IGNjLkNvbG9yKDQ1LCA2NywgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlLy/lubNcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUljb25Ob2RlLkNvbG9yID0gbmV3IGNjLkNvbG9yKDI1NSwgMjU1LCAyNTUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgXG4gICAgICAgIGlmKHRoaXMuYmV0RmxhZyAmJiAhdGhpcy5wb3dlckZsYWcpe1xuXG4gICAgICAgICAgICAgICAgaWYodGhpcy5iZXRTdGF0dXMgPT0gMSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9rZXJOb1RvdWNoTGF5ZXIuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9rZXJOb1RvdWNoTGF5ZXIuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYodGhpcy5saWd0aEZsYWcgPT0gdHJ1ZSkvL+S4reWllue7k+aenOmrmOS6rlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZXRIaWdoTGlnaHRMYXllci5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJldEhpZ2hMaWdodExheWVyLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICB9LFxuICAgIFxuICAgIC8v6aOe57uT5p6c77yM55uW5oizXG4gICAgcHV0U3RhbXBPbkFjdGlvbjogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgY2MubG9nKFwiZmx5U3RhbXAhISFcIik7XG4gICAgICAgIHZhciBuZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcbiAgICAgICAgdmFyIHJld2FyZERhdGEgPSBuZXREYXRhLnJld2FyZERhdGE7XG4gICAgICAgIHZhciBjb252ZXJ0Tm9kZSA9IGNjLmZpbmQoXCJDYW52YXMvY29udmVydE5vZGVcIik7XG4gICAgICAgIHZhciBjb252ZXJ0Tm9kZUpTID0gY29udmVydE5vZGUuZ2V0Q29tcG9uZW50KFwiY29udmVydE5vZGVcIik7XG4gICAgICAgIGNvbnZlcnROb2RlSlMuZmx5UmV3YXJkTm9kZShyZXdhcmREYXRhLmxvdHRlcnkud2luLCB0aGlzLnBvd2VySWQpO1xuXG4gICAgICAgIFxuICAgICAgICAvLzEwc+aUtuWbnlxuICAgICAgICB0aGlzLnNjaGVkdWxlT25jZSh0aGlzLmdldGJhY2ssIDEuMyk7XG4gICAgfSxcbiAgICBcbiAgICBnZXRiYWNrOiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgZ2FtZUpTID0gY2MuZmluZChcIkNhbnZhc1wiKS5nZXRDb21wb25lbnQoXCJnYW1lXCIpO1xuICAgICAgICBnYW1lSlMucmV3YXJkRmx5RmluaXNoZWRDYWxsYmFjaygpO1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICog6Ieq5bex5oqV5rOo6aOe562556CBXG4gICAgICogQHBhcmFtIGNoaXBJbmRleCDmpbzkuIvnrbnnoIHnmoRpbmRleFxuICAgICAqL1xuICAgIGFkZHNlbGZDaGlwIDogZnVuY3Rpb24oY2hpcEluZGV4LCBzZWxmKXtcbiAgICAgICAgc2VsZi5jdXJyZW50Q2hpcEluZGV4ID0gY2hpcEluZGV4O1xuICAgICAgICB2YXIgbmV0RGF0YSA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCk7XG4gICAgICAgIHZhciBiZXQgPSBuZXREYXRhLmluaXREYXRhLmJldExpc3RbY2hpcEluZGV4XTtcblxuICAgICAgICAvL+aKleazqOaAu+mineWPmOWMllxuICAgICAgICBpZihuZXREYXRhLnRpbWVGbGFnID09IDEpe1xuICAgICAgICAgICAgc2VsZi5iZXROdW1Ub3RhbDEgKz0gYmV0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBzZWxmLmJldE51bVRvdGFsMiArPSBiZXQ7XG4gICAgICAgIH1cbiAgICAgICAgXG5cbiAgICAgICAgLy/mo4Dmn6XmmK/lkKblt7Lnu4/lrZjlnKjor6XnsbvlnovnrbnnoIFcbiAgICAgICAgdmFyIGV4aXRGbGFnID0gZmFsc2U7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzZWxmLmJldExpc3QubGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgaWYoc2VsZi5iZXRMaXN0W2ldLmJldCA9PSBiZXQpe1xuICAgICAgICAgICAgICAgIHNlbGYuYmV0TGlzdFtpXS5udW0rKztcbiAgICAgICAgICAgICAgICBleGl0RmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZighZXhpdEZsYWcpe1xuICAgICAgICAgICAgdmFyIG9iaiA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgICAgIG9iai5pZCA9IHNlbGYuYmV0SWQ7XG4gICAgICAgICAgICBvYmouYmV0ID0gYmV0O1xuICAgICAgICAgICAgb2JqLm51bSA9IDE7XG4gICAgICAgICAgICBpZihuZXREYXRhLnRpbWVGbGFnID09IDEpe1xuICAgICAgICAgICAgICAgIG9iai5vZGRzID0gc2VsZi5vZGRzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgb2JqLm9kZHMgPSBzZWxmLm9kZHMyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZWxmLmJldExpc3QucHVzaChvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/ot5HliqjnlLvvvIznm67moIfkvY3nva7mmK/kuKrlm7rlrprlgLzvvIzkuIDpmLbmrrXlkozkuozpmLbmrrXliIbliKvlm7rlrprkuIDkuKrnrbnnoIHkvY3nva5cbiAgICAgICAgLy/ot5HlrozliqjnlLvlkI7vvIzmm7TmlrDmipXms6jpop3nmoRsYWJlbFxuICAgICAgICBpZihzZWxmLmJldEZsYWcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjb252ZXJ0Tm9kZSA9IGNjLmZpbmQoXCJDYW52YXMvY29udmVydE5vZGVcIik7XG4gICAgICAgICAgICB2YXIgY29udmVydE5vZGVKUyA9IGNvbnZlcnROb2RlLmdldENvbXBvbmVudChcImNvbnZlcnROb2RlXCIpO1xuICAgICAgICAgICAgY29udmVydE5vZGVKUy5jaGlwRmx5QWN0aW9uKGJldCwgY2hpcEluZGV4LCBzZWxmLmJldElkLTEsIHRydWUsIHNlbGYpO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgIH0sXG4gICAgXG4gICAgZmx5Q2hpcE5vZGVGaW5pc2hlZDogZnVuY3Rpb24oc2VuZGVyLCBmbGFnKVxuICAgIHtcbiAgICAgICAgdmFyIGZsYWcgPSBmbGFnO1xuICAgICAgICB2YXIgc2VsZiA9IHNlbmRlcjtcbiAgICAgICAgIHZhciBuZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcbiAgICAgICAgIGlmKGZsYWcpXG4gICAgICAgICB7XG4gICAgICAgICAgICBpZihuZXREYXRhLnRpbWVGbGFnID09IDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWxmQ2hpcE5vZGVbMF0uYWN0aXZlID0gZmxhZztcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGZDaGlwTm9kZVswXS56SW5kZXggPSA1MDA7XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gc2VsZi5zZWxmQ2hpcE5vZGVbMF0uZ2V0Q2hpbGRCeU5hbWUoXCJMYWJlbFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xuICAgICAgICAgICAgICAgIGxhYmVsLnN0cmluZyA9IHNlbGYuYmV0TnVtVG90YWwxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNlbGYuc2VsZkNoaXBOb2RlWzFdLmFjdGl2ZSA9IGZsYWc7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWxmQ2hpcE5vZGVbMV0uekluZGV4ID0gNTAwO1xuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IHNlbGYuc2VsZkNoaXBOb2RlWzFdLmdldENoaWxkQnlOYW1lKFwiTGFiZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcbiAgICAgICAgICAgICAgICBsYWJlbC5zdHJpbmcgPSBzZWxmLmJldE51bVRvdGFsMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cblxuICAgIH0sXG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICog6Ieq5bex562556CB6aOe5ZueXG4gICAgICogQHBhcmFtIGNoaXBOdW0gIOmjnuWbnueahOetueeggeaVsOminVxuICAgICAqL1xuICAgIHJlZHVjZVNlbGZDaGlwIDogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuICAgICAgICBpZihuZXREYXRhLnRpbWVGbGFnID09IDEpe1xuICAgICAgICAgICAgdGhpcy5iZXROdW1Ub3RhbDEgLT0gdGhpcy5iZXROdW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRoaXMuYmV0TnVtVG90YWwyIC09IHRoaXMuYmV0TnVtO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgc2VyID0gbnVsbDtcbiAgICAgICAgdmFyIHRvdGFsTW9uZXkgPSBcIlwiO1xuICAgICAgICBpZihuZXREYXRhLnRpbWVGbGFnID09IDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNlciA9IHRoaXMuc2VsZkNoaXBOb2RlWzBdO1xuICAgICAgICAgICAgdG90YWxNb25leSA9IHRoaXMuYmV0TnVtVG90YWwxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgc2VyID0gdGhpcy5zZWxmQ2hpcE5vZGVbMV07XG4gICAgICAgICAgICB0b3RhbE1vbmV5ID0gdGhpcy5iZXROdW1Ub3RhbDI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc2VyLmFjdGl2ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmKHRvdGFsTW9uZXk+MClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5YWI6ZqQ6JePXG4gICAgICAgICAgICBzZXIuYWN0aXZlID0gZmxhZztcbiAgICAgICAgICAgIHNlci56SW5kZXggPSA1MDA7XG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBzZXIuZ2V0Q2hpbGRCeU5hbWUoXCJMYWJlbFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xuICAgICAgICAgICAgbGFiZWwuc3RyaW5nID0gdG90YWxNb25leTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy/lho3mib7nrbnnoIHpo55cbiAgICAgICAgICAgIHZhciBjb252ZXJ0Tm9kZSA9IGNjLmZpbmQoXCJDYW52YXMvY29udmVydE5vZGVcIik7XG4gICAgICAgICAgICB2YXIgY29udmVydE5vZGVKUyA9IGNvbnZlcnROb2RlLmdldENvbXBvbmVudChcImNvbnZlcnROb2RlXCIpO1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmKHRvdGFsTW9uZXk+MClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnZlcnROb2RlSlMuY2hpcEZseUFjdGlvbih0aGlzLmJldE51bSwgdGhpcy5jdXJyZW50Q2hpcEluZGV4LCB0aGlzLmJldElkLTEsIGZhbHNlLCB0aGlzKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqICDliqjkvZzpo57lm57mnaVcbiAgICAgKi9cbiAgICBmbHlCYWNrOiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZkNoaXAoKTtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIOa4heepuuetueeggVxuICAgICAqL1xuICAgIGNsZWFyU2VsZkNoaXAgOiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgbmV0RGF0YSA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCk7XG4gICAgICAgIGlmKG5ldERhdGEudGltZUZsYWcgPT0gMSl7XG4gICAgICAgICAgICB0aGlzLmJldE51bSA9IHRoaXMuYmV0TnVtVG90YWwxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLmJldE51bSA9IHRoaXMuYmV0TnVtVG90YWwyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVkdWNlU2VsZkNoaXAoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5YW25LuW546p5a626aOe562556CBXG4gICAgICogQHBhcmFtIHNlYXRJbmRleCDlhbbku5bnjqnlrrbluqfkvY3lj7dcbiAgICAgKi9cbiAgICBhZGRPdGhlckNoaXAgOiBmdW5jdGlvbihzZWF0SW5kZXgpe1xuXG4gICAgfVxuXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xuXG4gICAgLy8gfSxcbn0pO1xuIiwiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICB9LFxuXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYW5nbGUgPSAwO1xuICAgIH0sXG5cbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xuICAgICB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgdGhpcy5hbmdsZSArPSBkdCAqIDM2MDtcbiAgICAgICAgIFxuICAgICAgICAgaWYodGhpcy5hbmdsZSA+IDM2MClcbiAgICAgICAgIHtcbiAgICAgICAgICAgICB0aGlzLmFuZ2xlIC09IDM2MDtcbiAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICAgdGhpcy5ub2RlLnJvdGF0aW9uID0gIHRoaXMuYW5nbGU7XG4gICAgIH0sXG59KTtcbiIsInZhciBDcnlwdG9KUz1yZXF1aXJlKFwiLi9jb3JlXCIpO3JlcXVpcmUoXCIuLi9hZXMvbWQ1XCIpO3JlcXVpcmUoXCIuLi9hZXMvZW5jLWJhc2U2NFwiKTtyZXF1aXJlKFwiLi4vYWVzL2V2cGtkZlwiKTtyZXF1aXJlKFwiLi4vYWVzL2NpcGhlci1jb3JlXCIpO3JlcXVpcmUoXCIuLi9hZXMvbW9kZS1lY2JcIik7KGZ1bmN0aW9uKCl7dmFyIEM9Q3J5cHRvSlM7dmFyIENfbGliPUMubGliO3ZhciBCbG9ja0NpcGhlcj1DX2xpYi5CbG9ja0NpcGhlcjt2YXIgQ19hbGdvPUMuYWxnbzt2YXIgU0JPWD1bXTt2YXIgSU5WX1NCT1g9W107dmFyIFNVQl9NSVhfMD1bXTt2YXIgU1VCX01JWF8xPVtdO3ZhciBTVUJfTUlYXzI9W107dmFyIFNVQl9NSVhfMz1bXTt2YXIgSU5WX1NVQl9NSVhfMD1bXTt2YXIgSU5WX1NVQl9NSVhfMT1bXTt2YXIgSU5WX1NVQl9NSVhfMj1bXTt2YXIgSU5WX1NVQl9NSVhfMz1bXTsoZnVuY3Rpb24oKXt2YXIgZD1bXTtmb3IodmFyIGk9MDtpPDI1NjtpKyspe2lmKGk8MTI4KXtkW2ldPWk8PDF9ZWxzZXtkW2ldPShpPDwxKV4yODN9fXZhciB4PTA7dmFyIHhpPTA7Zm9yKHZhciBpPTA7aTwyNTY7aSsrKXt2YXIgc3g9eGleKHhpPDwxKV4oeGk8PDIpXih4aTw8MyleKHhpPDw0KTtzeD0oc3g+Pj44KV4oc3gmMjU1KV45OTtTQk9YW3hdPXN4O0lOVl9TQk9YW3N4XT14O3ZhciB4Mj1kW3hdO3ZhciB4ND1kW3gyXTt2YXIgeDg9ZFt4NF07dmFyIHQ9KGRbc3hdKjI1NyleKHN4KjE2ODQzMDA4KTtTVUJfTUlYXzBbeF09KHQ8PDI0KXwodD4+PjgpO1NVQl9NSVhfMVt4XT0odDw8MTYpfCh0Pj4+MTYpO1NVQl9NSVhfMlt4XT0odDw8OCl8KHQ+Pj4yNCk7U1VCX01JWF8zW3hdPXQ7dmFyIHQ9KHg4KjE2ODQzMDA5KV4oeDQqNjU1MzcpXih4MioyNTcpXih4KjE2ODQzMDA4KTtJTlZfU1VCX01JWF8wW3N4XT0odDw8MjQpfCh0Pj4+OCk7SU5WX1NVQl9NSVhfMVtzeF09KHQ8PDE2KXwodD4+PjE2KTtJTlZfU1VCX01JWF8yW3N4XT0odDw8OCl8KHQ+Pj4yNCk7SU5WX1NVQl9NSVhfM1tzeF09dDtpZigheCl7eD14aT0xfWVsc2V7eD14Ml5kW2RbZFt4OF54Ml1dXTt4aV49ZFtkW3hpXV19fX0oKSk7dmFyIFJDT049WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdO3ZhciBBRVM9Q19hbGdvLkFFUz1CbG9ja0NpcGhlci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dmFyIGtleT10aGlzLl9rZXk7dmFyIGtleVdvcmRzPWtleS53b3Jkczt2YXIga2V5U2l6ZT1rZXkuc2lnQnl0ZXMvNDt2YXIgblJvdW5kcz10aGlzLl9uUm91bmRzPWtleVNpemUrNjt2YXIga3NSb3dzPShuUm91bmRzKzEpKjQ7dmFyIGtleVNjaGVkdWxlPXRoaXMuX2tleVNjaGVkdWxlPVtdO2Zvcih2YXIga3NSb3c9MDtrc1Jvdzxrc1Jvd3M7a3NSb3crKyl7aWYoa3NSb3c8a2V5U2l6ZSl7a2V5U2NoZWR1bGVba3NSb3ddPWtleVdvcmRzW2tzUm93XX1lbHNle3ZhciB0PWtleVNjaGVkdWxlW2tzUm93LTFdO2lmKCEoa3NSb3cla2V5U2l6ZSkpe3Q9KHQ8PDgpfCh0Pj4+MjQpO3Q9KFNCT1hbdD4+PjI0XTw8MjQpfChTQk9YWyh0Pj4+MTYpJjI1NV08PDE2KXwoU0JPWFsodD4+PjgpJjI1NV08PDgpfFNCT1hbdCYyNTVdO3RePVJDT05bKGtzUm93L2tleVNpemUpfDBdPDwyNH1lbHNle2lmKGtleVNpemU+NiYma3NSb3cla2V5U2l6ZT09NCl7dD0oU0JPWFt0Pj4+MjRdPDwyNCl8KFNCT1hbKHQ+Pj4xNikmMjU1XTw8MTYpfChTQk9YWyh0Pj4+OCkmMjU1XTw8OCl8U0JPWFt0JjI1NV19fWtleVNjaGVkdWxlW2tzUm93XT1rZXlTY2hlZHVsZVtrc1Jvdy1rZXlTaXplXV50fX12YXIgaW52S2V5U2NoZWR1bGU9dGhpcy5faW52S2V5U2NoZWR1bGU9W107Zm9yKHZhciBpbnZLc1Jvdz0wO2ludktzUm93PGtzUm93cztpbnZLc1JvdysrKXt2YXIga3NSb3c9a3NSb3dzLWludktzUm93O2lmKGludktzUm93JTQpe3ZhciB0PWtleVNjaGVkdWxlW2tzUm93XX1lbHNle3ZhciB0PWtleVNjaGVkdWxlW2tzUm93LTRdfWlmKGludktzUm93PDR8fGtzUm93PD00KXtpbnZLZXlTY2hlZHVsZVtpbnZLc1Jvd109dH1lbHNle2ludktleVNjaGVkdWxlW2ludktzUm93XT1JTlZfU1VCX01JWF8wW1NCT1hbdD4+PjI0XV1eSU5WX1NVQl9NSVhfMVtTQk9YWyh0Pj4+MTYpJjI1NV1dXklOVl9TVUJfTUlYXzJbU0JPWFsodD4+PjgpJjI1NV1dXklOVl9TVUJfTUlYXzNbU0JPWFt0JjI1NV1dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbihNLG9mZnNldCl7dGhpcy5fZG9DcnlwdEJsb2NrKE0sb2Zmc2V0LHRoaXMuX2tleVNjaGVkdWxlLFNVQl9NSVhfMCxTVUJfTUlYXzEsU1VCX01JWF8yLFNVQl9NSVhfMyxTQk9YKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKE0sb2Zmc2V0KXt2YXIgdD1NW29mZnNldCsxXTtNW29mZnNldCsxXT1NW29mZnNldCszXTtNW29mZnNldCszXT10O3RoaXMuX2RvQ3J5cHRCbG9jayhNLG9mZnNldCx0aGlzLl9pbnZLZXlTY2hlZHVsZSxJTlZfU1VCX01JWF8wLElOVl9TVUJfTUlYXzEsSU5WX1NVQl9NSVhfMixJTlZfU1VCX01JWF8zLElOVl9TQk9YKTt2YXIgdD1NW29mZnNldCsxXTtNW29mZnNldCsxXT1NW29mZnNldCszXTtNW29mZnNldCszXT10fSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKE0sb2Zmc2V0LGtleVNjaGVkdWxlLFNVQl9NSVhfMCxTVUJfTUlYXzEsU1VCX01JWF8yLFNVQl9NSVhfMyxTQk9YKXt2YXIgblJvdW5kcz10aGlzLl9uUm91bmRzO3ZhciBzMD1NW29mZnNldF1ea2V5U2NoZWR1bGVbMF07dmFyIHMxPU1bb2Zmc2V0KzFdXmtleVNjaGVkdWxlWzFdO3ZhciBzMj1NW29mZnNldCsyXV5rZXlTY2hlZHVsZVsyXTt2YXIgczM9TVtvZmZzZXQrM11ea2V5U2NoZWR1bGVbM107dmFyIGtzUm93PTQ7Zm9yKHZhciByb3VuZD0xO3JvdW5kPG5Sb3VuZHM7cm91bmQrKyl7dmFyIHQwPVNVQl9NSVhfMFtzMD4+PjI0XV5TVUJfTUlYXzFbKHMxPj4+MTYpJjI1NV1eU1VCX01JWF8yWyhzMj4+PjgpJjI1NV1eU1VCX01JWF8zW3MzJjI1NV1ea2V5U2NoZWR1bGVba3NSb3crK107dmFyIHQxPVNVQl9NSVhfMFtzMT4+PjI0XV5TVUJfTUlYXzFbKHMyPj4+MTYpJjI1NV1eU1VCX01JWF8yWyhzMz4+PjgpJjI1NV1eU1VCX01JWF8zW3MwJjI1NV1ea2V5U2NoZWR1bGVba3NSb3crK107dmFyIHQyPVNVQl9NSVhfMFtzMj4+PjI0XV5TVUJfTUlYXzFbKHMzPj4+MTYpJjI1NV1eU1VCX01JWF8yWyhzMD4+PjgpJjI1NV1eU1VCX01JWF8zW3MxJjI1NV1ea2V5U2NoZWR1bGVba3NSb3crK107dmFyIHQzPVNVQl9NSVhfMFtzMz4+PjI0XV5TVUJfTUlYXzFbKHMwPj4+MTYpJjI1NV1eU1VCX01JWF8yWyhzMT4+PjgpJjI1NV1eU1VCX01JWF8zW3MyJjI1NV1ea2V5U2NoZWR1bGVba3NSb3crK107czA9dDA7czE9dDE7czI9dDI7czM9dDN9dmFyIHQwPSgoU0JPWFtzMD4+PjI0XTw8MjQpfChTQk9YWyhzMT4+PjE2KSYyNTVdPDwxNil8KFNCT1hbKHMyPj4+OCkmMjU1XTw8OCl8U0JPWFtzMyYyNTVdKV5rZXlTY2hlZHVsZVtrc1JvdysrXTt2YXIgdDE9KChTQk9YW3MxPj4+MjRdPDwyNCl8KFNCT1hbKHMyPj4+MTYpJjI1NV08PDE2KXwoU0JPWFsoczM+Pj44KSYyNTVdPDw4KXxTQk9YW3MwJjI1NV0pXmtleVNjaGVkdWxlW2tzUm93KytdO3ZhciB0Mj0oKFNCT1hbczI+Pj4yNF08PDI0KXwoU0JPWFsoczM+Pj4xNikmMjU1XTw8MTYpfChTQk9YWyhzMD4+PjgpJjI1NV08PDgpfFNCT1hbczEmMjU1XSlea2V5U2NoZWR1bGVba3NSb3crK107dmFyIHQzPSgoU0JPWFtzMz4+PjI0XTw8MjQpfChTQk9YWyhzMD4+PjE2KSYyNTVdPDwxNil8KFNCT1hbKHMxPj4+OCkmMjU1XTw8OCl8U0JPWFtzMiYyNTVdKV5rZXlTY2hlZHVsZVtrc1JvdysrXTtNW29mZnNldF09dDA7TVtvZmZzZXQrMV09dDE7TVtvZmZzZXQrMl09dDI7TVtvZmZzZXQrM109dDN9LGtleVNpemU6MjU2LzMyfSk7Qy5BRVM9QmxvY2tDaXBoZXIuX2NyZWF0ZUhlbHBlcihBRVMpfSgpKSIsInZhciBDcnlwdG9KUz1yZXF1aXJlKFwiLi9jb3JlXCIpO0NyeXB0b0pTLmxpYi5DaXBoZXJ8fChmdW5jdGlvbih1bmRlZmluZWQpe3ZhciBDPUNyeXB0b0pTO3ZhciBDX2xpYj1DLmxpYjt2YXIgQmFzZT1DX2xpYi5CYXNlO3ZhciBXb3JkQXJyYXk9Q19saWIuV29yZEFycmF5O3ZhciBCdWZmZXJlZEJsb2NrQWxnb3JpdGhtPUNfbGliLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG07dmFyIENfZW5jPUMuZW5jO3ZhciBVdGY4PUNfZW5jLlV0Zjg7dmFyIEJhc2U2ND1DX2VuYy5CYXNlNjQ7dmFyIENfYWxnbz1DLmFsZ287dmFyIEV2cEtERj1DX2FsZ28uRXZwS0RGO3ZhciBDaXBoZXI9Q19saWIuQ2lwaGVyPUJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0uZXh0ZW5kKHtjZmc6QmFzZS5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oa2V5LGNmZyl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLGtleSxjZmcpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oa2V5LGNmZyl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGtleSxjZmcpfSxpbml0OmZ1bmN0aW9uKHhmb3JtTW9kZSxrZXksY2ZnKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoY2ZnKTt0aGlzLl94Zm9ybU1vZGU9eGZvcm1Nb2RlO3RoaXMuX2tleT1rZXk7dGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe0J1ZmZlcmVkQmxvY2tBbGdvcml0aG0ucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCl9LHByb2Nlc3M6ZnVuY3Rpb24oZGF0YVVwZGF0ZSl7dGhpcy5fYXBwZW5kKGRhdGFVcGRhdGUpO3JldHVybiB0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKGRhdGFVcGRhdGUpe2lmKGRhdGFVcGRhdGUpe3RoaXMuX2FwcGVuZChkYXRhVXBkYXRlKX12YXIgZmluYWxQcm9jZXNzZWREYXRhPXRoaXMuX2RvRmluYWxpemUoKTtyZXR1cm4gZmluYWxQcm9jZXNzZWREYXRhfSxrZXlTaXplOjEyOC8zMixpdlNpemU6MTI4LzMyLF9FTkNfWEZPUk1fTU9ERToxLF9ERUNfWEZPUk1fTU9ERToyLF9jcmVhdGVIZWxwZXI6KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gc2VsZWN0Q2lwaGVyU3RyYXRlZ3koa2V5KXtpZih0eXBlb2Yga2V5PT1cInN0cmluZ1wiKXtyZXR1cm4gUGFzc3dvcmRCYXNlZENpcGhlcn1lbHNle3JldHVybiBTZXJpYWxpemFibGVDaXBoZXJ9fXJldHVybiBmdW5jdGlvbihjaXBoZXIpe3JldHVybntlbmNyeXB0OmZ1bmN0aW9uKG1lc3NhZ2Usa2V5LGNmZyl7cmV0dXJuIHNlbGVjdENpcGhlclN0cmF0ZWd5KGtleSkuZW5jcnlwdChjaXBoZXIsbWVzc2FnZSxrZXksY2ZnKX0sZGVjcnlwdDpmdW5jdGlvbihjaXBoZXJ0ZXh0LGtleSxjZmcpe3JldHVybiBzZWxlY3RDaXBoZXJTdHJhdGVneShrZXkpLmRlY3J5cHQoY2lwaGVyLGNpcGhlcnRleHQsa2V5LGNmZyl9fX19KCkpfSk7dmFyIFN0cmVhbUNpcGhlcj1DX2xpYi5TdHJlYW1DaXBoZXI9Q2lwaGVyLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZmluYWxQcm9jZXNzZWRCbG9ja3M9dGhpcy5fcHJvY2VzcyghIVwiZmx1c2hcIik7cmV0dXJuIGZpbmFsUHJvY2Vzc2VkQmxvY2tzfSxibG9ja1NpemU6MX0pO3ZhciBDX21vZGU9Qy5tb2RlPXt9O3ZhciBCbG9ja0NpcGhlck1vZGU9Q19saWIuQmxvY2tDaXBoZXJNb2RlPUJhc2UuZXh0ZW5kKHtjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oY2lwaGVyLGl2KXtyZXR1cm4gdGhpcy5FbmNyeXB0b3IuY3JlYXRlKGNpcGhlcixpdil9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbihjaXBoZXIsaXYpe3JldHVybiB0aGlzLkRlY3J5cHRvci5jcmVhdGUoY2lwaGVyLGl2KX0saW5pdDpmdW5jdGlvbihjaXBoZXIsaXYpe3RoaXMuX2NpcGhlcj1jaXBoZXI7dGhpcy5faXY9aXZ9fSk7dmFyIENCQz1DX21vZGUuQ0JDPShmdW5jdGlvbigpe3ZhciBDQkM9QmxvY2tDaXBoZXJNb2RlLmV4dGVuZCgpO0NCQy5FbmNyeXB0b3I9Q0JDLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHdvcmRzLG9mZnNldCl7dmFyIGNpcGhlcj10aGlzLl9jaXBoZXI7dmFyIGJsb2NrU2l6ZT1jaXBoZXIuYmxvY2tTaXplO3hvckJsb2NrLmNhbGwodGhpcyx3b3JkcyxvZmZzZXQsYmxvY2tTaXplKTtjaXBoZXIuZW5jcnlwdEJsb2NrKHdvcmRzLG9mZnNldCk7dGhpcy5fcHJldkJsb2NrPXdvcmRzLnNsaWNlKG9mZnNldCxvZmZzZXQrYmxvY2tTaXplKX19KTtDQkMuRGVjcnlwdG9yPUNCQy5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbih3b3JkcyxvZmZzZXQpe3ZhciBjaXBoZXI9dGhpcy5fY2lwaGVyO3ZhciBibG9ja1NpemU9Y2lwaGVyLmJsb2NrU2l6ZTt2YXIgdGhpc0Jsb2NrPXdvcmRzLnNsaWNlKG9mZnNldCxvZmZzZXQrYmxvY2tTaXplKTtjaXBoZXIuZGVjcnlwdEJsb2NrKHdvcmRzLG9mZnNldCk7eG9yQmxvY2suY2FsbCh0aGlzLHdvcmRzLG9mZnNldCxibG9ja1NpemUpO3RoaXMuX3ByZXZCbG9jaz10aGlzQmxvY2t9fSk7ZnVuY3Rpb24geG9yQmxvY2sod29yZHMsb2Zmc2V0LGJsb2NrU2l6ZSl7dmFyIGl2PXRoaXMuX2l2O2lmKGl2KXt2YXIgYmxvY2s9aXY7dGhpcy5faXY9dW5kZWZpbmVkfWVsc2V7dmFyIGJsb2NrPXRoaXMuX3ByZXZCbG9ja31mb3IodmFyIGk9MDtpPGJsb2NrU2l6ZTtpKyspe3dvcmRzW29mZnNldCtpXV49YmxvY2tbaV19fXJldHVybiBDQkN9KCkpO3ZhciBDX3BhZD1DLnBhZD17fTt2YXIgUGtjczc9Q19wYWQuUGtjczc9e3BhZDpmdW5jdGlvbihkYXRhLGJsb2NrU2l6ZSl7dmFyIGJsb2NrU2l6ZUJ5dGVzPWJsb2NrU2l6ZSo0O3ZhciBuUGFkZGluZ0J5dGVzPWJsb2NrU2l6ZUJ5dGVzLWRhdGEuc2lnQnl0ZXMlYmxvY2tTaXplQnl0ZXM7dmFyIHBhZGRpbmdXb3JkPShuUGFkZGluZ0J5dGVzPDwyNCl8KG5QYWRkaW5nQnl0ZXM8PDE2KXwoblBhZGRpbmdCeXRlczw8OCl8blBhZGRpbmdCeXRlczt2YXIgcGFkZGluZ1dvcmRzPVtdO2Zvcih2YXIgaT0wO2k8blBhZGRpbmdCeXRlcztpKz00KXtwYWRkaW5nV29yZHMucHVzaChwYWRkaW5nV29yZCl9dmFyIHBhZGRpbmc9V29yZEFycmF5LmNyZWF0ZShwYWRkaW5nV29yZHMsblBhZGRpbmdCeXRlcyk7ZGF0YS5jb25jYXQocGFkZGluZyl9LHVucGFkOmZ1bmN0aW9uKGRhdGEpe3ZhciBuUGFkZGluZ0J5dGVzPWRhdGEud29yZHNbKGRhdGEuc2lnQnl0ZXMtMSk+Pj4yXSYyNTU7ZGF0YS5zaWdCeXRlcy09blBhZGRpbmdCeXRlc319O3ZhciBCbG9ja0NpcGhlcj1DX2xpYi5CbG9ja0NpcGhlcj1DaXBoZXIuZXh0ZW5kKHtjZmc6Q2lwaGVyLmNmZy5leHRlbmQoe21vZGU6Q0JDLHBhZGRpbmc6UGtjczd9KSxyZXNldDpmdW5jdGlvbigpe0NpcGhlci5yZXNldC5jYWxsKHRoaXMpO3ZhciBjZmc9dGhpcy5jZmc7dmFyIGl2PWNmZy5pdjt2YXIgbW9kZT1jZmcubW9kZTtpZih0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFKXt2YXIgbW9kZUNyZWF0b3I9bW9kZS5jcmVhdGVFbmNyeXB0b3J9ZWxzZXt2YXIgbW9kZUNyZWF0b3I9bW9kZS5jcmVhdGVEZWNyeXB0b3I7dGhpcy5fbWluQnVmZmVyU2l6ZT0xfXRoaXMuX21vZGU9bW9kZUNyZWF0b3IuY2FsbChtb2RlLHRoaXMsaXYmJml2LndvcmRzKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHdvcmRzLG9mZnNldCl7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2sod29yZHMsb2Zmc2V0KX0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgcGFkZGluZz10aGlzLmNmZy5wYWRkaW5nO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpe3BhZGRpbmcucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpO3ZhciBmaW5hbFByb2Nlc3NlZEJsb2Nrcz10aGlzLl9wcm9jZXNzKCEhXCJmbHVzaFwiKX1lbHNle3ZhciBmaW5hbFByb2Nlc3NlZEJsb2Nrcz10aGlzLl9wcm9jZXNzKCEhXCJmbHVzaFwiKTtwYWRkaW5nLnVucGFkKGZpbmFsUHJvY2Vzc2VkQmxvY2tzKX1yZXR1cm4gZmluYWxQcm9jZXNzZWRCbG9ja3N9LGJsb2NrU2l6ZToxMjgvMzJ9KTt2YXIgQ2lwaGVyUGFyYW1zPUNfbGliLkNpcGhlclBhcmFtcz1CYXNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihjaXBoZXJQYXJhbXMpe3RoaXMubWl4SW4oY2lwaGVyUGFyYW1zKX0sdG9TdHJpbmc6ZnVuY3Rpb24oZm9ybWF0dGVyKXtyZXR1cm4oZm9ybWF0dGVyfHx0aGlzLmZvcm1hdHRlcikuc3RyaW5naWZ5KHRoaXMpfX0pO3ZhciBDX2Zvcm1hdD1DLmZvcm1hdD17fTt2YXIgT3BlblNTTEZvcm1hdHRlcj1DX2Zvcm1hdC5PcGVuU1NMPXtzdHJpbmdpZnk6ZnVuY3Rpb24oY2lwaGVyUGFyYW1zKXt2YXIgY2lwaGVydGV4dD1jaXBoZXJQYXJhbXMuY2lwaGVydGV4dDt2YXIgc2FsdD1jaXBoZXJQYXJhbXMuc2FsdDtpZihzYWx0KXt2YXIgd29yZEFycmF5PVdvcmRBcnJheS5jcmVhdGUoWzEzOTg4OTM2ODQsMTcwMTA3NjgzMV0pLmNvbmNhdChzYWx0KS5jb25jYXQoY2lwaGVydGV4dCl9ZWxzZXt2YXIgd29yZEFycmF5PWNpcGhlcnRleHR9cmV0dXJuIHdvcmRBcnJheS50b1N0cmluZyhCYXNlNjQpfSxwYXJzZTpmdW5jdGlvbihvcGVuU1NMU3RyKXt2YXIgY2lwaGVydGV4dD1CYXNlNjQucGFyc2Uob3BlblNTTFN0cik7dmFyIGNpcGhlcnRleHRXb3Jkcz1jaXBoZXJ0ZXh0LndvcmRzO2lmKGNpcGhlcnRleHRXb3Jkc1swXT09MTM5ODg5MzY4NCYmY2lwaGVydGV4dFdvcmRzWzFdPT0xNzAxMDc2ODMxKXt2YXIgc2FsdD1Xb3JkQXJyYXkuY3JlYXRlKGNpcGhlcnRleHRXb3Jkcy5zbGljZSgyLDQpKTtjaXBoZXJ0ZXh0V29yZHMuc3BsaWNlKDAsNCk7Y2lwaGVydGV4dC5zaWdCeXRlcy09MTZ9cmV0dXJuIENpcGhlclBhcmFtcy5jcmVhdGUoe2NpcGhlcnRleHQ6Y2lwaGVydGV4dCxzYWx0OnNhbHR9KX19O3ZhciBTZXJpYWxpemFibGVDaXBoZXI9Q19saWIuU2VyaWFsaXphYmxlQ2lwaGVyPUJhc2UuZXh0ZW5kKHtjZmc6QmFzZS5leHRlbmQoe2Zvcm1hdDpPcGVuU1NMRm9ybWF0dGVyfSksZW5jcnlwdDpmdW5jdGlvbihjaXBoZXIsbWVzc2FnZSxrZXksY2ZnKXtjZmc9dGhpcy5jZmcuZXh0ZW5kKGNmZyk7XHJcbiAgICB2YXIgZW5jcnlwdG9yPWNpcGhlci5jcmVhdGVFbmNyeXB0b3Ioa2V5LGNmZyk7dmFyIGNpcGhlcnRleHQ9ZW5jcnlwdG9yLmZpbmFsaXplKG1lc3NhZ2UpO3ZhciBjaXBoZXJDZmc9ZW5jcnlwdG9yLmNmZztyZXR1cm4gQ2lwaGVyUGFyYW1zLmNyZWF0ZSh7Y2lwaGVydGV4dDpjaXBoZXJ0ZXh0LGtleTprZXksaXY6Y2lwaGVyQ2ZnLml2LGFsZ29yaXRobTpjaXBoZXIsbW9kZTpjaXBoZXJDZmcubW9kZSxwYWRkaW5nOmNpcGhlckNmZy5wYWRkaW5nLGJsb2NrU2l6ZTpjaXBoZXIuYmxvY2tTaXplLGZvcm1hdHRlcjpjZmcuZm9ybWF0fSl9LGRlY3J5cHQ6ZnVuY3Rpb24oY2lwaGVyLGNpcGhlcnRleHQsa2V5LGNmZyl7Y2ZnPXRoaXMuY2ZnLmV4dGVuZChjZmcpO2NpcGhlcnRleHQ9dGhpcy5fcGFyc2UoY2lwaGVydGV4dCxjZmcuZm9ybWF0KTt2YXIgcGxhaW50ZXh0PWNpcGhlci5jcmVhdGVEZWNyeXB0b3Ioa2V5LGNmZykuZmluYWxpemUoY2lwaGVydGV4dC5jaXBoZXJ0ZXh0KTtyZXR1cm4gcGxhaW50ZXh0fSxfcGFyc2U6ZnVuY3Rpb24oY2lwaGVydGV4dCxmb3JtYXQpe2lmKHR5cGVvZiBjaXBoZXJ0ZXh0PT1cInN0cmluZ1wiKXtyZXR1cm4gZm9ybWF0LnBhcnNlKGNpcGhlcnRleHQsdGhpcyl9ZWxzZXtyZXR1cm4gY2lwaGVydGV4dH19fSk7dmFyIENfa2RmPUMua2RmPXt9O3ZhciBPcGVuU1NMS2RmPUNfa2RmLk9wZW5TU0w9e2V4ZWN1dGU6ZnVuY3Rpb24ocGFzc3dvcmQsa2V5U2l6ZSxpdlNpemUsc2FsdCl7aWYoIXNhbHQpe3NhbHQ9V29yZEFycmF5LnJhbmRvbSg2NC84KX12YXIga2V5PUV2cEtERi5jcmVhdGUoe2tleVNpemU6a2V5U2l6ZStpdlNpemV9KS5jb21wdXRlKHBhc3N3b3JkLHNhbHQpO3ZhciBpdj1Xb3JkQXJyYXkuY3JlYXRlKGtleS53b3Jkcy5zbGljZShrZXlTaXplKSxpdlNpemUqNCk7a2V5LnNpZ0J5dGVzPWtleVNpemUqNDtyZXR1cm4gQ2lwaGVyUGFyYW1zLmNyZWF0ZSh7a2V5OmtleSxpdjppdixzYWx0OnNhbHR9KX19O3ZhciBQYXNzd29yZEJhc2VkQ2lwaGVyPUNfbGliLlBhc3N3b3JkQmFzZWRDaXBoZXI9U2VyaWFsaXphYmxlQ2lwaGVyLmV4dGVuZCh7Y2ZnOlNlcmlhbGl6YWJsZUNpcGhlci5jZmcuZXh0ZW5kKHtrZGY6T3BlblNTTEtkZn0pLGVuY3J5cHQ6ZnVuY3Rpb24oY2lwaGVyLG1lc3NhZ2UscGFzc3dvcmQsY2ZnKXtjZmc9dGhpcy5jZmcuZXh0ZW5kKGNmZyk7dmFyIGRlcml2ZWRQYXJhbXM9Y2ZnLmtkZi5leGVjdXRlKHBhc3N3b3JkLGNpcGhlci5rZXlTaXplLGNpcGhlci5pdlNpemUpO2NmZy5pdj1kZXJpdmVkUGFyYW1zLml2O3ZhciBjaXBoZXJ0ZXh0PVNlcmlhbGl6YWJsZUNpcGhlci5lbmNyeXB0LmNhbGwodGhpcyxjaXBoZXIsbWVzc2FnZSxkZXJpdmVkUGFyYW1zLmtleSxjZmcpO2NpcGhlcnRleHQubWl4SW4oZGVyaXZlZFBhcmFtcyk7cmV0dXJuIGNpcGhlcnRleHR9LGRlY3J5cHQ6ZnVuY3Rpb24oY2lwaGVyLGNpcGhlcnRleHQscGFzc3dvcmQsY2ZnKXtjZmc9dGhpcy5jZmcuZXh0ZW5kKGNmZyk7Y2lwaGVydGV4dD10aGlzLl9wYXJzZShjaXBoZXJ0ZXh0LGNmZy5mb3JtYXQpO3ZhciBkZXJpdmVkUGFyYW1zPWNmZy5rZGYuZXhlY3V0ZShwYXNzd29yZCxjaXBoZXIua2V5U2l6ZSxjaXBoZXIuaXZTaXplLGNpcGhlcnRleHQuc2FsdCk7Y2ZnLml2PWRlcml2ZWRQYXJhbXMuaXY7dmFyIHBsYWludGV4dD1TZXJpYWxpemFibGVDaXBoZXIuZGVjcnlwdC5jYWxsKHRoaXMsY2lwaGVyLGNpcGhlcnRleHQsZGVyaXZlZFBhcmFtcy5rZXksY2ZnKTtyZXR1cm4gcGxhaW50ZXh0fX0pfSgpKSIsIlxudmFyIE5ldERhdGEgPSByZXF1aXJlKFwiTmV0RGF0YVwiKTtcblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgXG4gICAgICAgIGZseUNoaXBOb2RlOiBjYy5QcmVmYWIsXG4gICAgICAgIFxuICAgICAgICBob21lUG9zaXRpb246XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLlZlYzJdXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICB0YXJnZXRMb2NhdGlvbjE6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLlZlYzJdLFxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgdGFyZ2V0TG9jYXRpb24yOlxuICAgICAgICB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IFtjYy5WZWMyXSxcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGZseUNoaXBOb2RlQXJyYXk6e1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBbY2MuTm9kZV1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHJld2FyZEZseU5vZGVBcnJheTp7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IFtjYy5QcmVmYWJdXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICByZXdhcmRGbHlOb2RlVGFyZ2V0TG9jYXRpb246XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLlZlYzJdLFxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcmV3YXJkRmx5Tm9kZUhvbWVQb3NpdGlvbjogY2MuVmVjMixcbiAgICAgICAgcmV3YXJkRmx5Tm9kZUluaXN0YW50QXJyYXk6W10sXG4gICAgICAgIG1hcmtGbHlSZXdhcmRDbnQ6IDAsXG4gICAgfSxcbiAgICBcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgfSxcbiAgICBcbiAgICBjaGlwRmx5QWN0aW9uOiBmdW5jdGlvbihjaGlwTnVtLCBjaGlwSW5kZXgsIGJldElkLCBmbGFnLCBwb3dlclRhcmdldClcbiAgICB7XG4gICAgICAgIHZhciBuZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcbiAgICAgICAgIHZhciBob21lcCA9IHRoaXMuaG9tZVBvc2l0aW9uW2NoaXBJbmRleF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0YXJnZXRQID0gbnVsbDtcbiAgICAgICAgICAgIGlmKG5ldERhdGEudGltZUZsYWcgPT0gMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRQID0gdGhpcy50YXJnZXRMb2NhdGlvbjFbYmV0SWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRhcmdldFAgPSB0aGlzLnRhcmdldExvY2F0aW9uMltiZXRJZF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBmbHlOb2RlID0gdGhpcy5nZXRGbHlDaGlwTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGZseU5vZGVKUyA9IGZseU5vZGUuZ2V0Q29tcG9uZW50KFwiZmx5Q2hpcE5vZGVQcmVcIik7XG5cbiAgICAgICAgICAgIGZseU5vZGVKUy5zZXRTa2luV2l0aFRhZyhjaGlwSW5kZXgpO1xuICAgICAgICAgICAgZmx5Tm9kZUpTLnNldE1vbmV5KGNoaXBOdW0pO1xuICAgICAgICAgICAgZmx5Tm9kZUpTLmNoaXBGbHlBY3Rpb24oaG9tZXAsIHRhcmdldFAsIGZsYWcsIGZseU5vZGUsIHBvd2VyVGFyZ2V0LCB0aGlzLCB0aGlzLmZpbmlzaGVkQ2FsbGJhY2spO1xuICAgICAgICAgICAgXG4gICAgfSxcbiAgICBcbiAgICBnZXRGbHlDaGlwTm9kZTogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdmFyIGZseU5vZGUgPSBudWxsO1xuICAgICAgICBpZih0aGlzLmZseUNoaXBOb2RlQXJyYXkubGVuZ3RoID4gMClcbiAgICAgICAge1xuICAgICAgICAgICAgZmx5Tm9kZSA9IHRoaXMuZmx5Q2hpcE5vZGVBcnJheS5zaGlmdCgpO1xuICAgICAgICAgICAgZmx5Tm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZseU5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZseU5vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmZseUNoaXBOb2RlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKGZseU5vZGUpO1xuICAgICAgICBmbHlOb2RlLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBmbHlOb2RlO1xuICAgICAgICBcbiAgICB9LFxuICAgIFxuICAgIHNldEZseUNoaXBOb2RlOiBmdW5jdGlvbihmbHlub2RlKVxuICAgIHtcbiAgICAgICAgdGhpcy5mbHlDaGlwTm9kZUFycmF5LnB1c2goZmx5bm9kZSk7XG4gICAgICAgIGZseW5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgfSxcbiAgICBcbiAgICBmaW5pc2hlZENhbGxiYWNrOiBmdW5jdGlvbih0YXJnZXQsIG9iamVjdClcbiAgICB7XG4gICAgICAgIHZhciBwb3dlclRhcmdldCA9IG9iamVjdC5wb3dlclRhcmdldDtcbiAgICAgICAgdmFyIGZsYWcgPSBvYmplY3QuZmxhZztcbiAgICAgICAgdmFyIHNlbGYgPSBvYmplY3QudGFyZ2V0O1xuICAgICAgICB2YXIgZmx5bm9kZSA9IG9iamVjdC5mbHlOb2RlO1xuICAgICAgICBcbiAgICAgICAgc2VsZi5zZXRGbHlDaGlwTm9kZShmbHlub2RlKTtcbiAgICAgICAgcG93ZXJUYXJnZXQuZmx5Q2hpcE5vZGVGaW5pc2hlZChwb3dlclRhcmdldCwgZmxhZyk7XG4gICAgICAgIFxuICAgICAgICBvYmplY3QgPSBudWxsO1xuICBcbiAgICB9LFxuICAgIFxuICAgIC8vaW5kZXg6IDDotJ8gMeiDnCAgMuW5s1xuICAgIGZseVJld2FyZE5vZGU6ZnVuY3Rpb24gKGluZGV4LCBwb3NpdGlvbkluZGV4KVxuICAgIHtcbiAgICAgICAgdmFyIGZseU5vZGUgPSBudWxsO1xuICAgICAgICBpZih0aGlzLnJld2FyZEZseU5vZGVJbmlzdGFudEFycmF5Lmxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgZmx5Tm9kZSA9IHRoaXMucmV3YXJkRmx5Tm9kZUluaXN0YW50QXJyYXlbaV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBmbHlOb2RlID0gY2MuaW5zdGFudGlhdGUodGhpcy5yZXdhcmRGbHlOb2RlQXJyYXlbaV0pO1xuICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKGZseU5vZGUpO1xuICAgICAgICAgICAgdGhpcy5yZXdhcmRGbHlOb2RlSW5pc3RhbnRBcnJheS5wdXNoKGZseU5vZGUpO1xuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgZmx5Tm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB2YXIgZmx5Tm9kZUpTID0gZmx5Tm9kZS5nZXRDb21wb25lbnQoXCJmbHlSZXdhcmROb2RlUHJlXCIpO1xuICAgICAgICBmbHlOb2RlSlMuc2V0U2tpbldpdGhUYWcoaW5kZXgpO1xuICAgICAgICB2YXIgcDEgPSB0aGlzLnJld2FyZEZseU5vZGVIb21lUG9zaXRpb247XG4gICAgICAgIHZhciBwMiA9IHRoaXMucmV3YXJkRmx5Tm9kZVRhcmdldExvY2F0aW9uW3Bvc2l0aW9uSW5kZXhdO1xuICAgICAgICBmbHlOb2RlSlMuZmx5UmV3YXJkQWN0aW9uKHAxLCBwMiwgdGhpcy5mbHlSZXdhcmRBY3Rpb25GaW5pc2hlZCk7XG4gICAgfSxcbiAgICBcbiAgICBcbiAgICBmbHlSZXdhcmRBY3Rpb25GaW5pc2hlZDogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdGhpcy5tYXJrRmx5UmV3YXJkQ250ICsrO1xuICAgICAgICBpZih0aGlzLm1hcmtGbHlSZXdhcmRDbnQgPT0gNClcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucmV3YXJkRmx5Tm9kZUluaXN0YW50QXJyYXkubGVuZ3RoOyBpICsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucmV3YXJkRmx5Tm9kZUluaXN0YW50QXJyYXkuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG5cbiAgICAvLyB9LFxufSk7XG4iLCJ2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fChmdW5jdGlvbihNYXRoLHVuZGVmaW5lZCl7dmFyIEM9e307dmFyIENfbGliPUMubGliPXt9O3ZhciBCYXNlPUNfbGliLkJhc2U9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gRigpe31yZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKG92ZXJyaWRlcyl7Ri5wcm90b3R5cGU9dGhpczt2YXIgc3VidHlwZT1uZXcgRigpO2lmKG92ZXJyaWRlcyl7c3VidHlwZS5taXhJbihvdmVycmlkZXMpfWlmKCFzdWJ0eXBlLmhhc093blByb3BlcnR5KFwiaW5pdFwiKSl7c3VidHlwZS5pbml0PWZ1bmN0aW9uKCl7c3VidHlwZS4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXN1YnR5cGUuaW5pdC5wcm90b3R5cGU9c3VidHlwZTtzdWJ0eXBlLiRzdXBlcj10aGlzO3JldHVybiBzdWJ0eXBlfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgaW5zdGFuY2U9dGhpcy5leHRlbmQoKTtpbnN0YW5jZS5pbml0LmFwcGx5KGluc3RhbmNlLGFyZ3VtZW50cyk7cmV0dXJuIGluc3RhbmNlfSxpbml0OmZ1bmN0aW9uKCl7fSxtaXhJbjpmdW5jdGlvbihwcm9wZXJ0aWVzKXtmb3IodmFyIHByb3BlcnR5TmFtZSBpbiBwcm9wZXJ0aWVzKXtpZihwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkpe3RoaXNbcHJvcGVydHlOYW1lXT1wcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV19fWlmKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoXCJ0b1N0cmluZ1wiKSl7dGhpcy50b1N0cmluZz1wcm9wZXJ0aWVzLnRvU3RyaW5nfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyl9fX0oKSk7dmFyIFdvcmRBcnJheT1DX2xpYi5Xb3JkQXJyYXk9QmFzZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24od29yZHMsc2lnQnl0ZXMpe3dvcmRzPXRoaXMud29yZHM9d29yZHN8fFtdO2lmKHNpZ0J5dGVzIT11bmRlZmluZWQpe3RoaXMuc2lnQnl0ZXM9c2lnQnl0ZXN9ZWxzZXt0aGlzLnNpZ0J5dGVzPXdvcmRzLmxlbmd0aCo0fX0sdG9TdHJpbmc6ZnVuY3Rpb24oZW5jb2Rlcil7cmV0dXJuKGVuY29kZXJ8fEhleCkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24od29yZEFycmF5KXt2YXIgdGhpc1dvcmRzPXRoaXMud29yZHM7dmFyIHRoYXRXb3Jkcz13b3JkQXJyYXkud29yZHM7dmFyIHRoaXNTaWdCeXRlcz10aGlzLnNpZ0J5dGVzO3ZhciB0aGF0U2lnQnl0ZXM9d29yZEFycmF5LnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZih0aGlzU2lnQnl0ZXMlNCl7Zm9yKHZhciBpPTA7aTx0aGF0U2lnQnl0ZXM7aSsrKXt2YXIgdGhhdEJ5dGU9KHRoYXRXb3Jkc1tpPj4+Ml0+Pj4oMjQtKGklNCkqOCkpJjI1NTt0aGlzV29yZHNbKHRoaXNTaWdCeXRlcytpKT4+PjJdfD10aGF0Qnl0ZTw8KDI0LSgodGhpc1NpZ0J5dGVzK2kpJTQpKjgpfX1lbHNle2Zvcih2YXIgaT0wO2k8dGhhdFNpZ0J5dGVzO2krPTQpe3RoaXNXb3Jkc1sodGhpc1NpZ0J5dGVzK2kpPj4+Ml09dGhhdFdvcmRzW2k+Pj4yXX19dGhpcy5zaWdCeXRlcys9dGhhdFNpZ0J5dGVzO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbigpe3ZhciB3b3Jkcz10aGlzLndvcmRzO3ZhciBzaWdCeXRlcz10aGlzLnNpZ0J5dGVzO3dvcmRzW3NpZ0J5dGVzPj4+Ml0mPTQyOTQ5NjcyOTU8PCgzMi0oc2lnQnl0ZXMlNCkqOCk7d29yZHMubGVuZ3RoPU1hdGguY2VpbChzaWdCeXRlcy80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgY2xvbmU9QmFzZS5jbG9uZS5jYWxsKHRoaXMpO2Nsb25lLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCk7cmV0dXJuIGNsb25lfSxyYW5kb206ZnVuY3Rpb24obkJ5dGVzKXt2YXIgd29yZHM9W107dmFyIHI9KGZ1bmN0aW9uKG1fdyl7dmFyIG1fdz1tX3c7dmFyIG1fej05ODc2NTQzMjE7dmFyIG1hc2s9NDI5NDk2NzI5NTtyZXR1cm4gZnVuY3Rpb24oKXttX3o9KDM2OTY5KihtX3omNjU1MzUpKyhtX3o+PjE2KSkmbWFzazttX3c9KDE4MDAwKihtX3cmNjU1MzUpKyhtX3c+PjE2KSkmbWFzazt2YXIgcmVzdWx0PSgobV96PDwxNikrbV93KSZtYXNrO3Jlc3VsdC89NDI5NDk2NzI5NjtyZXN1bHQrPTAuNTtyZXR1cm4gcmVzdWx0KihNYXRoLnJhbmRvbSgpPjAuNT8xOi0xKX19KTtmb3IodmFyIGk9MCxyY2FjaGU7aTxuQnl0ZXM7aSs9NCl7dmFyIF9yPXIoKHJjYWNoZXx8TWF0aC5yYW5kb20oKSkqNDI5NDk2NzI5Nik7cmNhY2hlPV9yKCkqOTg3NjU0MDcxO3dvcmRzLnB1c2goKF9yKCkqNDI5NDk2NzI5Nil8MCl9cmV0dXJuIG5ldyBXb3JkQXJyYXkuaW5pdCh3b3JkcyxuQnl0ZXMpfX0pO3ZhciBDX2VuYz1DLmVuYz17fTt2YXIgSGV4PUNfZW5jLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKHdvcmRBcnJheSl7dmFyIHdvcmRzPXdvcmRBcnJheS53b3Jkczt2YXIgc2lnQnl0ZXM9d29yZEFycmF5LnNpZ0J5dGVzO3ZhciBoZXhDaGFycz1bXTtmb3IodmFyIGk9MDtpPHNpZ0J5dGVzO2krKyl7dmFyIGJpdGU9KHdvcmRzW2k+Pj4yXT4+PigyNC0oaSU0KSo4KSkmMjU1O2hleENoYXJzLnB1c2goKGJpdGU+Pj40KS50b1N0cmluZygxNikpO2hleENoYXJzLnB1c2goKGJpdGUmMTUpLnRvU3RyaW5nKDE2KSl9cmV0dXJuIGhleENoYXJzLmpvaW4oXCJcIil9LHBhcnNlOmZ1bmN0aW9uKGhleFN0cil7dmFyIGhleFN0ckxlbmd0aD1oZXhTdHIubGVuZ3RoO3ZhciB3b3Jkcz1bXTtmb3IodmFyIGk9MDtpPGhleFN0ckxlbmd0aDtpKz0yKXt3b3Jkc1tpPj4+M118PXBhcnNlSW50KGhleFN0ci5zdWJzdHIoaSwyKSwxNik8PCgyNC0oaSU4KSo0KX1yZXR1cm4gbmV3IFdvcmRBcnJheS5pbml0KHdvcmRzLGhleFN0ckxlbmd0aC8yKX19O3ZhciBMYXRpbjE9Q19lbmMuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24od29yZEFycmF5KXt2YXIgd29yZHM9d29yZEFycmF5LndvcmRzO3ZhciBzaWdCeXRlcz13b3JkQXJyYXkuc2lnQnl0ZXM7dmFyIGxhdGluMUNoYXJzPVtdO2Zvcih2YXIgaT0wO2k8c2lnQnl0ZXM7aSsrKXt2YXIgYml0ZT0od29yZHNbaT4+PjJdPj4+KDI0LShpJTQpKjgpKSYyNTU7bGF0aW4xQ2hhcnMucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJpdGUpKX1yZXR1cm4gbGF0aW4xQ2hhcnMuam9pbihcIlwiKX0scGFyc2U6ZnVuY3Rpb24obGF0aW4xU3RyKXt2YXIgbGF0aW4xU3RyTGVuZ3RoPWxhdGluMVN0ci5sZW5ndGg7dmFyIHdvcmRzPVtdO2Zvcih2YXIgaT0wO2k8bGF0aW4xU3RyTGVuZ3RoO2krKyl7d29yZHNbaT4+PjJdfD0obGF0aW4xU3RyLmNoYXJDb2RlQXQoaSkmMjU1KTw8KDI0LShpJTQpKjgpfXJldHVybiBuZXcgV29yZEFycmF5LmluaXQod29yZHMsbGF0aW4xU3RyTGVuZ3RoKX19O3ZhciBVdGY4PUNfZW5jLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbih3b3JkQXJyYXkpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShMYXRpbjEuc3RyaW5naWZ5KHdvcmRBcnJheSkpKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgVVRGLTggZGF0YVwiKX19LHBhcnNlOmZ1bmN0aW9uKHV0ZjhTdHIpe3JldHVybiBMYXRpbjEucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHV0ZjhTdHIpKSl9fTt2YXIgQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1DX2xpYi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPUJhc2UuZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IFdvcmRBcnJheS5pbml0KCk7dGhpcy5fbkRhdGFCeXRlcz0wfSxfYXBwZW5kOmZ1bmN0aW9uKGRhdGEpe2lmKHR5cGVvZiBkYXRhPT1cInN0cmluZ1wiKXtkYXRhPVV0ZjgucGFyc2UoZGF0YSl9dGhpcy5fZGF0YS5jb25jYXQoZGF0YSk7dGhpcy5fbkRhdGFCeXRlcys9ZGF0YS5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24oZG9GbHVzaCl7dmFyIGRhdGE9dGhpcy5fZGF0YTt2YXIgZGF0YVdvcmRzPWRhdGEud29yZHM7dmFyIGRhdGFTaWdCeXRlcz1kYXRhLnNpZ0J5dGVzO3ZhciBibG9ja1NpemU9dGhpcy5ibG9ja1NpemU7dmFyIGJsb2NrU2l6ZUJ5dGVzPWJsb2NrU2l6ZSo0O3ZhciBuQmxvY2tzUmVhZHk9ZGF0YVNpZ0J5dGVzL2Jsb2NrU2l6ZUJ5dGVzO2lmKGRvRmx1c2gpe25CbG9ja3NSZWFkeT1NYXRoLmNlaWwobkJsb2Nrc1JlYWR5KX1lbHNle25CbG9ja3NSZWFkeT1NYXRoLm1heCgobkJsb2Nrc1JlYWR5fDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCl9dmFyIG5Xb3Jkc1JlYWR5PW5CbG9ja3NSZWFkeSpibG9ja1NpemU7dmFyIG5CeXRlc1JlYWR5PU1hdGgubWluKG5Xb3Jkc1JlYWR5KjQsZGF0YVNpZ0J5dGVzKTtpZihuV29yZHNSZWFkeSl7Zm9yKHZhciBvZmZzZXQ9MDtvZmZzZXQ8bldvcmRzUmVhZHk7b2Zmc2V0Kz1ibG9ja1NpemUpe3RoaXMuX2RvUHJvY2Vzc0Jsb2NrKGRhdGFXb3JkcyxvZmZzZXQpfXZhciBwcm9jZXNzZWRXb3Jkcz1kYXRhV29yZHMuc3BsaWNlKDAsbldvcmRzUmVhZHkpO2RhdGEuc2lnQnl0ZXMtPW5CeXRlc1JlYWR5fXJldHVybiBuZXcgV29yZEFycmF5LmluaXQocHJvY2Vzc2VkV29yZHMsbkJ5dGVzUmVhZHkpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBjbG9uZT1CYXNlLmNsb25lLmNhbGwodGhpcyk7Y2xvbmUuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBjbG9uZX0sX21pbkJ1ZmZlclNpemU6MH0pO3ZhciBIYXNoZXI9Q19saWIuSGFzaGVyPUJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0uZXh0ZW5kKHtjZmc6QmFzZS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGNmZyl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGNmZyk7dGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe0J1ZmZlcmVkQmxvY2tBbGdvcml0aG0ucmVzZXQuY2FsbCh0aGlzKTt0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbihtZXNzYWdlVXBkYXRlKXt0aGlzLl9hcHBlbmQobWVzc2FnZVVwZGF0ZSk7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihtZXNzYWdlVXBkYXRlKXtpZihtZXNzYWdlVXBkYXRlKXt0aGlzLl9hcHBlbmQobWVzc2FnZVVwZGF0ZSl9dmFyIGhhc2g9dGhpcy5fZG9GaW5hbGl6ZSgpO1xyXG4gICAgcmV0dXJuIGhhc2h9LGJsb2NrU2l6ZTo1MTIvMzIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihoYXNoZXIpe3JldHVybiBmdW5jdGlvbihtZXNzYWdlLGNmZyl7cmV0dXJuIG5ldyBoYXNoZXIuaW5pdChjZmcpLmZpbmFsaXplKG1lc3NhZ2UpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24oaGFzaGVyKXtyZXR1cm4gZnVuY3Rpb24obWVzc2FnZSxrZXkpe3JldHVybiBuZXcgQ19hbGdvLkhNQUMuaW5pdChoYXNoZXIsa2V5KS5maW5hbGl6ZShtZXNzYWdlKX19fSk7dmFyIENfYWxnbz1DLmFsZ289e307cmV0dXJuIEN9KE1hdGgpKTttb2R1bGUuZXhwb3J0cz1DcnlwdG9KUyIsInZhciBDcnlwdG9KUz1yZXF1aXJlKFwiLi9jb3JlXCIpOyhmdW5jdGlvbigpe3ZhciBDPUNyeXB0b0pTO3ZhciBDX2xpYj1DLmxpYjt2YXIgV29yZEFycmF5PUNfbGliLldvcmRBcnJheTt2YXIgQ19lbmM9Qy5lbmM7dmFyIEJhc2U2ND1DX2VuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih3b3JkQXJyYXkpe3ZhciB3b3Jkcz13b3JkQXJyYXkud29yZHM7dmFyIHNpZ0J5dGVzPXdvcmRBcnJheS5zaWdCeXRlczt2YXIgbWFwPXRoaXMuX21hcDt3b3JkQXJyYXkuY2xhbXAoKTt2YXIgYmFzZTY0Q2hhcnM9W107Zm9yKHZhciBpPTA7aTxzaWdCeXRlcztpKz0zKXt2YXIgYnl0ZTE9KHdvcmRzW2k+Pj4yXT4+PigyNC0oaSU0KSo4KSkmMjU1O3ZhciBieXRlMj0od29yZHNbKGkrMSk+Pj4yXT4+PigyNC0oKGkrMSklNCkqOCkpJjI1NTt2YXIgYnl0ZTM9KHdvcmRzWyhpKzIpPj4+Ml0+Pj4oMjQtKChpKzIpJTQpKjgpKSYyNTU7dmFyIHRyaXBsZXQ9KGJ5dGUxPDwxNil8KGJ5dGUyPDw4KXxieXRlMztmb3IodmFyIGo9MDsoajw0KSYmKGkraiowLjc1PHNpZ0J5dGVzKTtqKyspe2Jhc2U2NENoYXJzLnB1c2gobWFwLmNoYXJBdCgodHJpcGxldD4+Pig2KigzLWopKSkmNjMpKX19dmFyIHBhZGRpbmdDaGFyPW1hcC5jaGFyQXQoNjQpO2lmKHBhZGRpbmdDaGFyKXt3aGlsZShiYXNlNjRDaGFycy5sZW5ndGglNCl7YmFzZTY0Q2hhcnMucHVzaChwYWRkaW5nQ2hhcil9fXJldHVybiBiYXNlNjRDaGFycy5qb2luKFwiXCIpfSxwYXJzZTpmdW5jdGlvbihiYXNlNjRTdHIpe3ZhciBiYXNlNjRTdHJMZW5ndGg9YmFzZTY0U3RyLmxlbmd0aDt2YXIgbWFwPXRoaXMuX21hcDt2YXIgcGFkZGluZ0NoYXI9bWFwLmNoYXJBdCg2NCk7aWYocGFkZGluZ0NoYXIpe3ZhciBwYWRkaW5nSW5kZXg9YmFzZTY0U3RyLmluZGV4T2YocGFkZGluZ0NoYXIpO2lmKHBhZGRpbmdJbmRleCE9LTEpe2Jhc2U2NFN0ckxlbmd0aD1wYWRkaW5nSW5kZXh9fXZhciB3b3Jkcz1bXTt2YXIgbkJ5dGVzPTA7Zm9yKHZhciBpPTA7aTxiYXNlNjRTdHJMZW5ndGg7aSsrKXtpZihpJTQpe3ZhciBiaXRzMT1tYXAuaW5kZXhPZihiYXNlNjRTdHIuY2hhckF0KGktMSkpPDwoKGklNCkqMik7dmFyIGJpdHMyPW1hcC5pbmRleE9mKGJhc2U2NFN0ci5jaGFyQXQoaSkpPj4+KDYtKGklNCkqMik7dmFyIGJpdHNDb21iaW5lZD1iaXRzMXxiaXRzMjt3b3Jkc1tuQnl0ZXM+Pj4yXXw9KGJpdHNDb21iaW5lZCk8PCgyNC0obkJ5dGVzJTQpKjgpO25CeXRlcysrfX1yZXR1cm4gV29yZEFycmF5LmNyZWF0ZSh3b3JkcyxuQnl0ZXMpfSxfbWFwOlwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIn19KCkpIiwiXG52YXIgRWJ1dHRvblRhZyA9IGNjLkVudW0oe1xuXG4gIGVTa2luRnJlc2g6IDAsXG4gIGVTa2luT0s6IDEsICAgXG4gIGVTa2luQ2FubmVsOiAyLCAgICAgIFxuICBlU2tpbjM6MywgXG4gIGVTa2luNDo0LCBcbiAgZVNraW41IDogNSwgIFxuICBlU2tpbjY6IDYsXG5cbn0pO1xuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbGVmdEJ1dHRvbjogY2MuTm9kZSxcbiAgICAgICAgcmlnaHRCdXR0b246IGNjLk5vZGUsXG4gICAgICAgIHRpdGxlOiBjYy5MYWJlbCxcbiAgICAgICAgbGVmdFNraW5BcnJheToge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBbY2MuTm9kZV1cbiAgICAgICAgfSxcbiAgICAgICAgbGVmdFRpdGxlOiBjYy5MYWJlbCxcbiAgICAgICAgcmlnaHRTa2luQXJyYXk6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLk5vZGVdXG4gICAgICAgIH0sXG4gICAgICAgIHJpZ2h0VGl0bGU6IGNjLkxhYmVsLFxuICAgICAgICB0eXBlQWN0aW9uOjAsXG5cbiAgICB9LFxuXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGVmdEJ1dHRvbi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgZnVuY3Rpb24gKGV2ZW50KXtcbiAgICAgICAgICAgICB0aGlzLmxlZnRCdXR0b24uc2NhbGUgPSAwLjg7XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIHRoaXMubGVmdEJ1dHRvbi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICAgdGhpcy5sZWZ0QnV0dG9uLnNjYWxlID0gMTtcbiAgICAgICAgICAgIHZhciBnYW1lRnVuID0gY2MuZmluZCgnQ2FudmFzJykuZ2V0Q29tcG9uZW50KCdnYW1lJyk7XG4gICAgICAgICAgICBnYW1lRnVuLmVycm9yRGlhbG9nQ2FsbGJhY2sodGhpcy50eXBlQWN0aW9uLCAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubGVmdEJ1dHRvbi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9DQU5DRUwsIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICAgdGhpcy5sZWZ0QnV0dG9uLnNjYWxlID0gMTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJpZ2h0QnV0dG9uLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbiAoZXZlbnQpe1xuICAgICAgICAgICAgIHRoaXMucmlnaHRCdXR0b24uc2NhbGUgPSAwLjg7XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIHRoaXMucmlnaHRCdXR0b24ub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbiAoZXZlbnQpe1xuICAgICAgICAgICAgIHRoaXMucmlnaHRCdXR0b24uc2NhbGUgPSAxO1xuICAgICAgICAgICAgdmFyIG9uRnVuY3Rpb24gPSBjYy5maW5kKCdDYW52YXMnKS5nZXRDb21wb25lbnQoJ2dhbWUnKTtcbiAgICAgICAgICAgIG9uRnVuY3Rpb24uZXJyb3JEaWFsb2dDYWxsYmFjayh0aGlzLnR5cGVBY3Rpb24sIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yaWdodEJ1dHRvbi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9DQU5DRUwsIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICAgdGhpcy5yaWdodEJ1dHRvbi5zY2FsZSA9IDE7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICBcbiAgICB9LFxuICAgIFxuICAgIHNob3dEaWFsb2c6ZnVuY3Rpb24odGl0bGUsIGJ1dHRvblR5cGUpXG4gICAge1xuICAgICAgICB0aGlzLnR5cGVBY3Rpb24gPSBidXR0b25UeXBlO1xuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZXNldHpJbmRleFpyZW8oKTtcbiAgICAgICAgdGhpcy50aXRsZS5zdHJpbmcgPSB0aXRsZTtcbiAgICAgICAgXG4gICAgICAgIGlmKGJ1dHRvblR5cGUgPT09IDApLy/liLfmlrBcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5sZWZ0QnV0dG9uLnggPSAwO1xuICAgICAgICAgICAgdGhpcy5sZWZ0QnV0dG9uLnkgPSAwO1xuICAgICAgICAgICAgdGhpcy5yaWdodEJ1dHRvbi5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubGVmdFNraW5BcnJheVswXS56SW5kZXggPSAyMDtcbiAgICAgICAgICAgIHRoaXMubGVmdEluZGV4ID0gMDtcbiAgICAgICAgICAgIHRoaXMucmlnaHRJbmRleCA9IC0xO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihidXR0b25UeXBlID09IDEpLy/nrYnnrYnlho3otbAg5LiN546p5LqGXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubGVmdEJ1dHRvbi54ID0gLTE2MDtcbiAgICAgICAgICAgIHRoaXMubGVmdEJ1dHRvbi55ID0gLTEwMDtcbiAgICAgICAgICAgIHRoaXMucmlnaHRCdXR0b24uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubGVmdFNraW5BcnJheVsxXS56SW5kZXggPSAyMDtcbiAgICAgICAgICAgIHRoaXMucmlnaHRTa2luQXJyYXlbMV0uekluZGV4ID0gMjA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihidXR0b25UeXBlID09IDIpLy9cbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5sZWZ0QnV0dG9uLnggPSAtMTYwO1xuICAgICAgICAgICAgdGhpcy5sZWZ0QnV0dG9uLnkgPSAtMTAwO1xuICAgICAgICAgICAgdGhpcy5yaWdodEJ1dHRvbi5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5sZWZ0U2tpbkFycmF5WzJdLnpJbmRleCA9IDIwO1xuICAgICAgICAgICAgdGhpcy5yaWdodFNraW5BcnJheVsyXS56SW5kZXggPSAyMDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgaGlkZURpYWxvZzpmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgfSxcbiAgICBcbiAgICByZXNldHpJbmRleFpyZW86ZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVmdFNraW5BcnJheS5sZW5ndGg7IGkgKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubGVmdFNraW5BcnJheVtpXS56SW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgdGhpcy5yaWdodFNraW5BcnJheS5sZW5ndGg7IGogKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmlnaHRTa2luQXJyYXlbal0uekluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xuXG4gICAgLy8gfSxcbn0pO1xuIiwidmFyIENyeXB0b0pTPXJlcXVpcmUoXCIuL2NvcmVcIik7KGZ1bmN0aW9uKCl7dmFyIEM9Q3J5cHRvSlM7dmFyIENfbGliPUMubGliO3ZhciBCYXNlPUNfbGliLkJhc2U7dmFyIFdvcmRBcnJheT1DX2xpYi5Xb3JkQXJyYXk7dmFyIENfYWxnbz1DLmFsZ287dmFyIE1ENT1DX2FsZ28uTUQ1O3ZhciBFdnBLREY9Q19hbGdvLkV2cEtERj1CYXNlLmV4dGVuZCh7Y2ZnOkJhc2UuZXh0ZW5kKHtrZXlTaXplOjEyOC8zMixoYXNoZXI6TUQ1LGl0ZXJhdGlvbnM6MX0pLGluaXQ6ZnVuY3Rpb24oY2ZnKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoY2ZnKX0sY29tcHV0ZTpmdW5jdGlvbihwYXNzd29yZCxzYWx0KXt2YXIgY2ZnPXRoaXMuY2ZnO3ZhciBoYXNoZXI9Y2ZnLmhhc2hlci5jcmVhdGUoKTt2YXIgZGVyaXZlZEtleT1Xb3JkQXJyYXkuY3JlYXRlKCk7dmFyIGRlcml2ZWRLZXlXb3Jkcz1kZXJpdmVkS2V5LndvcmRzO3ZhciBrZXlTaXplPWNmZy5rZXlTaXplO3ZhciBpdGVyYXRpb25zPWNmZy5pdGVyYXRpb25zO3doaWxlKGRlcml2ZWRLZXlXb3Jkcy5sZW5ndGg8a2V5U2l6ZSl7aWYoYmxvY2spe2hhc2hlci51cGRhdGUoYmxvY2spfXZhciBibG9jaz1oYXNoZXIudXBkYXRlKHBhc3N3b3JkKS5maW5hbGl6ZShzYWx0KTtoYXNoZXIucmVzZXQoKTtmb3IodmFyIGk9MTtpPGl0ZXJhdGlvbnM7aSsrKXtibG9jaz1oYXNoZXIuZmluYWxpemUoYmxvY2spO2hhc2hlci5yZXNldCgpfWRlcml2ZWRLZXkuY29uY2F0KGJsb2NrKX1kZXJpdmVkS2V5LnNpZ0J5dGVzPWtleVNpemUqNDtyZXR1cm4gZGVyaXZlZEtleX19KTtDLkV2cEtERj1mdW5jdGlvbihwYXNzd29yZCxzYWx0LGNmZyl7cmV0dXJuIEV2cEtERi5jcmVhdGUoY2ZnKS5jb21wdXRlKHBhc3N3b3JkLHNhbHQpfX0oKSkiLCJcbnZhciBFU2tpblRhZyA9IGNjLkVudW0oe1xuXG4gIGVDaGlwMjA6IDAsXG4gIGVDaGlwNTA6IDEsICAgXG4gIGVDaGlwMTAwOiAyLCAgICAgIFxuICBlQ2hpcDUwMDozLCBcbiAgZUNoaXAxMDAwOjQsIFxuICBlR2FyeUNoaXAgOiA1LCAgXG4gIGVPdGhlckNoaXA6IDYsXG5cbn0pO1xuXG5cbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC8vMjAgNTAgMTAwIDUwMCAxMDAwIGdyYXkgb3RoZXJcbiAgICAgICAgY2hpcFNraW5Ob2RlQXJyYXk6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLk5vZGVdXG4gICAgICAgIH0sXG4gICAgICAgIG1vbmV5TGFiZWw6Y2MuTm9kZSxcbiAgICB9LFxuXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIOiuvue9ruetueeggeearuiCpFxuICAgICAqIEBwYXJhbSB0YWcg5a+55bqU55qE562556CB57yW5Y+3KDIwIDUwIDEwMCA1MDAgMTAwMCBncmF5IG90aGVyKVxuICAgICAqL1xuICAgIHNldFNraW5XaXRoVGFnOiBmdW5jdGlvbih0YWcpXG4gICAge1xuICAgICAgICBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpcFNraW5Ob2RlQXJyYXkubGVuZ3RoOyBpICsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih0YWcgPT0gaSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaXBTa2luTm9kZUFycmF5W2ldLmFjdGl2YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaXBTa2luTm9kZUFycmF5W2ldLmFjdGl2YXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICAgICAgICBcblxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICog6K6+572u5oqV5rOo6YeR6aKdXG4gICAgICogQHBhcmFtIGNoaXBNb25leSDlr7nlupTnmoTph5Hpop1cbiAgICAgKi9cbiAgICBzZXRNb25leTogZnVuY3Rpb24oY2hpcE1vbmV5KVxuICAgIHtcbiAgICAgICAgaWYoY2hpcE1vbmV5PjApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubW9uZXlMYWJlbC5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGNoaXBNb25leTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubW9uZXlMYWJlbC5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5Yqo55S76aOeXG4gICAgICogQHBhcmFtIHBvc2l0aW9uMSDmupDkvY3nva5cbiAgICAgKiBAcGFyYW0gcG9zaXRpb24yIOebruagh+S9jee9rlxuICAgICAqIEBwYXJhbSBmbGFnICDpo57lm57mnaXov5jmmK/po57lm57ljrtcbiAgICAgKiBAcGFyYW0gZmx5Tm9kZSDpo57ov4fnqIvnmoTnrbnnoIHlr7nosaFcbiAgICAgKiBAcGFyYW0gc2VsZiDpo57liLDnmoTnm67moIflr7nosaFcbiAgICAgKiBAcGFyYW0gY2FsbEZ1biDlm57osIPnmoTmjIfpkohcbiAgICAgKi9cbiAgICBjaGlwRmx5QWN0aW9uOiBmdW5jdGlvbihwb3NpdGlvbjEsIHBvc2l0aW9uMiwgZmxhZywgZmx5Tm9kZSwgcG93ZXJUYXJnZXQsIHNlbGYsY2FsbEZ1bilcbiAgICB7XG4gICAgICAgIGxldCBtb3ZldG87XG4gICAgICAgIGxldCBkdCA9IDAuMjtcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XG4gICAgICAgIGlmKGZsYWcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubm9kZS5zZXRQb3NpdGlvbihwb3NpdGlvbjEpO1xuICAgICAgICAgICAgbW92ZXRvID0gY2MubW92ZVRvKGR0LHBvc2l0aW9uMik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm5vZGUuc2V0UG9zaXRpb24ocG9zaXRpb24yKTtcbiAgICAgICAgICAgIG1vdmV0byA9IGNjLm1vdmVUbyhkdCxwb3NpdGlvbjEpO1xuICAgICAgICB9XG4gICAgICAgICBcbiAgICAgICAgbGV0IGFjMSA9IGNjLnNjYWxlVG8oZHQsIDEuMCwgMS4wKTtcbiAgICAgICAgICAgIFxuICAgICAgICB2YXIgb2JqID0gbmV3IE9iamVjdCgpO1xuICAgICAgICBvYmoucG93ZXJUYXJnZXQgPSBwb3dlclRhcmdldDtcbiAgICAgICAgb2JqLmZseU5vZGUgPSBmbHlOb2RlO1xuICAgICAgICBvYmoudGFyZ2V0ID0gc2VsZjtcbiAgICAgICAgb2JqLmZsYWcgPSBmbGFnO1xuICAgICAgICAgICAgXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UobW92ZXRvLCBjYy5jYWxsRnVuYyhjYWxsRnVuLCBzZWxmLCBvYmopKSk7XG4gICAgfSxcbiAgICBcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG5cbiAgICAvLyB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEVTa2luVGFnIDogRVNraW5UYWcsXG59O1xuIiwiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgXG4gICAgICAgIHJld2FyZEZseU5vZGVTa2luQXJyYXk6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLk5vZGVdXG4gICAgICAgIH0sXG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgfSxcbiAgICBcbiAgICBzZXRTa2luOmZ1bmN0aW9uKGluZGV4KVxuICAgIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucmV3YXJkRmx5Tm9kZVNraW5BcnJheS5sZW5ndGg7IGkgKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKGluZGV4ID09IGkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXdhcmRGbHlOb2RlU2tpbkFycmF5W2ldLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXdhcmRGbHlOb2RlU2tpbkFycmF5W2ldLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIGZseVJld2FyZEFjdGlvbjogZnVuY3Rpb24ocG9zaXRpb24xLCBwb3NpdGlvbjIpXG4gICAge1xuICAgICAgICBsZXQgbW92ZXRvO1xuICAgICAgICBsZXQgZHQgPSAwLjI7XG4gICAgICAgIHRoaXMubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xuICAgICAgICB0aGlzLm5vZGUuc2V0UG9zaXRpb24ocG9zaXRpb24xKTtcbiAgICAgICAgbW92ZXRvID0gY2MubW92ZVRvKGR0LHBvc2l0aW9uMik7XG4gICAgICAgIGxldCBhYzEgPSBjYy5zY2FsZVRvKGR0LCAxLjAsIDEuMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgdmFyIG9iaiA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgb2JqLnRhcmdldCA9IHNlbGY7XG5cbiAgICAgICAgICAgIFxuICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKG1vdmV0bykpO1xuICAgIH0sXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xuXG4gICAgLy8gfSxcbn0pO1xuIiwiXG4vLyBjb25zdCBpMThuID0gcmVxdWlyZSgnTGFuZ3VhZ2VEYXRhJyk7XG5cbnZhciBOZXREYXRhID0gcmVxdWlyZShcIk5ldERhdGFcIik7XG52YXIgRGF0YU9wZXIgPSByZXF1aXJlKFwiRGF0YU9wZXJcIik7XG52YXIgQnV0dG9uU2NhbGUgPSByZXF1aXJlKFwiQnV0dG9uU2NhbGVcIik7XG52YXIgSW5pdCA9IHJlcXVpcmUoXCJJbml0XCIpO1xudmFyIGluaXQgPSBuZXcgSW5pdCgpO1xuaW5pdC5pbml0KCk7XG5cblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcmV3YXJkTm9kZTogY2MuTm9kZSxcbiAgICAgICAgXG4gICAgICAgIGJsYWNrTGF5ZXI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICB3YWl0TGF5ZXI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBjZHRpbWVJY29uOiBjYy5Ob2RlLFxuICAgICAgICAvL+WAkuiuoeaXtueci+WMuuWfn1xuICAgICAgICBjZEJnWWVsbG93OiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBjZEJnUmVkOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBjZExhYmVsOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgY2RKaWVkdWFuTGFiZWw6e1xuICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgdHlwZTogY2MuTGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8v562556CB5Yy6XG4gICAgICAgIGNoaXBOb2RlQXJyYXk6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogW2NjLk5vZGVdXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvL+a4hemZpFxuICAgICAgICBjbGVhck9uTm9kZToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXJPZmZOb2RlOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLy90b2FzdFxuICAgICAgICB0b2FzdE5vZGU6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBjaG9vc2VBcmVhTm9kZUFycmF5OiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IFtjYy5Ob2RlXVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgY2hpcEFyZWFOb1RvdWNoTm9kZToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGJldEFyZWFOb1RvdWNoTm9kZToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHN0YWdlU3RvcERpYWxvZzpjYy5Ob2RlLCAvL+esrOS4gOWbnuWQiOe7k+adn+aPkOekuuahhmxhYmVsXG4gICAgICAgIHN1bUxpbWl0OiAwLCAvL+WIpOaWreaKleazqOWSjOWAvO+8myDmmK/lkKbotoXov4dsaW1pdDtcbiAgICAgICAgbmVlZENsZWFyRmxhZzogZmFsc2UsIC8v6ZyA6KaB5riF55CGO+imgeWcqOaKleazqOaIkOWKn+WQjuiwgztcbiAgICAgICAgY2hpcEluZGV4OjAsLy/nrbnnoIFub2RlIOeahCBpbmRleFxuICAgICAgICBjbGVhcmluZ0ZsYWc6IGZhbHNlLCAvL+a4heeQhuS4rVxuXG4gICAgICAgIGNhbkJldEZsYWcgOiB0cnVlLC8v5b2T5YmN5piv5ZCm5Y+v5Lul5oqV5rOoXG4gICAgICAgIGN1bkNtZCA6MTAwLC8v6buY6K6kMTAwXG4gICAgICAgIFxuICAgICAgICBlcnJvckRpYWxvZzogY2MuTm9kZSxcbiAgICAgICAgXG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gaTE4bi5pbml0KCdlbicpO1xuICAgICAgICAvLyB0aGlzLmNkTGFiZWwuc3RyaW5nID0gaTE4bi50KCdsYWJlbC5oZWxsbycpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5uZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcblxuICAgICAgICBpZih0aGlzLm5ldERhdGEuaW5pdEZsYWcgPT0gMSl7XG4gICAgICAgICAgICBjYy5sb2coXCLmraPluLjliJ3lp4vljJbov5vlhaVVSVwiKTtcbiAgICAgICAgICAgIC8v55u05o6l5Yid5aeL5YyWXG4gICAgICAgICAgICB0aGlzLmZyb250SW5pdCgpO1xuICAgICAgICAgICAgdGhpcy5nYW1lU3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRoaXMubmV0RGF0YS5pbml0RmxhZyA9PSAyKXtcbiAgICAgICAgICAgIC8vIHRoaXMubWlkTm9kZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIHRoaXMuc3RvcEhpbnQodGhpcywgdGhpcy5uZXREYXRhLnN0b3BTZWxsaW5nRGVzYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGNjLmxvZyhcImZlaeato+W4uOWIneWni+WMlui/m+WFpVVJXCIpO1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSh0aGlzLmluaXRXYWl0LCAwLjEpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAvL+a1i+ivlVxuICAgICAgICAvLyB0aGlzLm5ldERhdGEudGltZUZsYWcgPSAxO1xuICAgICAgICAvLyB0aGlzLm5ldERhdGEuc2VjcyA9IDI1O1xuICAgICAgICBcbiAgICAgICAgLy8gdmFyIG9iaiA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgLy8gb2JqLnN0YXR1cyA9IDE7XG4gICAgICAgIC8vIG9iai5iZXRMaXN0ID0gWzEwLCAyMCwgMzAsIDQwLCA1MF07XG4gICAgICAgIC8vIHZhciBvZGRzTGlzdE9iaiA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgLy8gb2Rkc0xpc3RPYmoub3B0aW9uID0gXCLnvqTpm4RcIjtcbiAgICAgICAgLy8gb2Rkc0xpc3RPYmouaWQgPSAxO1xuICAgICAgICAvLyBvZGRzTGlzdE9iai5wb3dlcklkID0gMjtcbiAgICAgICAgLy8gb2Rkc0xpc3RPYmoub2RkczEgPSAwLjI7XG4gICAgICAgIC8vIG9kZHNMaXN0T2JqLm9kZHMyID0gMC44O1xuICAgICAgICAvLyBvZGRzTGlzdE9iai5zdGF0dXMgPSAxO1xuICAgICAgICAvLyBvYmoub2Rkc0xpc3QgPSBvZGRzTGlzdE9iajtcbiAgICAgICAgLy8gdGhpcy5uZXREYXRhLmluaXREYXRhID0gb2JqO1xuICAgICAgICAvLyB0aGlzLmdhbWVTdGFydCgpO1xuXG4gICAgfSxcbiAgICBcbiAgICBcbiAgICBpbml0V2FpdDogZnVuY3Rpb24oZHQpe1xuICAgICAgICBpZih0aGlzLm5ldERhdGEuaW5pdEZsYWcpe1xuICAgICAgICAgICAgLy/nm7TmjqXliJ3lp4vljJZcbiAgICAgICAgICAgIHRoaXMuZnJvbnRJbml0KCk7XG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFydCgpO1xuICAgICAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuaW5pdFdhaXQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGZyb250SW5pdDogZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gaWYodGhpcy5uZXREYXRhLmluaXREYXRhLnN0YXR1cyA9PSAxKXtcbiAgICAgICAgICAgIHZhciB0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBsZXQgbG9jYWxUaW1lID0gdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgbGV0IG9mZnNldCA9IE1hdGgucm91bmQoKGxvY2FsVGltZSAtIGluaXQudGltZVN0YW1wKSAvIDEwMDApOyBcbiAgICAgICAgICAgIHRoaXMubmV0RGF0YS5zZWNzIC09IG9mZnNldDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib2Zmc2V0PSBcIiArIG9mZnNldCArIFwic2VjPSBcIiArIHRoaXMubmV0RGF0YS5zZWNzKTtcblxuICAgICAgICAgICAgaWYodGhpcy5uZXREYXRhLnNlY3MgPCAwKXtcbiAgICAgICAgICAgICAgICB0aGlzLm5ldERhdGEuaW5pdERhdGEuc3RhdHVzID0gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgLy8gfVxuICAgIH0sXG5cbiAgICByZXN1bWVUaWNrOiBmdW5jdGlvbihkdCl7XG4gICAgICAgIHRoaXMucmVzdW1GbGFnID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChjYy5fcmVuZGVyVHlwZSA9PT0gY2MuZ2FtZS5SRU5ERVJfVFlQRV9DQU5WQVMpIHtcbiAgICAgICAgICAgIGNjLnJlbmRlcmVyLmVuYWJsZURpcnR5UmVnaW9uKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgaXNDYW5CZXQ6ZnVuY3Rpb24oY2FsbGJhY2spXG4gICAgIHtcbiAgICAgICAgIHZhciBmbGFnID0gZmFsc2U7XG4gICAgICAgICBcbiAgICAgICAgaWYgKCFDQ19KU0IpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgIHZhciBzZGsgPSB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESztcbiAgICAgICAgICAgIGlmIChzZGspIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHNkay5pc0xvZ2luKGZ1bmN0aW9uKGlzTG9naW4pIFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZighaXNMb2dpbikvL+ayoeeZu+W9leWOu+eZu+W9lVxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ29Mb2dpbigpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZS8v55m75b2V5LqGIOWIpOaWreaYr+WQpuiOt+WPluixhuaIkOWKn1xuICAgICAgICAgICAgICAgICAge1xuXG4gICAgICAgICAgICAgICAgICAgIHNkay5zZXRDYWNoZSgnY2hpcCcsIHNlbGYubmV0RGF0YS5iZXRMaXN0W3NlbGYuY2hpcEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvL+WcqOWIpOaWreaYr+WQpui2s+mine+8iOa3mOWuneebuOWFs++8iVxuICAgICAgICAgICAgICAgICAgICB2YXIgIHByaWNlID0gc2VsZi5uZXRkYXRhLmJldExpc3Rbc2VsZi5jaGlwSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHNlbGYuanVkZ2VCYWxhbmNlKHByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoZmxhZylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cblxuICAgICB9LFxuICAgICBcbiAgICBnb0xvZ2luOiBmdW5jdGlvbigpe1xuICAgICAgICBpZighQ0NfSlNCKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzZGsgPSB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESztcblxuICAgICAgICAgICAgaWYoc2RrKXtcbiAgICAgICAgICAgICAgICBzZGsubG9naW4oZnVuY3Rpb24oKSB7Ly/pnIDopoHosIPliJ3lp4vljJY7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ2luIOWQjuaJp+ihjFxuICAgICAgICAgICAgICAgICAgICBzZGsudXBkYXRlVXNlckluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgLypzZGsuZ2V0VXNlckluZm8oZnVuY3Rpb24oaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5ldERhdGEuc2RrQmFsYW5jZSA9IGluZm8uZmVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSBpbmZvLnVpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmljayA9IGluZm8ubmljaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dVc2VySWNvbih1aWQsIG5pY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTsqL1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHRoaXMuZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5mcmVzaCgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGV4aXRKdWRnZTogZnVuY3Rpb24oKXtcbiAgICAgICAgbGV0IGZnID0gZmFsc2U7XG4gICAgICAgIGxldCB1bmZpbmlzaCA9IGZhbHNlO1xuXG4gICAgICAgIGlmKCF0aGlzLmNhbkJldEZsYWcgfHwgdW5maW5pc2gpe1xuICAgICAgICAgICAgdGhpcy5lcnJEaWFsb2dUYWcgPSAzO1xuXG4gICAgICAgICAgICBpZih0aGlzLmNsZWFyaW5nRmxhZyl7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JMYXllcihcIuato+WcqOW4ruS9oOaSpOWNle+8jOivt+eojeetiVwiLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JMYXllcihcIuato+WcqOW4ruS9oOS4i+WNle+8jOivt+eojeetiVwiLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmcgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZnO1xuICAgIH0sXG4gICAgXG4gICAgZnJlc2g6ZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdGhpcy5zZXRTdGFnZVRleHQoKTtcbiAgICB9LFxuICAgIFxuICAgIGV4aXRHYW1lOiBmdW5jdGlvbigpe1xuICAgICAgICBpZiAoIUNDX0pTQil7XG4gICAgICAgICAgICBpZiAod2luZG93LmFsaUxvdHRlcnlDYXNpbm9TREspIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESy5wb3BXaW5kb3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdnYW1lJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2FtZVN0YXJ0OiBmdW5jdGlvbigpe1xuICAgICAgICBjYy5sb2coXCJnYW1lc3RhcnRcIik7XG4gICAgICAgIHRoaXMuc2V0U3RhZ2VUZXh0KCk7XG4gICAgICAgIHRoaXMuZ2V0Q2hpcEluZGV4KCk7XG4gICAgICAgIHRoaXMuc2hvd0NoaXBOdW0oKTtcbiAgICAgICAgdGhpcy5zd2lmdFNlYygpO1xuICAgICAgICB0aGlzLnNob3dQb3dlckluZm8oKTtcbiAgICB9LFxuICAgIFxuICAgIHJlR286IGZ1bmN0aW9uKClcbiAgICB7fSxcbiAgICBcbiAgICBzaG93UG93ZXJJbmZvOmZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuY2hvb3NlQXJlYU5vZGVBcnJheS5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGNob29zZUFyZWEgPSB0aGlzLmNob29zZUFyZWFOb2RlQXJyYXlbaV07XG4gICAgICAgICAgICB2YXIgcG93ZXJKUyA9IGNob29zZUFyZWEuZ2V0Q29tcG9uZW50KFwiUG93ZXJcIik7XG4gICAgICAgICAgICBwb3dlckpTLnVwZGF0YUluZm8odGhpcy5jdW5DbWQpO1xuICAgICAgICAgICAgcG93ZXJKUy51cGRhdGFVSSgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICBmbHlTdGFtcDogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8dGhpcy5jaG9vc2VBcmVhTm9kZUFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY2hvb3NlQXJlYSA9IHRoaXMuY2hvb3NlQXJlYU5vZGVBcnJheVtpXTtcbiAgICAgICAgICAgIHZhciBwb3dlckpTID0gY2hvb3NlQXJlYS5nZXRDb21wb25lbnQoXCJQb3dlclwiKTtcbiAgICAgICAgICAgIGlmKHBvd2VySlMucG93ZXJJZD4xICYmIHBvd2VySlMucG93ZXJJZCA8PSA1KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8v5bu25pe255qEMnPotbDnm5bmiLNcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShwb3dlckpTLnB1dFN0YW1wT25BY3Rpb24oKSwgMC4zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgc2V0U3RhZ2VUZXh0OmZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuY2RKaWVkdWFuTGFiZWwubm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmNkdGltZUljb24uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jZExhYmVsLm5vZGUueCA9IC01NDtcbiAgICAgICAgXG4gICAgICAgIHZhciBqaWVkdWFuID0gdGhpcy5jZEppZWR1YW5MYWJlbC5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xuICAgICAgICBpZih0aGlzLm5ldERhdGEudGltZUZsYWcgPT0gMSkvL+ebsumAiemYtuautVxuICAgICAgICB7XG4gICAgICAgICAgICBqaWVkdWFuLnN0cmluZyA9IFwi55uy6YCJXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0aGlzLm5ldERhdGEudGltZUZsYWcgPT0gMikvL+aYjumAiemYtuautVxuICAgICAgICB7XG4gICAgICAgICAgICBqaWVkdWFuLnN0cmluZyA9IFwi5piO6YCJXCI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIHN3aWZ0U2VjOiBmdW5jdGlvbigpe1xuICAgICAgICAvLzHvvJrmmpfniYzmraPlnKjmipXms6jvvIwy77ya5pqX54mM6Zi25q615bey5oiq5q2i77yMM++8muaYjueJjOato+WcqOaKleazqO+8jDQ65piO54mM5oiq6Iez5oqV5rOo77yMNe+8muato+WcqOW8gOWllu+8jDc65YGc5ZSuXG4gICAgICAgIGNjLmxvZyhcInRoaXMubmV0RGF0YS5pbml0RGF0YS5zdGF0dXMgXCIsIHRoaXMubmV0RGF0YS5pbml0RGF0YS5zdGF0dXMpO1xuICAgICAgICBjYy5sb2coXCJ0aW1lIGlzIFwiLCB0aGlzLm5ldERhdGEuc2Vjcyk7XG4gICAgICAgIHN3aXRjaCh0aGlzLm5ldERhdGEuaW5pdERhdGEuc3RhdHVzKXtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICB7XG5cbiAgICAgICAgICAgICAgICBpZih0aGlzLm5ldERhdGEuc2VjcyA+PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZExhYmVsLnN0cmluZyA9IHRoaXMubmV0RGF0YS5zZWNzICsgXCLigLNcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZExhYmVsLnN0cmluZyA9IFwiMOKAs1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgcHQgPSB0aGlzLmNkQmdSZWQucGFyZW50O1xuICAgICAgICAgICAgICAgIHB0LnN0b3BBbGxBY3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgcHQucnVuQWN0aW9uKGNjLnNob3coKSk7XG5cbiAgICAgICAgICAgICAgICBpZih0aGlzLm5ldERhdGEuc2VjcyA8PSAzKXsgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2RCZ1JlZC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkQmdZZWxsb3cuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkdCAgPSAwLjM4Oy8vMyAvIDg7XG4gICAgICAgICAgICAgICAgICAgIHB0LnJ1bkFjdGlvbihjYy5yZXBlYXQoY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKGR0KSwgY2MuaGlkZSgpLCBjYy5kZWxheVRpbWUoZHQpLCBjYy5zaG93KCkpLCA0KSk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkQmdZZWxsb3cuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZEJnUmVkLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5zaG93U2VjLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXlMaWdodChmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb1N0b3BCZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OntcbiAgICAgICAgICAgICAgICAvL+ato+WcqOW8gOWlllxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmV3YXJkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNzp7XG4gICAgICAgICAgICAgICAgLy/lgZzllK5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHNlY0NkOiBmdW5jdGlvbihkdCl7XG4gICAgICAgIHRoaXMubmV0RGF0YS5zZWNzLS07XG4gICAgfSxcblxuICAgIHNob3dTZWMgOiBmdW5jdGlvbihkdCl7XG4gICAgICAgIC8vIGNjLmxvZyhcInNob3dTZWPvvJp0aGlzLm5ldERhdGEuc2VjcyBcIix0aGlzLm5ldERhdGEuc2Vjcyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5ldERhdGEuc2Vjcy0tO1xuXG4gICAgICAgIGlmKHRoaXMubmV0RGF0YS5zZWNzID49IDApe1xuICAgICAgICAgICAgdGhpcy5jZExhYmVsLnN0cmluZyA9IHRoaXMubmV0RGF0YS5zZWNzICsgXCLigLNcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5jZExhYmVsLnN0cmluZyA9IFwiMOKAs1wiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5uZXREYXRhLnNlY3MgPD0gMyl7XG4gICAgICAgICAgICBsZXQgcHQgPSB0aGlzLmNkQmdSZWQucGFyZW50O1xuICAgICAgICAgICAgY2MubG9nKFwic2VjPDNcIik7XG4gICAgICAgICAgICB0aGlzLmNkQmdSZWQuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2RCZ1llbGxvdy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBkdCAgPSAwLjM4Oy8vMyAvIDg7XG4gICAgICAgICAgICBwdC5ydW5BY3Rpb24oY2MucmVwZWF0KGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZShkdCksIGNjLmhpZGUoKSwgY2MuZGVsYXlUaW1lKGR0KSwgY2Muc2hvdygpKSwgNCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5uZXREYXRhLnNlY3MgPD0gMCl7XG4gICAgICAgICAgICBjYy5sb2coXCJzZWM9PSAwXCIpO1xuICAgICAgICAgICAgdGhpcy5kb1N0b3BCZXQoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgZG9TdG9wQmV0IDogZnVuY3Rpb24oKXtcbiAgICAgICAgY2MubG9nKFwidGhpcy5uZXREYXRhLnRpbWVGbGFnXCIsIHRoaXMubmV0RGF0YS50aW1lRmxhZyk7XG4gICAgICAgIHRoaXMuY2FuQmV0RmxhZyA9IGZhbHNlO1xuICAgICAgICAvLyB0aGlzLnVuc2NoZWR1bGUodGhpcy50dXJuVGFibGVMb2dpYyk7XG4gICAgICAgIHRoaXMuY2RCZ1JlZC5wYXJlbnQuc3RvcEFsbEFjdGlvbnMoKTtcbiAgICAgICAgdGhpcy5jZEJnUmVkLnBhcmVudC5ydW5BY3Rpb24oY2Muc2hvdygpKTtcbiAgICAgICAgdGhpcy5jZEJnWWVsbG93LmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuY2RCZ1JlZC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jZExhYmVsLm5vZGUueCA9IC01NDtcbiAgICAgICAgLy8gdGhpcy5jZExhYmVsLncgPSAyMjA7XG4gICAgICAgIHRoaXMuY2RMYWJlbC5zdHJpbmcgPSBcIuW3suaIquatolwiO1xuICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5zaG93U2VjKTsgICAgICAgIFxuICAgICAgICAvL+WPmOeBsDtcbiAgICAgICAgdGhpcy5ncmF5TGlnaHQodHJ1ZSk7XG4gICAgICAgIHRoaXMubmV0RGF0YS5pbml0RGF0YS5zdGF0dXMgPSAyO1xuICAgICAgICBpZih0aGlzLm5ldERhdGEudGltZUZsYWcgPT0gMSkvL+aPkOekuuahhueahOW8ueWHuuiOt+WPlue7k+aenOW8gOWlluWwseeEtuWQjuiOt+WPluesrOS6jOWbnuWQiOaVsOaNrlxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnN0YWdlU3RvcERpYWxvZy5hY3RpdmUgID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGR0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2Vjb25kRGF0YSgpOy8v6I635Y+W56ys5LqM6Zi25q61XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShjYWxsYmFjaywgMTApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UvL+iOt+WPluW8gOWllue7k+aenFxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmdldFJld2FyZCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICBncmF5TGlnaHQ6IGZ1bmN0aW9uKGZsYWcpe1xuICAgICAgICB0aGlzLmNsZWFyT25Ob2RlLnBhcmVudC5hY3RpdmUgPSAhZmxhZztcbiAgICAgICAgdGhpcy5jbGVhck9mZk5vZGUucGFyZW50LmFjdGl2ZSA9IGZsYWc7XG4gICAgICAgIHRoaXMuYmV0QXJlYU5vVG91Y2hOb2RlLmFjdGl2ZSA9IGZsYWc7XG4gICAgfSxcbiAgICBcbiAgICBnZXRSZXdhcmQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5zaG93U2VjKTtcbiAgICAgICAgdGhpcy5jZEJnUmVkLnBhcmVudC5zdG9wQWxsQWN0aW9ucygpO1xuICAgICAgICB0aGlzLmNkQmdSZWQucGFyZW50LnJ1bkFjdGlvbihjYy5zaG93KCkpO1xuICAgICAgICB0aGlzLmNkQmdZZWxsb3cuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jZEJnUmVkLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNkSmllZHVhbkxhYmVsLm5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICB0aGlzLmNkdGltZUljb24uYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICB0aGlzLmNkTGFiZWwubm9kZS54ID0gLTEwMDtcbiAgICAgICAgdGhpcy5jZExhYmVsLnN0cmluZyA9IFwi5q2j5Zyo5byA5aWWXCI7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKHRoaXMuZG9SZXdhcmQsIDYpOyAvL+aPkOWJjeeahDPnp5IgKyDnu5nmnI3liqHlmajpooTnlZnnmoQy56eSO1xuICAgIH0sXG4gICAgXG4gICAgZ2V0U2Vjb25kRGF0YTogZnVuY3Rpb24oKS8v6I635Y+W56ys5LqM6Zi25q6155qE5pWw5o2uXG4gICAge1xuICAgICAgICB0aGlzLnNob3dXYWl0TGF5ZXIoKTtcbiAgICAgICAgdmFyIGRhdGFPcGVyID0gRGF0YU9wZXIuRGF0YU9wZXIuZ2V0SW5zdCgpO1xuICAgICAgICBkYXRhT3Blci5nZXRTZWNvbmREYXRhKHRoaXMubmV0Q2FsbGJhY2ssIHRoaXMpO1xuICAgIH0sXG4gICAgXG4gICAgZG9SZXdhcmQgOiBmdW5jdGlvbihkdCl7XG4gICAgICAgIHRoaXMuc2hvd1dhaXRMYXllcigpO1xuICAgICAgICB2YXIgZGF0YU9wZXIgPSBEYXRhT3Blci5EYXRhT3Blci5nZXRJbnN0KCk7XG4gICAgICAgIGRhdGFPcGVyLmdldFJld2FyZCh0aGlzLm5ldENhbGxiYWNrLCB0aGlzKTtcbiAgICB9LFxuXG4gICAgc2hvd1dhaXRMYXllcjogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5ibGFja0xheWVyLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMud2FpdExheWVyLmFjdGl2ZSA9IHRydWU7XG4gICAgfSxcblxuICAgIGhpZGVXYWl0TGF5ZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuYmxhY2tMYXllci5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53YWl0TGF5ZXIuYWN0aXZlID0gZmFsc2U7XG4gICAgfSxcbiAgICBcbiAgICBqdWRnZUJhbGFuY2U6IGZ1bmN0aW9uKGFtb3VudCl7XG4gICAgICAgIGxldCBmZyA9IHRydWU7XG5cbiAgICAgICAgaWYodGhpcy5zZGtCYWxhbmNlID09IC0xKXtcbiAgICAgICAgICAgIC8vIHRoaXMuZXJyRGlhbG9nVGFnID0gNTtcbiAgICAgICAgICAgIC8vIHRoaXMuYmxhY2tMYXllci5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgLy8gdGhpcy5yZWZyZXNoTm9kZS5nZXRDaGlsZEJ5TmFtZShcIndvcmRcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBcIuiOt+WPllwiICsgdGhpcy5uZXREYXRhLmN1cnJlbmN5ICsgXCLlpLHotKXvvIzor7fliLfmlrDpobXpnaJcIjtcbiAgICAgICAgICAgIC8vIHRoaXMucmVmcmVzaE5vZGUucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC4yLCAxLjAsIDEuMCkpO1xuICAgICAgICAgICAgZmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuXG4gICAgICAgICAgICBpZihhbW91bnQgPiB0aGlzLnNka0JhbGFuY2Upe1xuICAgICAgICAgICAgICAgIC8v5o+Q56S65L2Z6aKd5LiN6Laz77yM6Lez6L2s5Yiw5YWF5YC8XG4gICAgICAgICAgICAgICAgaWYgKCFDQ19KU0Ipe1xuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmFsaUxvdHRlcnlDYXNpbm9TREspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGlMb3R0ZXJ5Q2FzaW5vU0RLLnJlY2hhcmdlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vIGJhbGFuY2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmc7XG4gICAgfSxcbiAgICBcbiAgICBnZXRDaGlwSW5kZXg6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBzZGsgPSB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESztcbiAgICAgICAgXG4gICAgICAgIGlmKHNkayl7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5uZXREYXRhLmJldExpc3QubGVuZ3RoO1xuXG4gICAgICAgICAgICB3aW5kb3cuYWxpTG90dGVyeUNhc2lub1NESy5nZXRDYWNoZSgnY2hpcCcsIGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYubmV0RGF0YS5iZXRMaXN0W2ldID09IHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGlwSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYubmV0RGF0YS5iZXRMaXN0W2ldID09IHNlbGYubmV0RGF0YS5wcmVCZXQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hpcEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9ICAgICAgICBcbiAgICB9LFxuICAgIFxuICAgIC8qKioqKioqKioqKioqKioqKipuZXRDYWxsYmFjayoqKioqKioqKioqKioqKioqKioqL1xuICAgIG5ldENhbGxiYWNrOiBmdW5jdGlvbihjbWQsIHJlcywgbXNnLCBzZWxmKVxuICAgIHtcbiAgICAgICAgY2MubG9nKFwibmV0Q2FsbGJhY2sgY21kPVwiICsgY21kKTtcbiAgICAgICAgc2VsZi5jdW5DbWQgPSBjbWQ7XG4gICAgICAgIHZhciBuZXREYXRhID0gTmV0RGF0YS5OZXREYXRhLmdldEluc3QoKTtcbiAgICAgICAgc2VsZi5oaWRlV2FpdExheWVyKCk7XG4gICAgICAgIHJlcyA9IHBhcnNlSW50KHJlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzPVwiICsgcmVzICsgXCIvbWc9XCIgKyBtc2cgK1wiL2NtZD1cIiArIHNlbGYuY3VuQ21kKTtcbiAgICAgICAgc3dpdGNoKHJlcylcbiAgICAgICAge1xuICAgICAgICBjYXNlIDA6eyAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoKGNtZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXNlIDEwMDovL2luaXRcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZ2FtZVN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTAxOi8vYmV0XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dQb3dlckluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgLy/mipXms6jmiJDlip/lkI7muIXpm7ZcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8c2VsZi5jaG9vc2VBcmVhTm9kZUFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hvb3NlQXJlYSA9IHNlbGYuY2hvb3NlQXJlYU5vZGVBcnJheVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3dlckpTID0gY2hvb3NlQXJlYS5nZXRDb21wb25lbnQoXCJQb3dlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBvd2VySlMuYmV0RmxhZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3dlckpTLmJldE51bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDI6Ly9jbGVhclxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93UG93ZXJJbmZvKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTAzOi8vcmV3YXJkXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNoaXBBcmVhTm9Ub3VjaE5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1Bvd2VySW5mbygpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZseVN0YW1wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA0Oi8vdHdvc3RlbXBcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhZ2VTdG9wRGlhbG9nLmFjdGl2ZSAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zY2hlZHVsZShzZWxmLnNob3dTZWMsIDEpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmdyYXlMaWdodChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0U3RhZ2VUZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1Bvd2VySW5mbygpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDU6Ly9vcmRlcmxpc3RcbiAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA2Oi8vaGlzdG9yeWxpc3RcbiAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDAwNzovL+WcqOWFtuS7luiuvuWkh+eZu+W9lVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNlbGYuc3RhZ2VTdG9wRGlhbG9nLmFjdGl2ZSAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JEaWFsb2dKcyA9IHNlbGYuZXJyb3JEaWFsb2cuZ2V0Q29tcG9uZW50KFwiZXJyb3JEaWFsb2dcIik7XG4gICAgICAgICAgICAgICAgZXJyb3JEaWFsb2dKcy5zaG93RGlhbG9nKG1zZywgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMDAwMDk6Ly/kvZnpop3kuI3otrM7XG4gICAgICAgIHtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICB7XG4gICAgICAgICAgICBjYy5sb2coXCJyZXMgZGVmYXVsdCFcIik7XG4gICAgICAgICAgICBzd2l0Y2goY21kKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhc2UgMTAxOi8v5oqV5rOo5aSx6LSl5Zue5pS2562556CBXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGYuc2hvd1RvYXN0KG1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FuQmV0RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8c2VsZi5jaG9vc2VBcmVhTm9kZUFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaG9vc2VBcmVhID0gc2VsZi5jaG9vc2VBcmVhTm9kZUFycmF5W2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3dlckpTID0gY2hvb3NlQXJlYS5nZXRDb21wb25lbnQoXCJQb3dlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgbmV0RGF0YS5yZXFCZXRMaXN0Lmxlbmd0aDsgaiArKylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBvd2VySlMuYmV0SWQgPT0gbmV0RGF0YS5yZXFCZXRMaXN0W2pdLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3dlckpTLnJlZHVjZVNlbGZDaGlwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFnZVN0b3BEaWFsb2cuYWN0aXZlICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/pgJrluLjnmoTplJnor6/mj5DnpLpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvckRpYWxvZ0pzID0gc2VsZi5lcnJvckRpYWxvZy5nZXRDb21wb25lbnQoXCJlcnJvckRpYWxvZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRGlhbG9nSnMuc2hvd0RpYWxvZyhtc2csIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0sXG4gICAgLyoqKioqKioqKioqKioqKioqKm5ldENhbGxiYWNrKioqKioqKioqKioqKioqKioqKiovXG4gICAgLy/nu5Pnrpfpo57miLPnu5PmnZ9cbiAgICByZXdhcmRGbHlGaW5pc2hlZENhbGxiYWNrOiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICAvL+aPkOekuuWGjeadpeS4gOWxgDEwM1xuICAgICAgICBjYy5sb2coXCLor6Xmj5DnpLrnu5PnrpfpobXpnaLkuoZcIik7XG4gICAgICAgIFxuICAgICAgICB2YXIgbmV0RGF0YSA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCk7XG4gICAgICAgIHZhciBzdGF0dXMgPSBuZXREYXRhLnJld2FyZERhdGEuc3RhdHVzO1xuICAgICAgICB0aGlzLnJld2FyZE5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdmFyIG51bSA9IDA7XG4gICAgICAgIGlmKHN0YXR1cyA9PSAxKS8vc2hlbmdcbiAgICAgICAge1xuICAgICAgICAgICAgbnVtID0gbmV0RGF0YS5yZXdhcmREYXRhLmFtb3VudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHN0YXR1cyA9PSAyKS8vZnVcbiAgICAgICAge1xuICAgICAgICAgICAgbnVtID0gbmV0RGF0YS5yZXdhcmREYXRhLmFsbE51bTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHN0YXR1cyA9PSAzKS8vcGluZ1xuICAgICAgICB7XG4gICAgICAgICAgICBudW0gPSBuZXREYXRhLnJld2FyZERhdGEuYW1vdW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJld2FyZE5vZGUuZ2V0Q29tcG9uZW50KFwicmV3YXJkTm9kZVwiKS5zZXRDb250ZW50KHN0YXR1cywgbnVtKTtcblxuICAgIH0sXG4gICAgXG4gICAgcmV3YXJkTm9kZUNvbHNlOiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB0aGlzLnJld2FyZE5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNob3dQb3dlckluZm8oKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzZWxmLnNob3dTZWMsIDEpO1xuICAgICAgICB0aGlzLmdyYXlMaWdodChmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0U3RhZ2VUZXh0KCk7XG4gICAgfSxcbiAgICBcbiAgICBjbGVhcldpdGhGbGFnOiBmdW5jdGlvbihmbGFnKVxuICAgIHtcbiAgICAgICAgdGhpcy5jbGVhck9uTm9kZS5wYXJlbnQuYWN0aXZlID0gZmxhZztcbiAgICAgICAgdGhpcy5jbGVhck9mZk5vZGUucGFyZW50LmFjdGl2ZSA9ICFmbGFnO1xuICAgIH0sXG4gICAgXG4gICAgLy/miYDmnInmjInpkq7nmoTlm57osIPnrYnnrYnkuovku7ZcbiAgICBidG5BY3Rpb25DYWxsQmFjayA6ZnVuY3Rpb24oYnRuVGFnKVxuICAgIHtcbiAgICAgICAgc3dpdGNoKGJ0blRhZylcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gY2FzZSBCdXR0b25TY2FsZS5FYnV0dG9uVGFnLmVDbGVhcmU6XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICB7ICBcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJjbGVhciBjbGVhciEhIVwiKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJpbmdGbGFnID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmKHRoaXMuY2FuQmV0RmxhZyl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuQmV0RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyV2l0aEZsYWcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93V2FpdExheWVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhT3BlciA9IERhdGFPcGVyLkRhdGFPcGVyLmdldEluc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9wZXIuZ2V0Q2xlYXIodGhpcy5uZXRDYWxsYmFjaywgdGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHlCYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VtTGltaXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldERhdGEuYmV0TGltaXQgPSB0aGlzLm5ldERhdGEudG90YWxCZXRMaW1pdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkQ2xlYXJGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHlCYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VtTGltaXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldERhdGEuYmV0TGltaXQgPSB0aGlzLm5ldERhdGEudG90YWxCZXRMaW1pdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQnV0dG9uU2NhbGUuRWJ1dHRvblRhZy5lQ2hpcDIwOlxuICAgICAgICAgICAgY2FzZSBCdXR0b25TY2FsZS5FYnV0dG9uVGFnLmVDaGlwNTA6XG4gICAgICAgICAgICBjYXNlIEJ1dHRvblNjYWxlLkVidXR0b25UYWcuZUNoaXAxMDA6XG4gICAgICAgICAgICBjYXNlIEJ1dHRvblNjYWxlLkVidXR0b25UYWcuZUNoaXA1MDA6XG4gICAgICAgICAgICBjYXNlIEJ1dHRvblNjYWxlLkVidXR0b25UYWcuZUNoaXAxMDAwOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNjLmxvZyhcIlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaXBJbmRleCA9IGJ0blRhZztcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Q2hpcCgpO1xuICAgICAgICAgICAgICAgIGNjLmxvZyhcImNoaXBJbmRleCBpcyA9IFwiLCB0aGlzLmNoaXBJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9LFxuICAgIFxuICAgIGVycm9yRGlhbG9nQ2FsbGJhY2s6IGZ1bmN0aW9uKHR5cGVhY3Rpb24sIHBvc2l0b24pLy8xIOW3pui+ueaMiemSriAyIOWPs+i+ueaMiemSrlxuICAgIHtcbiAgICAgICAgdmFyIGVycm9yRGlhbG9nSnMgPSB0aGlzLmVycm9yRGlhbG9nLmdldENvbXBvbmVudChcImVycm9yRGlhbG9nXCIpO1xuICAgICAgICBlcnJvckRpYWxvZ0pzLmhpZGVEaWFsb2coKTtcbiAgICAgICAgXG4gICAgICAgIGlmKHBvc2l0b24gPT0gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgc3dpdGNoKHR5cGVhY3Rpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WPquacieS4gOS4quaMiemSruWIt+aWsOWIt+aWsOeahFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jdW5DbWQgPT0gMTAwKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhT3BlciA9IERhdGFPcGVyLkRhdGFPcGVyLmdldEluc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhT3Blci5nZXRJbml0KHRoaXMubmV0Q2FsbGJhY2ssIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmN1bkNtZCA9PSAxMDEpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMuY3VuQ21kID09IDEwMilcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5jdW5DbWQgPT0gMTAzKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1dhaXRMYXllcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhT3BlciA9IERhdGFPcGVyLkRhdGFPcGVyLmdldEluc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhT3Blci5nZXRSZXdhcmQodGhpcy5uZXRDYWxsYmFjaywgdGhpcyk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmN1bkNtZCA9PSAxMDQpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93V2FpdExheWVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFPcGVyID0gRGF0YU9wZXIuRGF0YU9wZXIuZ2V0SW5zdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFPcGVyLmdldFNlY29uZERhdGEodGhpcy5uZXRDYWxsYmFjaywgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMuY3VuQ21kID09IDEwNSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5jdW5DbWQgPT0gMTA2KVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBzd2l0Y2godHlwZWFjdGlvbilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gIFxuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICBzaG93Q2hpcE51bTogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIG5ldERhdGEgPSBOZXREYXRhLk5ldERhdGEuZ2V0SW5zdCgpO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNoaXBOb2RlQXJyYXkubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgbGV0IGxlID0gdGhpcy5jaGlwTm9kZUFycmF5W2ldLmdldENoaWxkQnlOYW1lKFwiTGFiZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0Rm9udHNpemUobGUsIG5ldERhdGEuaW5pdERhdGEuYmV0TGlzdFtpXSk7ICAgICAgICAgICAgXG4gICAgICAgICAgICBsZS5zdHJpbmcgPSBuZXREYXRhLmluaXREYXRhLmJldExpc3RbaV07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBuZXREYXRhLmluaXREYXRhLmJldExpc3QubGVuZ3RoOyBqICsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZihuZXREYXRhLmluaXREYXRhLmJldExpc3Rbal0gPT0gbmV0RGF0YS5pbml0RGF0YS5wcmVCZXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlwSW5kZXggPSBqO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzZXRDaGlwKCk7XG4gICAgfSxcblxuICAgIGFkanVzdEZvbnRzaXplOiBmdW5jdGlvbihsYWJlbCwgbnVtKXtcbiAgICAgICAgbGV0IHNlID0gNzE7XG5cbiAgICAgICAgaWYobnVtIDwgMTAwKXtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKG51bSA8IDEwMDApe1xuICAgICAgICAgICAgbGFiZWwuZm9udFNpemUgPSBzZSAqIDAuODtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgbGFiZWwuZm9udFNpemUgPSBzZSAqIDAuNTY7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIHJlc2V0Q2hpcDogZnVuY3Rpb24oKXtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY2hpcE5vZGVBcnJheS5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZih0aGlzLmNoaXBJbmRleCA9PSBpKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaXBOb2RlQXJyYXlbaV0uc2NhbGUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaXBOb2RlQXJyYXlbaV0uc2NhbGUgPSAwLjg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIHNob3dUb2FzdDogZnVuY3Rpb24obXNnKXtcbiAgICAgICAgdGhpcy50b2FzdE5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcbiAgICAgICAgdGhpcy50b2FzdE5vZGUuc2NhbGUgPSAwO1xuICAgICAgICBsZXQgbGUgID0gdGhpcy50b2FzdE5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ3b3JkXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCk7XG4gICAgICAgIGxlLnN0cmluZyA9IG1zZztcbiAgICAgICAgbGV0IGxlbiA9IGxlLm5vZGUud2lkdGggKyAyMDsgXG4gICAgICAgIHRoaXMudG9hc3ROb2RlLndpZHRoID0gbGVuO1xuICAgICAgICBsZXQgZHQgPSAwLjI7XG4gICAgICAgIGxldCBhYzEgPSBjYy5zY2FsZVRvKGR0LCAxLjAsIDEuMCk7XG4gICAgICAgIGxldCBhYzIgPSBjYy5zY2FsZVRvKGR0LCAwLCAwKTtcbiAgICAgICAgdGhpcy50b2FzdE5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGFjMSwgY2MuZGVsYXlUaW1lKDIpLCBhYzIpKTtcbiAgICB9LFxuICAgIFxuICAgIGZseUJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuY2hvb3NlQXJlYU5vZGVBcnJheS5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGNob29zZUFyZWEgPSB0aGlzLmNob29zZUFyZWFOb2RlQXJyYXlbaV07XG4gICAgICAgICAgICB2YXIgcG93ZXJKUyA9IGNob29zZUFyZWEuZ2V0Q29tcG9uZW50KFwiUG93ZXJcIik7XG4gICAgICAgICAgICBpZihwb3dlckpTLmJldEZsYWcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcG93ZXJKUy5mbHlCYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuXG4gICAgcG93ZXJCZXQgOiBmdW5jdGlvbihjYWxsRnVuYywgcG93ZXIpe1xuICAgICAgICAvL+WIpOaWreeZu+W9leOAgeS9meminVRPRE9cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNlbGYuY2FuQmV0RmxhZyA9IHRydWU7XG4gICAgICAgICAgICBzZWxmLmNsZWFyV2l0aEZsYWcodHJ1ZSk7XG4gICAgICAgICAgICBjYWxsRnVuYyhzZWxmLmNoaXBJbmRleCwgcG93ZXIpO1xuICAgICAgICAgICAgc2VsZi51bnNjaGVkdWxlKHNlbGYuZGVhbEJldCk7XG4gICAgICAgICAgICBzZWxmLnNjaGVkdWxlT25jZShzZWxmLmRlYWxCZXQsIDAuNSk7ICAgXG5cbiAgICAgICAgfVxuICAgICAgICBzZWxmLmlzQ2FuQmV0KGNhbGxiYWNrKTtcbiAgICAgICAgXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOecn+WunuaKleazqFxuICAgICAqL1xuICAgIGRlYWxCZXQgOiBmdW5jdGlvbihkdCl7XG4gICAgICAgIHRoaXMuc2hvd1dhaXRMYXllcigpO1xuICAgICAgICB2YXIgbmV0RGF0YSA9IE5ldERhdGEuTmV0RGF0YS5nZXRJbnN0KCk7XG4gICAgICAgIHZhciBkYXRhT3BlciA9IERhdGFPcGVyLkRhdGFPcGVyLmdldEluc3QoKTtcbiAgICAgICAgLy/pppblhYjmo4Dmn6XlvZPliY3mmK/lkKbmnInmsqHmnInlm57mnaXnmoTmipXms6jor7fmsYJcbiAgICAgICAgaWYodGhpcy5jYW5CZXRGbGFnKXtcbiAgICAgICAgICAgIHRoaXMuY2FuQmV0RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXREYXRhLnJlcUJldExpc3QgPSBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmNob29zZUFyZWFOb2RlQXJyYXkubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjaG9vc2VBcmVhID0gdGhpcy5jaG9vc2VBcmVhTm9kZUFycmF5W2ldO1xuICAgICAgICAgICAgdmFyIHBvd2VySlMgPSBjaG9vc2VBcmVhLmdldENvbXBvbmVudChcIlBvd2VyXCIpO1xuICAgICAgICAgICAgaWYocG93ZXJKUy5iZXRGbGFnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBvd2VySlMuYmV0TnVtID0gMDtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgcG93ZXJKUy5iZXRMaXN0Lmxlbmd0aDsgKytqKXtcbiAgICAgICAgICAgICAgICAgICAgbmV0RGF0YS5yZXFCZXRMaXN0LnB1c2gocG93ZXJKUy5iZXRMaXN0W2pdKTtcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJKUy5iZXROdW0gKz0gcG93ZXJKUy5iZXRMaXN0W2pdLmJldCAqIHBvd2VySlMuYmV0TGlzdFtqXS5udW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvd2VySlMuYmV0TGlzdCA9IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGRhdGFPcGVyLmdldEJldCh0aGlzLm5ldENhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UodGhpcy5kZWFsQmV0LCAwLjUpO1xuICAgICAgICB9XG4gICAgfSxcblxufSk7XG4iLCJ2YXIgQ3J5cHRvSlM9cmVxdWlyZShcIi4vY29yZVwiKTsoZnVuY3Rpb24oTWF0aCl7dmFyIEM9Q3J5cHRvSlM7dmFyIENfbGliPUMubGliO3ZhciBXb3JkQXJyYXk9Q19saWIuV29yZEFycmF5O3ZhciBIYXNoZXI9Q19saWIuSGFzaGVyO3ZhciBDX2FsZ289Qy5hbGdvO3ZhciBUPVtdOyhmdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8NjQ7aSsrKXtUW2ldPShNYXRoLmFicyhNYXRoLnNpbihpKzEpKSo0Mjk0OTY3Mjk2KXwwfX0oKSk7dmFyIE1ENT1DX2FsZ28uTUQ1PUhhc2hlci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgV29yZEFycmF5LmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oTSxvZmZzZXQpe2Zvcih2YXIgaT0wO2k8MTY7aSsrKXt2YXIgb2Zmc2V0X2k9b2Zmc2V0K2k7dmFyIE1fb2Zmc2V0X2k9TVtvZmZzZXRfaV07TVtvZmZzZXRfaV09KCgoKE1fb2Zmc2V0X2k8PDgpfChNX29mZnNldF9pPj4+MjQpKSYxNjcxMTkzNSl8KCgoTV9vZmZzZXRfaTw8MjQpfChNX29mZnNldF9pPj4+OCkpJjQyNzgyNTUzNjApKX12YXIgSD10aGlzLl9oYXNoLndvcmRzO3ZhciBNX29mZnNldF8wPU1bb2Zmc2V0KzBdO3ZhciBNX29mZnNldF8xPU1bb2Zmc2V0KzFdO3ZhciBNX29mZnNldF8yPU1bb2Zmc2V0KzJdO3ZhciBNX29mZnNldF8zPU1bb2Zmc2V0KzNdO3ZhciBNX29mZnNldF80PU1bb2Zmc2V0KzRdO3ZhciBNX29mZnNldF81PU1bb2Zmc2V0KzVdO3ZhciBNX29mZnNldF82PU1bb2Zmc2V0KzZdO3ZhciBNX29mZnNldF83PU1bb2Zmc2V0KzddO3ZhciBNX29mZnNldF84PU1bb2Zmc2V0KzhdO3ZhciBNX29mZnNldF85PU1bb2Zmc2V0KzldO3ZhciBNX29mZnNldF8xMD1NW29mZnNldCsxMF07dmFyIE1fb2Zmc2V0XzExPU1bb2Zmc2V0KzExXTt2YXIgTV9vZmZzZXRfMTI9TVtvZmZzZXQrMTJdO3ZhciBNX29mZnNldF8xMz1NW29mZnNldCsxM107dmFyIE1fb2Zmc2V0XzE0PU1bb2Zmc2V0KzE0XTt2YXIgTV9vZmZzZXRfMTU9TVtvZmZzZXQrMTVdO3ZhciBhPUhbMF07dmFyIGI9SFsxXTt2YXIgYz1IWzJdO3ZhciBkPUhbM107YT1GRihhLGIsYyxkLE1fb2Zmc2V0XzAsNyxUWzBdKTtkPUZGKGQsYSxiLGMsTV9vZmZzZXRfMSwxMixUWzFdKTtjPUZGKGMsZCxhLGIsTV9vZmZzZXRfMiwxNyxUWzJdKTtiPUZGKGIsYyxkLGEsTV9vZmZzZXRfMywyMixUWzNdKTthPUZGKGEsYixjLGQsTV9vZmZzZXRfNCw3LFRbNF0pO2Q9RkYoZCxhLGIsYyxNX29mZnNldF81LDEyLFRbNV0pO2M9RkYoYyxkLGEsYixNX29mZnNldF82LDE3LFRbNl0pO2I9RkYoYixjLGQsYSxNX29mZnNldF83LDIyLFRbN10pO2E9RkYoYSxiLGMsZCxNX29mZnNldF84LDcsVFs4XSk7ZD1GRihkLGEsYixjLE1fb2Zmc2V0XzksMTIsVFs5XSk7Yz1GRihjLGQsYSxiLE1fb2Zmc2V0XzEwLDE3LFRbMTBdKTtiPUZGKGIsYyxkLGEsTV9vZmZzZXRfMTEsMjIsVFsxMV0pO2E9RkYoYSxiLGMsZCxNX29mZnNldF8xMiw3LFRbMTJdKTtkPUZGKGQsYSxiLGMsTV9vZmZzZXRfMTMsMTIsVFsxM10pO2M9RkYoYyxkLGEsYixNX29mZnNldF8xNCwxNyxUWzE0XSk7Yj1GRihiLGMsZCxhLE1fb2Zmc2V0XzE1LDIyLFRbMTVdKTthPUdHKGEsYixjLGQsTV9vZmZzZXRfMSw1LFRbMTZdKTtkPUdHKGQsYSxiLGMsTV9vZmZzZXRfNiw5LFRbMTddKTtjPUdHKGMsZCxhLGIsTV9vZmZzZXRfMTEsMTQsVFsxOF0pO2I9R0coYixjLGQsYSxNX29mZnNldF8wLDIwLFRbMTldKTthPUdHKGEsYixjLGQsTV9vZmZzZXRfNSw1LFRbMjBdKTtkPUdHKGQsYSxiLGMsTV9vZmZzZXRfMTAsOSxUWzIxXSk7Yz1HRyhjLGQsYSxiLE1fb2Zmc2V0XzE1LDE0LFRbMjJdKTtiPUdHKGIsYyxkLGEsTV9vZmZzZXRfNCwyMCxUWzIzXSk7YT1HRyhhLGIsYyxkLE1fb2Zmc2V0XzksNSxUWzI0XSk7ZD1HRyhkLGEsYixjLE1fb2Zmc2V0XzE0LDksVFsyNV0pO2M9R0coYyxkLGEsYixNX29mZnNldF8zLDE0LFRbMjZdKTtiPUdHKGIsYyxkLGEsTV9vZmZzZXRfOCwyMCxUWzI3XSk7YT1HRyhhLGIsYyxkLE1fb2Zmc2V0XzEzLDUsVFsyOF0pO2Q9R0coZCxhLGIsYyxNX29mZnNldF8yLDksVFsyOV0pO2M9R0coYyxkLGEsYixNX29mZnNldF83LDE0LFRbMzBdKTtiPUdHKGIsYyxkLGEsTV9vZmZzZXRfMTIsMjAsVFszMV0pO2E9SEgoYSxiLGMsZCxNX29mZnNldF81LDQsVFszMl0pO2Q9SEgoZCxhLGIsYyxNX29mZnNldF84LDExLFRbMzNdKTtjPUhIKGMsZCxhLGIsTV9vZmZzZXRfMTEsMTYsVFszNF0pO2I9SEgoYixjLGQsYSxNX29mZnNldF8xNCwyMyxUWzM1XSk7YT1ISChhLGIsYyxkLE1fb2Zmc2V0XzEsNCxUWzM2XSk7ZD1ISChkLGEsYixjLE1fb2Zmc2V0XzQsMTEsVFszN10pO2M9SEgoYyxkLGEsYixNX29mZnNldF83LDE2LFRbMzhdKTtiPUhIKGIsYyxkLGEsTV9vZmZzZXRfMTAsMjMsVFszOV0pO2E9SEgoYSxiLGMsZCxNX29mZnNldF8xMyw0LFRbNDBdKTtkPUhIKGQsYSxiLGMsTV9vZmZzZXRfMCwxMSxUWzQxXSk7Yz1ISChjLGQsYSxiLE1fb2Zmc2V0XzMsMTYsVFs0Ml0pO2I9SEgoYixjLGQsYSxNX29mZnNldF82LDIzLFRbNDNdKTthPUhIKGEsYixjLGQsTV9vZmZzZXRfOSw0LFRbNDRdKTtkPUhIKGQsYSxiLGMsTV9vZmZzZXRfMTIsMTEsVFs0NV0pO2M9SEgoYyxkLGEsYixNX29mZnNldF8xNSwxNixUWzQ2XSk7Yj1ISChiLGMsZCxhLE1fb2Zmc2V0XzIsMjMsVFs0N10pO2E9SUkoYSxiLGMsZCxNX29mZnNldF8wLDYsVFs0OF0pO2Q9SUkoZCxhLGIsYyxNX29mZnNldF83LDEwLFRbNDldKTtjPUlJKGMsZCxhLGIsTV9vZmZzZXRfMTQsMTUsVFs1MF0pO2I9SUkoYixjLGQsYSxNX29mZnNldF81LDIxLFRbNTFdKTthPUlJKGEsYixjLGQsTV9vZmZzZXRfMTIsNixUWzUyXSk7ZD1JSShkLGEsYixjLE1fb2Zmc2V0XzMsMTAsVFs1M10pO2M9SUkoYyxkLGEsYixNX29mZnNldF8xMCwxNSxUWzU0XSk7Yj1JSShiLGMsZCxhLE1fb2Zmc2V0XzEsMjEsVFs1NV0pO2E9SUkoYSxiLGMsZCxNX29mZnNldF84LDYsVFs1Nl0pO2Q9SUkoZCxhLGIsYyxNX29mZnNldF8xNSwxMCxUWzU3XSk7Yz1JSShjLGQsYSxiLE1fb2Zmc2V0XzYsMTUsVFs1OF0pO2I9SUkoYixjLGQsYSxNX29mZnNldF8xMywyMSxUWzU5XSk7YT1JSShhLGIsYyxkLE1fb2Zmc2V0XzQsNixUWzYwXSk7ZD1JSShkLGEsYixjLE1fb2Zmc2V0XzExLDEwLFRbNjFdKTtjPUlJKGMsZCxhLGIsTV9vZmZzZXRfMiwxNSxUWzYyXSk7Yj1JSShiLGMsZCxhLE1fb2Zmc2V0XzksMjEsVFs2M10pO0hbMF09KEhbMF0rYSl8MDtIWzFdPShIWzFdK2IpfDA7SFsyXT0oSFsyXStjKXwwO0hbM109KEhbM10rZCl8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZGF0YT10aGlzLl9kYXRhO3ZhciBkYXRhV29yZHM9ZGF0YS53b3Jkczt2YXIgbkJpdHNUb3RhbD10aGlzLl9uRGF0YUJ5dGVzKjg7dmFyIG5CaXRzTGVmdD1kYXRhLnNpZ0J5dGVzKjg7ZGF0YVdvcmRzW25CaXRzTGVmdD4+PjVdfD0xMjg8PCgyNC1uQml0c0xlZnQlMzIpO3ZhciBuQml0c1RvdGFsSD1NYXRoLmZsb29yKG5CaXRzVG90YWwvNDI5NDk2NzI5Nik7dmFyIG5CaXRzVG90YWxMPW5CaXRzVG90YWw7ZGF0YVdvcmRzWygoKG5CaXRzTGVmdCs2NCk+Pj45KTw8NCkrMTVdPSgoKChuQml0c1RvdGFsSDw8OCl8KG5CaXRzVG90YWxIPj4+MjQpKSYxNjcxMTkzNSl8KCgobkJpdHNUb3RhbEg8PDI0KXwobkJpdHNUb3RhbEg+Pj44KSkmNDI3ODI1NTM2MCkpO2RhdGFXb3Jkc1soKChuQml0c0xlZnQrNjQpPj4+OSk8PDQpKzE0XT0oKCgobkJpdHNUb3RhbEw8PDgpfChuQml0c1RvdGFsTD4+PjI0KSkmMTY3MTE5MzUpfCgoKG5CaXRzVG90YWxMPDwyNCl8KG5CaXRzVG90YWxMPj4+OCkpJjQyNzgyNTUzNjApKTtkYXRhLnNpZ0J5dGVzPShkYXRhV29yZHMubGVuZ3RoKzEpKjQ7dGhpcy5fcHJvY2VzcygpO3ZhciBoYXNoPXRoaXMuX2hhc2g7dmFyIEg9aGFzaC53b3Jkcztmb3IodmFyIGk9MDtpPDQ7aSsrKXt2YXIgSF9pPUhbaV07SFtpXT0oKChIX2k8PDgpfChIX2k+Pj4yNCkpJjE2NzExOTM1KXwoKChIX2k8PDI0KXwoSF9pPj4+OCkpJjQyNzgyNTUzNjApfXJldHVybiBoYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBjbG9uZT1IYXNoZXIuY2xvbmUuY2FsbCh0aGlzKTtjbG9uZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGNsb25lfX0pO2Z1bmN0aW9uIEZGKGEsYixjLGQseCxzLHQpe3ZhciBuPWErKChiJmMpfCh+YiZkKSkreCt0O3JldHVybigobjw8cyl8KG4+Pj4oMzItcykpKStifWZ1bmN0aW9uIEdHKGEsYixjLGQseCxzLHQpe3ZhciBuPWErKChiJmQpfChjJn5kKSkreCt0O3JldHVybigobjw8cyl8KG4+Pj4oMzItcykpKStifWZ1bmN0aW9uIEhIKGEsYixjLGQseCxzLHQpe3ZhciBuPWErKGJeY15kKSt4K3Q7cmV0dXJuKChuPDxzKXwobj4+PigzMi1zKSkpK2J9ZnVuY3Rpb24gSUkoYSxiLGMsZCx4LHMsdCl7dmFyIG49YSsoY14oYnx+ZCkpK3grdDtyZXR1cm4oKG48PHMpfChuPj4+KDMyLXMpKSkrYn1DLk1ENT1IYXNoZXIuX2NyZWF0ZUhlbHBlcihNRDUpO0MuSG1hY01ENT1IYXNoZXIuX2NyZWF0ZUhtYWNIZWxwZXIoTUQ1KX0oTWF0aCkpIiwidmFyIENyeXB0b0pTPXJlcXVpcmUoXCIuL2NvcmVcIik7Q3J5cHRvSlMubW9kZS5FQ0I9KGZ1bmN0aW9uKCl7dmFyIEVDQj1DcnlwdG9KUy5saWIuQmxvY2tDaXBoZXJNb2RlLmV4dGVuZCgpO0VDQi5FbmNyeXB0b3I9RUNCLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHdvcmRzLG9mZnNldCl7dGhpcy5fY2lwaGVyLmVuY3J5cHRCbG9jayh3b3JkcyxvZmZzZXQpfX0pO0VDQi5EZWNyeXB0b3I9RUNCLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHdvcmRzLG9mZnNldCl7dGhpcy5fY2lwaGVyLmRlY3J5cHRCbG9jayh3b3JkcyxvZmZzZXQpfX0pO3JldHVybiBFQ0J9KCkpIiwiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgaW1nQXJyYXk6IFtjYy5Ob2RlXSxcbiAgICAgICAgYnRuSW1nOiBjYy5Ob2RlLFxuICAgICAgICBidG5UZXh0OiBjYy5MYWJlbCxcbiAgICAgICAgdGV4dDogY2MuTm9kZSxcbiAgICB9LFxuXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYnRuSW1nLnBhcmVudC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgZnVuY3Rpb24gKGV2ZW50KXtcbiAgICAgICAgICAgICB0aGlzLmJ0bkltZy5zY2FsZSA9IDAuODtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5idG5JbWcucGFyZW50Lm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgZnVuY3Rpb24gKGV2ZW50KXtcbiAgICAgICAgICAgICB0aGlzLmJ0bkltZy5zY2FsZSA9IDE7XG4gICAgICAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG9uRnVuY3Rpb24gPSBjYy5maW5kKCdDYW52YXMnKS5nZXRDb21wb25lbnQoJ2dhbWUnKTtcbiAgICAgICAgICAgIG9uRnVuY3Rpb24ucmV3YXJkTm9kZUNvbHNlKCk7XG5cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmJ0bkltZy5wYXJlbnQub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMLGZ1bmN0aW9uKGV2ZW50KXtcblxuICAgICAgICAgICAgdGhpcy5idG5JbWcuc2NhbGUgPSAxO1xuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIH0sdGhpcyk7XG4gICAgfSxcbiAgICBcbiAgICBzZXRDb250ZW50OiBmdW5jdGlvbihzdGF0dXMsIG51bSlcbiAgICB7XG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB2YXIgdGV4dCA9IFwiXCI7XG4gICAgICAgIGlmKHN0YXR1cyA9PT0gMCkvL+acquW8gOWlllxuICAgICAgICB7fVxuICAgICAgICBlbHNlIGlmKHN0YXR1cyA9PSAxKS8vc2hlbmdcbiAgICAgICAge1xuICAgICAgICAgICAgdGV4dCA9IFwi5LitXCIgKyBudW0gKyBcIuixhlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoc3RhdHVzID09IDIpLy9mdVxuICAgICAgICB7XG4gICAgICAgICAgICB0ZXh0ID0gXCLku4rml6Xlt7LmnIlcIiArIG51bSArIFwi5Lq654yc5LitIVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoc3RhdHVzID09IDMpLy9waW5nXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRleHQgPSBcIui/lOi/mFwiICsgbnVtICsgXCLosYZcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHN0YXR1cyA9PSA0KS8v5pyq5oqV5rOoXG4gICAgICAgIHt9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0LmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdGV4dDtcbiAgICAgICAgaWYoc3RhdHVzID49IDEgJiYgc3RhdHVzIDw9IDMpLy9zaGVuZ1xuICAgICAgICB7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5pbWdBcnJheS5sZW5ndGg7IGkgKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYoKHN0YXR1cy0xKSA9PSBpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdBcnJheVtpXS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ0FycmF5W2ldLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG5cbiAgICAvLyB9LFxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9